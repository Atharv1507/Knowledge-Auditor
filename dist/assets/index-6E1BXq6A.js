(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function i(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(a){if(a.ep)return;a.ep=!0;const l=i(a);fetch(a.href,l)}})();var hc={exports:{}},xs={};var mm;function lT(){if(mm)return xs;mm=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(s,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var h in a)h!=="key"&&(l[h]=a[h])}else l=a;return a=l.ref,{$$typeof:t,type:s,key:c,ref:a!==void 0?a:null,props:l}}return xs.Fragment=e,xs.jsx=i,xs.jsxs=i,xs}var gm;function uT(){return gm||(gm=1,hc.exports=lT()),hc.exports}var B=uT(),pc={exports:{}},ks={},mc={exports:{}},gc={};var ym;function cT(){return ym||(ym=1,(function(t){function e(H,Q){var ie=H.length;H.push(Q);e:for(;0<ie;){var Ae=ie-1>>>1,Le=H[Ae];if(0<a(Le,Q))H[Ae]=Q,H[ie]=Le,ie=Ae;else break e}}function i(H){return H.length===0?null:H[0]}function s(H){if(H.length===0)return null;var Q=H[0],ie=H.pop();if(ie!==Q){H[0]=ie;e:for(var Ae=0,Le=H.length,I=Le>>>1;Ae<I;){var $=2*(Ae+1)-1,Z=H[$],ee=$+1,fe=H[ee];if(0>a(Z,ie))ee<Le&&0>a(fe,Z)?(H[Ae]=fe,H[ee]=ie,Ae=ee):(H[Ae]=Z,H[$]=ie,Ae=$);else if(ee<Le&&0>a(fe,ie))H[Ae]=fe,H[ee]=ie,Ae=ee;else break e}}return Q}function a(H,Q){var ie=H.sortIndex-Q.sortIndex;return ie!==0?ie:H.id-Q.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var c=Date,h=c.now();t.unstable_now=function(){return c.now()-h}}var g=[],p=[],v=1,T=null,_=3,E=!1,w=!1,b=!1,R=!1,D=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;function V(H){for(var Q=i(p);Q!==null;){if(Q.callback===null)s(p);else if(Q.startTime<=H)s(p),Q.sortIndex=Q.expirationTime,e(g,Q);else break;Q=i(p)}}function X(H){if(b=!1,V(H),!w)if(i(g)!==null)w=!0,P||(P=!0,Te());else{var Q=i(p);Q!==null&&tt(X,Q.startTime-H)}}var P=!1,J=-1,Y=5,K=-1;function oe(){return R?!0:!(t.unstable_now()-K<Y)}function pe(){if(R=!1,P){var H=t.unstable_now();K=H;var Q=!0;try{e:{w=!1,b&&(b=!1,q(J),J=-1),E=!0;var ie=_;try{t:{for(V(H),T=i(g);T!==null&&!(T.expirationTime>H&&oe());){var Ae=T.callback;if(typeof Ae=="function"){T.callback=null,_=T.priorityLevel;var Le=Ae(T.expirationTime<=H);if(H=t.unstable_now(),typeof Le=="function"){T.callback=Le,V(H),Q=!0;break t}T===i(g)&&s(g),V(H)}else s(g);T=i(g)}if(T!==null)Q=!0;else{var I=i(p);I!==null&&tt(X,I.startTime-H),Q=!1}}break e}finally{T=null,_=ie,E=!1}Q=void 0}}finally{Q?Te():P=!1}}}var Te;if(typeof U=="function")Te=function(){U(pe)};else if(typeof MessageChannel<"u"){var Oe=new MessageChannel,Ee=Oe.port2;Oe.port1.onmessage=pe,Te=function(){Ee.postMessage(null)}}else Te=function(){D(pe,0)};function tt(H,Q){J=D(function(){H(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Y=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_next=function(H){switch(_){case 1:case 2:case 3:var Q=3;break;default:Q=_}var ie=_;_=Q;try{return H()}finally{_=ie}},t.unstable_requestPaint=function(){R=!0},t.unstable_runWithPriority=function(H,Q){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ie=_;_=H;try{return Q()}finally{_=ie}},t.unstable_scheduleCallback=function(H,Q,ie){var Ae=t.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?Ae+ie:Ae):ie=Ae,H){case 1:var Le=-1;break;case 2:Le=250;break;case 5:Le=1073741823;break;case 4:Le=1e4;break;default:Le=5e3}return Le=ie+Le,H={id:v++,callback:Q,priorityLevel:H,startTime:ie,expirationTime:Le,sortIndex:-1},ie>Ae?(H.sortIndex=ie,e(p,H),i(g)===null&&H===i(p)&&(b?(q(J),J=-1):b=!0,tt(X,ie-Ae))):(H.sortIndex=Le,e(g,H),w||E||(w=!0,P||(P=!0,Te()))),H},t.unstable_shouldYield=oe,t.unstable_wrapCallback=function(H){var Q=_;return function(){var ie=_;_=Q;try{return H.apply(this,arguments)}finally{_=ie}}}})(gc)),gc}var vm;function fT(){return vm||(vm=1,mc.exports=cT()),mc.exports}var yc={exports:{}},ce={};var _m;function dT(){if(_m)return ce;_m=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),_=Symbol.iterator;function E(I){return I===null||typeof I!="object"?null:(I=_&&I[_]||I["@@iterator"],typeof I=="function"?I:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,R={};function D(I,$,Z){this.props=I,this.context=$,this.refs=R,this.updater=Z||w}D.prototype.isReactComponent={},D.prototype.setState=function(I,$){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,$,"setState")},D.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function q(){}q.prototype=D.prototype;function U(I,$,Z){this.props=I,this.context=$,this.refs=R,this.updater=Z||w}var V=U.prototype=new q;V.constructor=U,b(V,D.prototype),V.isPureReactComponent=!0;var X=Array.isArray;function P(){}var J={H:null,A:null,T:null,S:null},Y=Object.prototype.hasOwnProperty;function K(I,$,Z){var ee=Z.ref;return{$$typeof:t,type:I,key:$,ref:ee!==void 0?ee:null,props:Z}}function oe(I,$){return K(I.type,$,I.props)}function pe(I){return typeof I=="object"&&I!==null&&I.$$typeof===t}function Te(I){var $={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(Z){return $[Z]})}var Oe=/\/+/g;function Ee(I,$){return typeof I=="object"&&I!==null&&I.key!=null?Te(""+I.key):$.toString(36)}function tt(I){switch(I.status){case"fulfilled":return I.value;case"rejected":throw I.reason;default:switch(typeof I.status=="string"?I.then(P,P):(I.status="pending",I.then(function($){I.status==="pending"&&(I.status="fulfilled",I.value=$)},function($){I.status==="pending"&&(I.status="rejected",I.reason=$)})),I.status){case"fulfilled":return I.value;case"rejected":throw I.reason}}throw I}function H(I,$,Z,ee,fe){var me=typeof I;(me==="undefined"||me==="boolean")&&(I=null);var Ie=!1;if(I===null)Ie=!0;else switch(me){case"bigint":case"string":case"number":Ie=!0;break;case"object":switch(I.$$typeof){case t:case e:Ie=!0;break;case v:return Ie=I._init,H(Ie(I._payload),$,Z,ee,fe)}}if(Ie)return fe=fe(I),Ie=ee===""?"."+Ee(I,0):ee,X(fe)?(Z="",Ie!=null&&(Z=Ie.replace(Oe,"$&/")+"/"),H(fe,$,Z,"",function(Ho){return Ho})):fe!=null&&(pe(fe)&&(fe=oe(fe,Z+(fe.key==null||I&&I.key===fe.key?"":(""+fe.key).replace(Oe,"$&/")+"/")+Ie)),$.push(fe)),1;Ie=0;var pt=ee===""?".":ee+":";if(X(I))for(var $e=0;$e<I.length;$e++)ee=I[$e],me=pt+Ee(ee,$e),Ie+=H(ee,$,Z,me,fe);else if($e=E(I),typeof $e=="function")for(I=$e.call(I),$e=0;!(ee=I.next()).done;)ee=ee.value,me=pt+Ee(ee,$e++),Ie+=H(ee,$,Z,me,fe);else if(me==="object"){if(typeof I.then=="function")return H(tt(I),$,Z,ee,fe);throw $=String(I),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return Ie}function Q(I,$,Z){if(I==null)return I;var ee=[],fe=0;return H(I,ee,"","",function(me){return $.call(Z,me,fe++)}),ee}function ie(I){if(I._status===-1){var $=I._result;$=$(),$.then(function(Z){(I._status===0||I._status===-1)&&(I._status=1,I._result=Z)},function(Z){(I._status===0||I._status===-1)&&(I._status=2,I._result=Z)}),I._status===-1&&(I._status=0,I._result=$)}if(I._status===1)return I._result.default;throw I._result}var Ae=typeof reportError=="function"?reportError:function(I){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof I=="object"&&I!==null&&typeof I.message=="string"?String(I.message):String(I),error:I});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",I);return}console.error(I)},Le={map:Q,forEach:function(I,$,Z){Q(I,function(){$.apply(this,arguments)},Z)},count:function(I){var $=0;return Q(I,function(){$++}),$},toArray:function(I){return Q(I,function($){return $})||[]},only:function(I){if(!pe(I))throw Error("React.Children.only expected to receive a single React element child.");return I}};return ce.Activity=T,ce.Children=Le,ce.Component=D,ce.Fragment=i,ce.Profiler=a,ce.PureComponent=U,ce.StrictMode=s,ce.Suspense=g,ce.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=J,ce.__COMPILER_RUNTIME={__proto__:null,c:function(I){return J.H.useMemoCache(I)}},ce.cache=function(I){return function(){return I.apply(null,arguments)}},ce.cacheSignal=function(){return null},ce.cloneElement=function(I,$,Z){if(I==null)throw Error("The argument must be a React element, but you passed "+I+".");var ee=b({},I.props),fe=I.key;if($!=null)for(me in $.key!==void 0&&(fe=""+$.key),$)!Y.call($,me)||me==="key"||me==="__self"||me==="__source"||me==="ref"&&$.ref===void 0||(ee[me]=$[me]);var me=arguments.length-2;if(me===1)ee.children=Z;else if(1<me){for(var Ie=Array(me),pt=0;pt<me;pt++)Ie[pt]=arguments[pt+2];ee.children=Ie}return K(I.type,fe,ee)},ce.createContext=function(I){return I={$$typeof:c,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null},I.Provider=I,I.Consumer={$$typeof:l,_context:I},I},ce.createElement=function(I,$,Z){var ee,fe={},me=null;if($!=null)for(ee in $.key!==void 0&&(me=""+$.key),$)Y.call($,ee)&&ee!=="key"&&ee!=="__self"&&ee!=="__source"&&(fe[ee]=$[ee]);var Ie=arguments.length-2;if(Ie===1)fe.children=Z;else if(1<Ie){for(var pt=Array(Ie),$e=0;$e<Ie;$e++)pt[$e]=arguments[$e+2];fe.children=pt}if(I&&I.defaultProps)for(ee in Ie=I.defaultProps,Ie)fe[ee]===void 0&&(fe[ee]=Ie[ee]);return K(I,me,fe)},ce.createRef=function(){return{current:null}},ce.forwardRef=function(I){return{$$typeof:h,render:I}},ce.isValidElement=pe,ce.lazy=function(I){return{$$typeof:v,_payload:{_status:-1,_result:I},_init:ie}},ce.memo=function(I,$){return{$$typeof:p,type:I,compare:$===void 0?null:$}},ce.startTransition=function(I){var $=J.T,Z={};J.T=Z;try{var ee=I(),fe=J.S;fe!==null&&fe(Z,ee),typeof ee=="object"&&ee!==null&&typeof ee.then=="function"&&ee.then(P,Ae)}catch(me){Ae(me)}finally{$!==null&&Z.types!==null&&($.types=Z.types),J.T=$}},ce.unstable_useCacheRefresh=function(){return J.H.useCacheRefresh()},ce.use=function(I){return J.H.use(I)},ce.useActionState=function(I,$,Z){return J.H.useActionState(I,$,Z)},ce.useCallback=function(I,$){return J.H.useCallback(I,$)},ce.useContext=function(I){return J.H.useContext(I)},ce.useDebugValue=function(){},ce.useDeferredValue=function(I,$){return J.H.useDeferredValue(I,$)},ce.useEffect=function(I,$){return J.H.useEffect(I,$)},ce.useEffectEvent=function(I){return J.H.useEffectEvent(I)},ce.useId=function(){return J.H.useId()},ce.useImperativeHandle=function(I,$,Z){return J.H.useImperativeHandle(I,$,Z)},ce.useInsertionEffect=function(I,$){return J.H.useInsertionEffect(I,$)},ce.useLayoutEffect=function(I,$){return J.H.useLayoutEffect(I,$)},ce.useMemo=function(I,$){return J.H.useMemo(I,$)},ce.useOptimistic=function(I,$){return J.H.useOptimistic(I,$)},ce.useReducer=function(I,$,Z){return J.H.useReducer(I,$,Z)},ce.useRef=function(I){return J.H.useRef(I)},ce.useState=function(I){return J.H.useState(I)},ce.useSyncExternalStore=function(I,$,Z){return J.H.useSyncExternalStore(I,$,Z)},ce.useTransition=function(){return J.H.useTransition()},ce.version="19.2.4",ce}var Tm;function ef(){return Tm||(Tm=1,yc.exports=dT()),yc.exports}var vc={exports:{}},dt={};var Sm;function hT(){if(Sm)return dt;Sm=1;var t=ef();function e(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var s={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(g,p,v){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:T==null?null:""+T,children:g,containerInfo:p,implementation:v}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return dt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,dt.createPortal=function(g,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(g,p,null,v)},dt.flushSync=function(g){var p=c.T,v=s.p;try{if(c.T=null,s.p=2,g)return g()}finally{c.T=p,s.p=v,s.d.f()}},dt.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(g,p))},dt.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},dt.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var v=p.as,T=h(v,p.crossOrigin),_=typeof p.integrity=="string"?p.integrity:void 0,E=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;v==="style"?s.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:T,integrity:_,fetchPriority:E}):v==="script"&&s.d.X(g,{crossOrigin:T,integrity:_,fetchPriority:E,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},dt.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var v=h(p.as,p.crossOrigin);s.d.M(g,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(g)},dt.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var v=p.as,T=h(v,p.crossOrigin);s.d.L(g,v,{crossOrigin:T,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},dt.preloadModule=function(g,p){if(typeof g=="string")if(p){var v=h(p.as,p.crossOrigin);s.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(g)},dt.requestFormReset=function(g){s.d.r(g)},dt.unstable_batchedUpdates=function(g,p){return g(p)},dt.useFormState=function(g,p,v){return c.H.useFormState(g,p,v)},dt.useFormStatus=function(){return c.H.useHostTransitionStatus()},dt.version="19.2.4",dt}var Em;function pT(){if(Em)return vc.exports;Em=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),vc.exports=hT(),vc.exports}var Am;function mT(){if(Am)return ks;Am=1;var t=fT(),e=ef(),i=pT();function s(n){var o="https://react.dev/errors/"+n;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)o+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+n+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var o=n,r=n;if(n.alternate)for(;o.return;)o=o.return;else{n=o;do o=n,(o.flags&4098)!==0&&(r=o.return),n=o.return;while(n)}return o.tag===3?r:null}function c(n){if(n.tag===13){var o=n.memoizedState;if(o===null&&(n=n.alternate,n!==null&&(o=n.memoizedState)),o!==null)return o.dehydrated}return null}function h(n){if(n.tag===31){var o=n.memoizedState;if(o===null&&(n=n.alternate,n!==null&&(o=n.memoizedState)),o!==null)return o.dehydrated}return null}function g(n){if(l(n)!==n)throw Error(s(188))}function p(n){var o=n.alternate;if(!o){if(o=l(n),o===null)throw Error(s(188));return o!==n?null:n}for(var r=n,u=o;;){var m=r.return;if(m===null)break;var y=m.alternate;if(y===null){if(u=m.return,u!==null){r=u;continue}break}if(m.child===y.child){for(y=m.child;y;){if(y===r)return g(m),n;if(y===u)return g(m),o;y=y.sibling}throw Error(s(188))}if(r.return!==u.return)r=m,u=y;else{for(var S=!1,A=m.child;A;){if(A===r){S=!0,r=m,u=y;break}if(A===u){S=!0,u=m,r=y;break}A=A.sibling}if(!S){for(A=y.child;A;){if(A===r){S=!0,r=y,u=m;break}if(A===u){S=!0,u=y,r=m;break}A=A.sibling}if(!S)throw Error(s(189))}}if(r.alternate!==u)throw Error(s(190))}if(r.tag!==3)throw Error(s(188));return r.stateNode.current===r?n:o}function v(n){var o=n.tag;if(o===5||o===26||o===27||o===6)return n;for(n=n.child;n!==null;){if(o=v(n),o!==null)return o;n=n.sibling}return null}var T=Object.assign,_=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),q=Symbol.for("react.consumer"),U=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),X=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),J=Symbol.for("react.memo"),Y=Symbol.for("react.lazy"),K=Symbol.for("react.activity"),oe=Symbol.for("react.memo_cache_sentinel"),pe=Symbol.iterator;function Te(n){return n===null||typeof n!="object"?null:(n=pe&&n[pe]||n["@@iterator"],typeof n=="function"?n:null)}var Oe=Symbol.for("react.client.reference");function Ee(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===Oe?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case b:return"Fragment";case D:return"Profiler";case R:return"StrictMode";case X:return"Suspense";case P:return"SuspenseList";case K:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case w:return"Portal";case U:return n.displayName||"Context";case q:return(n._context.displayName||"Context")+".Consumer";case V:var o=n.render;return n=n.displayName,n||(n=o.displayName||o.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case J:return o=n.displayName||null,o!==null?o:Ee(n.type)||"Memo";case Y:o=n._payload,n=n._init;try{return Ee(n(o))}catch{}}return null}var tt=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie={pending:!1,data:null,method:null,action:null},Ae=[],Le=-1;function I(n){return{current:n}}function $(n){0>Le||(n.current=Ae[Le],Ae[Le]=null,Le--)}function Z(n,o){Le++,Ae[Le]=n.current,n.current=o}var ee=I(null),fe=I(null),me=I(null),Ie=I(null);function pt(n,o){switch(Z(me,o),Z(fe,n),Z(ee,null),o.nodeType){case 9:case 11:n=(n=o.documentElement)&&(n=n.namespaceURI)?qp(n):0;break;default:if(n=o.tagName,o=o.namespaceURI)o=qp(o),n=Gp(o,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}$(ee),Z(ee,n)}function $e(){$(ee),$(fe),$(me)}function Ho(n){n.memoizedState!==null&&Z(Ie,n);var o=ee.current,r=Gp(o,n.type);o!==r&&(Z(fe,n),Z(ee,r))}function Ws(n){fe.current===n&&($(ee),$(fe)),Ie.current===n&&($(Ie),Is._currentValue=ie)}var Xa,pf;function li(n){if(Xa===void 0)try{throw Error()}catch(r){var o=r.stack.trim().match(/\n( *(at )?)/);Xa=o&&o[1]||"",pf=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Xa+n+pf}var Qa=!1;function Wa(n,o){if(!n||Qa)return"";Qa=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(o){var F=function(){throw Error()};if(Object.defineProperty(F.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(F,[])}catch(L){var O=L}Reflect.construct(n,[],F)}else{try{F.call()}catch(L){O=L}n.call(F.prototype)}}else{try{throw Error()}catch(L){O=L}(F=n())&&typeof F.catch=="function"&&F.catch(function(){})}}catch(L){if(L&&O&&typeof L.stack=="string")return[L.stack,O.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=u.DetermineComponentFrameRoot(),S=y[0],A=y[1];if(S&&A){var C=S.split(`
`),k=A.split(`
`);for(m=u=0;u<C.length&&!C[u].includes("DetermineComponentFrameRoot");)u++;for(;m<k.length&&!k[m].includes("DetermineComponentFrameRoot");)m++;if(u===C.length||m===k.length)for(u=C.length-1,m=k.length-1;1<=u&&0<=m&&C[u]!==k[m];)m--;for(;1<=u&&0<=m;u--,m--)if(C[u]!==k[m]){if(u!==1||m!==1)do if(u--,m--,0>m||C[u]!==k[m]){var G=`
`+C[u].replace(" at new "," at ");return n.displayName&&G.includes("<anonymous>")&&(G=G.replace("<anonymous>",n.displayName)),G}while(1<=u&&0<=m);break}}}finally{Qa=!1,Error.prepareStackTrace=r}return(r=n?n.displayName||n.name:"")?li(r):""}function Gv(n,o){switch(n.tag){case 26:case 27:case 5:return li(n.type);case 16:return li("Lazy");case 13:return n.child!==o&&o!==null?li("Suspense Fallback"):li("Suspense");case 19:return li("SuspenseList");case 0:case 15:return Wa(n.type,!1);case 11:return Wa(n.type.render,!1);case 1:return Wa(n.type,!0);case 31:return li("Activity");default:return""}}function mf(n){try{var o="",r=null;do o+=Gv(n,r),r=n,n=n.return;while(n);return o}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Za=Object.prototype.hasOwnProperty,ja=t.unstable_scheduleCallback,el=t.unstable_cancelCallback,Hv=t.unstable_shouldYield,Bv=t.unstable_requestPaint,bt=t.unstable_now,Vv=t.unstable_getCurrentPriorityLevel,gf=t.unstable_ImmediatePriority,yf=t.unstable_UserBlockingPriority,Zs=t.unstable_NormalPriority,zv=t.unstable_LowPriority,vf=t.unstable_IdlePriority,Fv=t.log,$v=t.unstable_setDisableYieldValue,Bo=null,Rt=null;function xn(n){if(typeof Fv=="function"&&$v(n),Rt&&typeof Rt.setStrictMode=="function")try{Rt.setStrictMode(Bo,n)}catch{}}var Nt=Math.clz32?Math.clz32:Kv,Jv=Math.log,Yv=Math.LN2;function Kv(n){return n>>>=0,n===0?32:31-(Jv(n)/Yv|0)|0}var js=256,er=262144,tr=4194304;function ui(n){var o=n&42;if(o!==0)return o;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function nr(n,o,r){var u=n.pendingLanes;if(u===0)return 0;var m=0,y=n.suspendedLanes,S=n.pingedLanes;n=n.warmLanes;var A=u&134217727;return A!==0?(u=A&~y,u!==0?m=ui(u):(S&=A,S!==0?m=ui(S):r||(r=A&~n,r!==0&&(m=ui(r))))):(A=u&~y,A!==0?m=ui(A):S!==0?m=ui(S):r||(r=u&~n,r!==0&&(m=ui(r)))),m===0?0:o!==0&&o!==m&&(o&y)===0&&(y=m&-m,r=o&-o,y>=r||y===32&&(r&4194048)!==0)?o:m}function Vo(n,o){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&o)===0}function Xv(n,o){switch(n){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _f(){var n=tr;return tr<<=1,(tr&62914560)===0&&(tr=4194304),n}function tl(n){for(var o=[],r=0;31>r;r++)o.push(n);return o}function zo(n,o){n.pendingLanes|=o,o!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Qv(n,o,r,u,m,y){var S=n.pendingLanes;n.pendingLanes=r,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=r,n.entangledLanes&=r,n.errorRecoveryDisabledLanes&=r,n.shellSuspendCounter=0;var A=n.entanglements,C=n.expirationTimes,k=n.hiddenUpdates;for(r=S&~r;0<r;){var G=31-Nt(r),F=1<<G;A[G]=0,C[G]=-1;var O=k[G];if(O!==null)for(k[G]=null,G=0;G<O.length;G++){var L=O[G];L!==null&&(L.lane&=-536870913)}r&=~F}u!==0&&Tf(n,u,0),y!==0&&m===0&&n.tag!==0&&(n.suspendedLanes|=y&~(S&~o))}function Tf(n,o,r){n.pendingLanes|=o,n.suspendedLanes&=~o;var u=31-Nt(o);n.entangledLanes|=o,n.entanglements[u]=n.entanglements[u]|1073741824|r&261930}function Sf(n,o){var r=n.entangledLanes|=o;for(n=n.entanglements;r;){var u=31-Nt(r),m=1<<u;m&o|n[u]&o&&(n[u]|=o),r&=~m}}function Ef(n,o){var r=o&-o;return r=(r&42)!==0?1:nl(r),(r&(n.suspendedLanes|o))!==0?0:r}function nl(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function il(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Af(){var n=Q.p;return n!==0?n:(n=window.event,n===void 0?32:lm(n.type))}function wf(n,o){var r=Q.p;try{return Q.p=n,o()}finally{Q.p=r}}var kn=Math.random().toString(36).slice(2),st="__reactFiber$"+kn,_t="__reactProps$"+kn,Oi="__reactContainer$"+kn,ol="__reactEvents$"+kn,Wv="__reactListeners$"+kn,Zv="__reactHandles$"+kn,Cf="__reactResources$"+kn,Fo="__reactMarker$"+kn;function sl(n){delete n[st],delete n[_t],delete n[ol],delete n[Wv],delete n[Zv]}function Li(n){var o=n[st];if(o)return o;for(var r=n.parentNode;r;){if(o=r[Oi]||r[st]){if(r=o.alternate,o.child!==null||r!==null&&r.child!==null)for(n=Jp(n);n!==null;){if(r=n[st])return r;n=Jp(n)}return o}n=r,r=n.parentNode}return null}function Pi(n){if(n=n[st]||n[Oi]){var o=n.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return n}return null}function $o(n){var o=n.tag;if(o===5||o===26||o===27||o===6)return n.stateNode;throw Error(s(33))}function qi(n){var o=n[Cf];return o||(o=n[Cf]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function nt(n){n[Fo]=!0}var bf=new Set,Rf={};function ci(n,o){Gi(n,o),Gi(n+"Capture",o)}function Gi(n,o){for(Rf[n]=o,n=0;n<o.length;n++)bf.add(o[n])}var jv=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Nf={},If={};function e0(n){return Za.call(If,n)?!0:Za.call(Nf,n)?!1:jv.test(n)?If[n]=!0:(Nf[n]=!0,!1)}function ir(n,o,r){if(e0(o))if(r===null)n.removeAttribute(o);else{switch(typeof r){case"undefined":case"function":case"symbol":n.removeAttribute(o);return;case"boolean":var u=o.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(o);return}}n.setAttribute(o,""+r)}}function or(n,o,r){if(r===null)n.removeAttribute(o);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttribute(o,""+r)}}function cn(n,o,r,u){if(u===null)n.removeAttribute(r);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttributeNS(o,r,""+u)}}function qt(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Mf(n){var o=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function t0(n,o,r){var u=Object.getOwnPropertyDescriptor(n.constructor.prototype,o);if(!n.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var m=u.get,y=u.set;return Object.defineProperty(n,o,{configurable:!0,get:function(){return m.call(this)},set:function(S){r=""+S,y.call(this,S)}}),Object.defineProperty(n,o,{enumerable:u.enumerable}),{getValue:function(){return r},setValue:function(S){r=""+S},stopTracking:function(){n._valueTracker=null,delete n[o]}}}}function rl(n){if(!n._valueTracker){var o=Mf(n)?"checked":"value";n._valueTracker=t0(n,o,""+n[o])}}function Df(n){if(!n)return!1;var o=n._valueTracker;if(!o)return!0;var r=o.getValue(),u="";return n&&(u=Mf(n)?n.checked?"true":"false":n.value),n=u,n!==r?(o.setValue(n),!0):!1}function sr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var n0=/[\n"\\]/g;function Gt(n){return n.replace(n0,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function al(n,o,r,u,m,y,S,A){n.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?n.type=S:n.removeAttribute("type"),o!=null?S==="number"?(o===0&&n.value===""||n.value!=o)&&(n.value=""+qt(o)):n.value!==""+qt(o)&&(n.value=""+qt(o)):S!=="submit"&&S!=="reset"||n.removeAttribute("value"),o!=null?ll(n,S,qt(o)):r!=null?ll(n,S,qt(r)):u!=null&&n.removeAttribute("value"),m==null&&y!=null&&(n.defaultChecked=!!y),m!=null&&(n.checked=m&&typeof m!="function"&&typeof m!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?n.name=""+qt(A):n.removeAttribute("name")}function Uf(n,o,r,u,m,y,S,A){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(n.type=y),o!=null||r!=null){if(!(y!=="submit"&&y!=="reset"||o!=null)){rl(n);return}r=r!=null?""+qt(r):"",o=o!=null?""+qt(o):r,A||o===n.value||(n.value=o),n.defaultValue=o}u=u??m,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=A?n.checked:!!u,n.defaultChecked=!!u,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(n.name=S),rl(n)}function ll(n,o,r){o==="number"&&sr(n.ownerDocument)===n||n.defaultValue===""+r||(n.defaultValue=""+r)}function Hi(n,o,r,u){if(n=n.options,o){o={};for(var m=0;m<r.length;m++)o["$"+r[m]]=!0;for(r=0;r<n.length;r++)m=o.hasOwnProperty("$"+n[r].value),n[r].selected!==m&&(n[r].selected=m),m&&u&&(n[r].defaultSelected=!0)}else{for(r=""+qt(r),o=null,m=0;m<n.length;m++){if(n[m].value===r){n[m].selected=!0,u&&(n[m].defaultSelected=!0);return}o!==null||n[m].disabled||(o=n[m])}o!==null&&(o.selected=!0)}}function xf(n,o,r){if(o!=null&&(o=""+qt(o),o!==n.value&&(n.value=o),r==null)){n.defaultValue!==o&&(n.defaultValue=o);return}n.defaultValue=r!=null?""+qt(r):""}function kf(n,o,r,u){if(o==null){if(u!=null){if(r!=null)throw Error(s(92));if(tt(u)){if(1<u.length)throw Error(s(93));u=u[0]}r=u}r==null&&(r=""),o=r}r=qt(o),n.defaultValue=r,u=n.textContent,u===r&&u!==""&&u!==null&&(n.value=u),rl(n)}function Bi(n,o){if(o){var r=n.firstChild;if(r&&r===n.lastChild&&r.nodeType===3){r.nodeValue=o;return}}n.textContent=o}var i0=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Of(n,o,r){var u=o.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?u?n.setProperty(o,""):o==="float"?n.cssFloat="":n[o]="":u?n.setProperty(o,r):typeof r!="number"||r===0||i0.has(o)?o==="float"?n.cssFloat=r:n[o]=(""+r).trim():n[o]=r+"px"}function Lf(n,o,r){if(o!=null&&typeof o!="object")throw Error(s(62));if(n=n.style,r!=null){for(var u in r)!r.hasOwnProperty(u)||o!=null&&o.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var m in o)u=o[m],o.hasOwnProperty(m)&&r[m]!==u&&Of(n,m,u)}else for(var y in o)o.hasOwnProperty(y)&&Of(n,y,o[y])}function ul(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var o0=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),s0=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function rr(n){return s0.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function fn(){}var cl=null;function fl(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Vi=null,zi=null;function Pf(n){var o=Pi(n);if(o&&(n=o.stateNode)){var r=n[_t]||null;e:switch(n=o.stateNode,o.type){case"input":if(al(n,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),o=r.name,r.type==="radio"&&o!=null){for(r=n;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+Gt(""+o)+'"][type="radio"]'),o=0;o<r.length;o++){var u=r[o];if(u!==n&&u.form===n.form){var m=u[_t]||null;if(!m)throw Error(s(90));al(u,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(o=0;o<r.length;o++)u=r[o],u.form===n.form&&Df(u)}break e;case"textarea":xf(n,r.value,r.defaultValue);break e;case"select":o=r.value,o!=null&&Hi(n,!!r.multiple,o,!1)}}}var dl=!1;function qf(n,o,r){if(dl)return n(o,r);dl=!0;try{var u=n(o);return u}finally{if(dl=!1,(Vi!==null||zi!==null)&&(Yr(),Vi&&(o=Vi,n=zi,zi=Vi=null,Pf(o),n)))for(o=0;o<n.length;o++)Pf(n[o])}}function Jo(n,o){var r=n.stateNode;if(r===null)return null;var u=r[_t]||null;if(u===null)return null;r=u[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(r&&typeof r!="function")throw Error(s(231,o,typeof r));return r}var dn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hl=!1;if(dn)try{var Yo={};Object.defineProperty(Yo,"passive",{get:function(){hl=!0}}),window.addEventListener("test",Yo,Yo),window.removeEventListener("test",Yo,Yo)}catch{hl=!1}var On=null,pl=null,ar=null;function Gf(){if(ar)return ar;var n,o=pl,r=o.length,u,m="value"in On?On.value:On.textContent,y=m.length;for(n=0;n<r&&o[n]===m[n];n++);var S=r-n;for(u=1;u<=S&&o[r-u]===m[y-u];u++);return ar=m.slice(n,1<u?1-u:void 0)}function lr(n){var o=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&o===13&&(n=13)):n=o,n===10&&(n=13),32<=n||n===13?n:0}function ur(){return!0}function Hf(){return!1}function Tt(n){function o(r,u,m,y,S){this._reactName=r,this._targetInst=m,this.type=u,this.nativeEvent=y,this.target=S,this.currentTarget=null;for(var A in n)n.hasOwnProperty(A)&&(r=n[A],this[A]=r?r(y):y[A]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?ur:Hf,this.isPropagationStopped=Hf,this}return T(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ur)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ur)},persist:function(){},isPersistent:ur}),o}var fi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cr=Tt(fi),Ko=T({},fi,{view:0,detail:0}),r0=Tt(Ko),ml,gl,Xo,fr=T({},Ko,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vl,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Xo&&(Xo&&n.type==="mousemove"?(ml=n.screenX-Xo.screenX,gl=n.screenY-Xo.screenY):gl=ml=0,Xo=n),ml)},movementY:function(n){return"movementY"in n?n.movementY:gl}}),Bf=Tt(fr),a0=T({},fr,{dataTransfer:0}),l0=Tt(a0),u0=T({},Ko,{relatedTarget:0}),yl=Tt(u0),c0=T({},fi,{animationName:0,elapsedTime:0,pseudoElement:0}),f0=Tt(c0),d0=T({},fi,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),h0=Tt(d0),p0=T({},fi,{data:0}),Vf=Tt(p0),m0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},g0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},y0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function v0(n){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(n):(n=y0[n])?!!o[n]:!1}function vl(){return v0}var _0=T({},Ko,{key:function(n){if(n.key){var o=m0[n.key]||n.key;if(o!=="Unidentified")return o}return n.type==="keypress"?(n=lr(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?g0[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vl,charCode:function(n){return n.type==="keypress"?lr(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?lr(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),T0=Tt(_0),S0=T({},fr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zf=Tt(S0),E0=T({},Ko,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vl}),A0=Tt(E0),w0=T({},fi,{propertyName:0,elapsedTime:0,pseudoElement:0}),C0=Tt(w0),b0=T({},fr,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),R0=Tt(b0),N0=T({},fi,{newState:0,oldState:0}),I0=Tt(N0),M0=[9,13,27,32],_l=dn&&"CompositionEvent"in window,Qo=null;dn&&"documentMode"in document&&(Qo=document.documentMode);var D0=dn&&"TextEvent"in window&&!Qo,Ff=dn&&(!_l||Qo&&8<Qo&&11>=Qo),$f=" ",Jf=!1;function Yf(n,o){switch(n){case"keyup":return M0.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kf(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Fi=!1;function U0(n,o){switch(n){case"compositionend":return Kf(o);case"keypress":return o.which!==32?null:(Jf=!0,$f);case"textInput":return n=o.data,n===$f&&Jf?null:n;default:return null}}function x0(n,o){if(Fi)return n==="compositionend"||!_l&&Yf(n,o)?(n=Gf(),ar=pl=On=null,Fi=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Ff&&o.locale!=="ko"?null:o.data;default:return null}}var k0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xf(n){var o=n&&n.nodeName&&n.nodeName.toLowerCase();return o==="input"?!!k0[n.type]:o==="textarea"}function Qf(n,o,r,u){Vi?zi?zi.push(u):zi=[u]:Vi=u,o=ea(o,"onChange"),0<o.length&&(r=new cr("onChange","change",null,r,u),n.push({event:r,listeners:o}))}var Wo=null,Zo=null;function O0(n){Up(n,0)}function dr(n){var o=$o(n);if(Df(o))return n}function Wf(n,o){if(n==="change")return o}var Zf=!1;if(dn){var Tl;if(dn){var Sl="oninput"in document;if(!Sl){var jf=document.createElement("div");jf.setAttribute("oninput","return;"),Sl=typeof jf.oninput=="function"}Tl=Sl}else Tl=!1;Zf=Tl&&(!document.documentMode||9<document.documentMode)}function ed(){Wo&&(Wo.detachEvent("onpropertychange",td),Zo=Wo=null)}function td(n){if(n.propertyName==="value"&&dr(Zo)){var o=[];Qf(o,Zo,n,fl(n)),qf(O0,o)}}function L0(n,o,r){n==="focusin"?(ed(),Wo=o,Zo=r,Wo.attachEvent("onpropertychange",td)):n==="focusout"&&ed()}function P0(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return dr(Zo)}function q0(n,o){if(n==="click")return dr(o)}function G0(n,o){if(n==="input"||n==="change")return dr(o)}function H0(n,o){return n===o&&(n!==0||1/n===1/o)||n!==n&&o!==o}var It=typeof Object.is=="function"?Object.is:H0;function jo(n,o){if(It(n,o))return!0;if(typeof n!="object"||n===null||typeof o!="object"||o===null)return!1;var r=Object.keys(n),u=Object.keys(o);if(r.length!==u.length)return!1;for(u=0;u<r.length;u++){var m=r[u];if(!Za.call(o,m)||!It(n[m],o[m]))return!1}return!0}function nd(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function id(n,o){var r=nd(n);n=0;for(var u;r;){if(r.nodeType===3){if(u=n+r.textContent.length,n<=o&&u>=o)return{node:r,offset:o-n};n=u}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=nd(r)}}function od(n,o){return n&&o?n===o?!0:n&&n.nodeType===3?!1:o&&o.nodeType===3?od(n,o.parentNode):"contains"in n?n.contains(o):n.compareDocumentPosition?!!(n.compareDocumentPosition(o)&16):!1:!1}function sd(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var o=sr(n.document);o instanceof n.HTMLIFrameElement;){try{var r=typeof o.contentWindow.location.href=="string"}catch{r=!1}if(r)n=o.contentWindow;else break;o=sr(n.document)}return o}function El(n){var o=n&&n.nodeName&&n.nodeName.toLowerCase();return o&&(o==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||o==="textarea"||n.contentEditable==="true")}var B0=dn&&"documentMode"in document&&11>=document.documentMode,$i=null,Al=null,es=null,wl=!1;function rd(n,o,r){var u=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;wl||$i==null||$i!==sr(u)||(u=$i,"selectionStart"in u&&El(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),es&&jo(es,u)||(es=u,u=ea(Al,"onSelect"),0<u.length&&(o=new cr("onSelect","select",null,o,r),n.push({event:o,listeners:u}),o.target=$i)))}function di(n,o){var r={};return r[n.toLowerCase()]=o.toLowerCase(),r["Webkit"+n]="webkit"+o,r["Moz"+n]="moz"+o,r}var Ji={animationend:di("Animation","AnimationEnd"),animationiteration:di("Animation","AnimationIteration"),animationstart:di("Animation","AnimationStart"),transitionrun:di("Transition","TransitionRun"),transitionstart:di("Transition","TransitionStart"),transitioncancel:di("Transition","TransitionCancel"),transitionend:di("Transition","TransitionEnd")},Cl={},ad={};dn&&(ad=document.createElement("div").style,"AnimationEvent"in window||(delete Ji.animationend.animation,delete Ji.animationiteration.animation,delete Ji.animationstart.animation),"TransitionEvent"in window||delete Ji.transitionend.transition);function hi(n){if(Cl[n])return Cl[n];if(!Ji[n])return n;var o=Ji[n],r;for(r in o)if(o.hasOwnProperty(r)&&r in ad)return Cl[n]=o[r];return n}var ld=hi("animationend"),ud=hi("animationiteration"),cd=hi("animationstart"),V0=hi("transitionrun"),z0=hi("transitionstart"),F0=hi("transitioncancel"),fd=hi("transitionend"),dd=new Map,bl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");bl.push("scrollEnd");function Qt(n,o){dd.set(n,o),ci(o,[n])}var hr=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Ht=[],Yi=0,Rl=0;function pr(){for(var n=Yi,o=Rl=Yi=0;o<n;){var r=Ht[o];Ht[o++]=null;var u=Ht[o];Ht[o++]=null;var m=Ht[o];Ht[o++]=null;var y=Ht[o];if(Ht[o++]=null,u!==null&&m!==null){var S=u.pending;S===null?m.next=m:(m.next=S.next,S.next=m),u.pending=m}y!==0&&hd(r,m,y)}}function mr(n,o,r,u){Ht[Yi++]=n,Ht[Yi++]=o,Ht[Yi++]=r,Ht[Yi++]=u,Rl|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function Nl(n,o,r,u){return mr(n,o,r,u),gr(n)}function pi(n,o){return mr(n,null,null,o),gr(n)}function hd(n,o,r){n.lanes|=r;var u=n.alternate;u!==null&&(u.lanes|=r);for(var m=!1,y=n.return;y!==null;)y.childLanes|=r,u=y.alternate,u!==null&&(u.childLanes|=r),y.tag===22&&(n=y.stateNode,n===null||n._visibility&1||(m=!0)),n=y,y=y.return;return n.tag===3?(y=n.stateNode,m&&o!==null&&(m=31-Nt(r),n=y.hiddenUpdates,u=n[m],u===null?n[m]=[o]:u.push(o),o.lane=r|536870912),y):null}function gr(n){if(50<Es)throw Es=0,Pu=null,Error(s(185));for(var o=n.return;o!==null;)n=o,o=n.return;return n.tag===3?n.stateNode:null}var Ki={};function $0(n,o,r,u){this.tag=n,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mt(n,o,r,u){return new $0(n,o,r,u)}function Il(n){return n=n.prototype,!(!n||!n.isReactComponent)}function hn(n,o){var r=n.alternate;return r===null?(r=Mt(n.tag,o,n.key,n.mode),r.elementType=n.elementType,r.type=n.type,r.stateNode=n.stateNode,r.alternate=n,n.alternate=r):(r.pendingProps=o,r.type=n.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=n.flags&65011712,r.childLanes=n.childLanes,r.lanes=n.lanes,r.child=n.child,r.memoizedProps=n.memoizedProps,r.memoizedState=n.memoizedState,r.updateQueue=n.updateQueue,o=n.dependencies,r.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},r.sibling=n.sibling,r.index=n.index,r.ref=n.ref,r.refCleanup=n.refCleanup,r}function pd(n,o){n.flags&=65011714;var r=n.alternate;return r===null?(n.childLanes=0,n.lanes=o,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=r.childLanes,n.lanes=r.lanes,n.child=r.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=r.memoizedProps,n.memoizedState=r.memoizedState,n.updateQueue=r.updateQueue,n.type=r.type,o=r.dependencies,n.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),n}function yr(n,o,r,u,m,y){var S=0;if(u=n,typeof n=="function")Il(n)&&(S=1);else if(typeof n=="string")S=Q_(n,r,ee.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case K:return n=Mt(31,r,o,m),n.elementType=K,n.lanes=y,n;case b:return mi(r.children,m,y,o);case R:S=8,m|=24;break;case D:return n=Mt(12,r,o,m|2),n.elementType=D,n.lanes=y,n;case X:return n=Mt(13,r,o,m),n.elementType=X,n.lanes=y,n;case P:return n=Mt(19,r,o,m),n.elementType=P,n.lanes=y,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case U:S=10;break e;case q:S=9;break e;case V:S=11;break e;case J:S=14;break e;case Y:S=16,u=null;break e}S=29,r=Error(s(130,n===null?"null":typeof n,"")),u=null}return o=Mt(S,r,o,m),o.elementType=n,o.type=u,o.lanes=y,o}function mi(n,o,r,u){return n=Mt(7,n,u,o),n.lanes=r,n}function Ml(n,o,r){return n=Mt(6,n,null,o),n.lanes=r,n}function md(n){var o=Mt(18,null,null,0);return o.stateNode=n,o}function Dl(n,o,r){return o=Mt(4,n.children!==null?n.children:[],n.key,o),o.lanes=r,o.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},o}var gd=new WeakMap;function Bt(n,o){if(typeof n=="object"&&n!==null){var r=gd.get(n);return r!==void 0?r:(o={value:n,source:o,stack:mf(o)},gd.set(n,o),o)}return{value:n,source:o,stack:mf(o)}}var Xi=[],Qi=0,vr=null,ts=0,Vt=[],zt=0,Ln=null,rn=1,an="";function pn(n,o){Xi[Qi++]=ts,Xi[Qi++]=vr,vr=n,ts=o}function yd(n,o,r){Vt[zt++]=rn,Vt[zt++]=an,Vt[zt++]=Ln,Ln=n;var u=rn;n=an;var m=32-Nt(u)-1;u&=~(1<<m),r+=1;var y=32-Nt(o)+m;if(30<y){var S=m-m%5;y=(u&(1<<S)-1).toString(32),u>>=S,m-=S,rn=1<<32-Nt(o)+m|r<<m|u,an=y+n}else rn=1<<y|r<<m|u,an=n}function Ul(n){n.return!==null&&(pn(n,1),yd(n,1,0))}function xl(n){for(;n===vr;)vr=Xi[--Qi],Xi[Qi]=null,ts=Xi[--Qi],Xi[Qi]=null;for(;n===Ln;)Ln=Vt[--zt],Vt[zt]=null,an=Vt[--zt],Vt[zt]=null,rn=Vt[--zt],Vt[zt]=null}function vd(n,o){Vt[zt++]=rn,Vt[zt++]=an,Vt[zt++]=Ln,rn=o.id,an=o.overflow,Ln=n}var rt=null,Ge=null,Se=!1,Pn=null,Ft=!1,kl=Error(s(519));function qn(n){var o=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ns(Bt(o,n)),kl}function _d(n){var o=n.stateNode,r=n.type,u=n.memoizedProps;switch(o[st]=n,o[_t]=u,r){case"dialog":ye("cancel",o),ye("close",o);break;case"iframe":case"object":case"embed":ye("load",o);break;case"video":case"audio":for(r=0;r<ws.length;r++)ye(ws[r],o);break;case"source":ye("error",o);break;case"img":case"image":case"link":ye("error",o),ye("load",o);break;case"details":ye("toggle",o);break;case"input":ye("invalid",o),Uf(o,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":ye("invalid",o);break;case"textarea":ye("invalid",o),kf(o,u.value,u.defaultValue,u.children)}r=u.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||o.textContent===""+r||u.suppressHydrationWarning===!0||Lp(o.textContent,r)?(u.popover!=null&&(ye("beforetoggle",o),ye("toggle",o)),u.onScroll!=null&&ye("scroll",o),u.onScrollEnd!=null&&ye("scrollend",o),u.onClick!=null&&(o.onclick=fn),o=!0):o=!1,o||qn(n,!0)}function Td(n){for(rt=n.return;rt;)switch(rt.tag){case 5:case 31:case 13:Ft=!1;return;case 27:case 3:Ft=!0;return;default:rt=rt.return}}function Wi(n){if(n!==rt)return!1;if(!Se)return Td(n),Se=!0,!1;var o=n.tag,r;if((r=o!==3&&o!==27)&&((r=o===5)&&(r=n.type,r=!(r!=="form"&&r!=="button")||Zu(n.type,n.memoizedProps)),r=!r),r&&Ge&&qn(n),Td(n),o===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));Ge=$p(n)}else if(o===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));Ge=$p(n)}else o===27?(o=Ge,Zn(n.type)?(n=ic,ic=null,Ge=n):Ge=o):Ge=rt?Jt(n.stateNode.nextSibling):null;return!0}function gi(){Ge=rt=null,Se=!1}function Ol(){var n=Pn;return n!==null&&(wt===null?wt=n:wt.push.apply(wt,n),Pn=null),n}function ns(n){Pn===null?Pn=[n]:Pn.push(n)}var Ll=I(null),yi=null,mn=null;function Gn(n,o,r){Z(Ll,o._currentValue),o._currentValue=r}function gn(n){n._currentValue=Ll.current,$(Ll)}function Pl(n,o,r){for(;n!==null;){var u=n.alternate;if((n.childLanes&o)!==o?(n.childLanes|=o,u!==null&&(u.childLanes|=o)):u!==null&&(u.childLanes&o)!==o&&(u.childLanes|=o),n===r)break;n=n.return}}function ql(n,o,r,u){var m=n.child;for(m!==null&&(m.return=n);m!==null;){var y=m.dependencies;if(y!==null){var S=m.child;y=y.firstContext;e:for(;y!==null;){var A=y;y=m;for(var C=0;C<o.length;C++)if(A.context===o[C]){y.lanes|=r,A=y.alternate,A!==null&&(A.lanes|=r),Pl(y.return,r,n),u||(S=null);break e}y=A.next}}else if(m.tag===18){if(S=m.return,S===null)throw Error(s(341));S.lanes|=r,y=S.alternate,y!==null&&(y.lanes|=r),Pl(S,r,n),S=null}else S=m.child;if(S!==null)S.return=m;else for(S=m;S!==null;){if(S===n){S=null;break}if(m=S.sibling,m!==null){m.return=S.return,S=m;break}S=S.return}m=S}}function Zi(n,o,r,u){n=null;for(var m=o,y=!1;m!==null;){if(!y){if((m.flags&524288)!==0)y=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var S=m.alternate;if(S===null)throw Error(s(387));if(S=S.memoizedProps,S!==null){var A=m.type;It(m.pendingProps.value,S.value)||(n!==null?n.push(A):n=[A])}}else if(m===Ie.current){if(S=m.alternate,S===null)throw Error(s(387));S.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(n!==null?n.push(Is):n=[Is])}m=m.return}n!==null&&ql(o,n,r,u),o.flags|=262144}function _r(n){for(n=n.firstContext;n!==null;){if(!It(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function vi(n){yi=n,mn=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function at(n){return Sd(yi,n)}function Tr(n,o){return yi===null&&vi(n),Sd(n,o)}function Sd(n,o){var r=o._currentValue;if(o={context:o,memoizedValue:r,next:null},mn===null){if(n===null)throw Error(s(308));mn=o,n.dependencies={lanes:0,firstContext:o},n.flags|=524288}else mn=mn.next=o;return r}var J0=typeof AbortController<"u"?AbortController:function(){var n=[],o=this.signal={aborted:!1,addEventListener:function(r,u){n.push(u)}};this.abort=function(){o.aborted=!0,n.forEach(function(r){return r()})}},Y0=t.unstable_scheduleCallback,K0=t.unstable_NormalPriority,Ke={$$typeof:U,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Gl(){return{controller:new J0,data:new Map,refCount:0}}function is(n){n.refCount--,n.refCount===0&&Y0(K0,function(){n.controller.abort()})}var os=null,Hl=0,ji=0,eo=null;function X0(n,o){if(os===null){var r=os=[];Hl=0,ji=zu(),eo={status:"pending",value:void 0,then:function(u){r.push(u)}}}return Hl++,o.then(Ed,Ed),o}function Ed(){if(--Hl===0&&os!==null){eo!==null&&(eo.status="fulfilled");var n=os;os=null,ji=0,eo=null;for(var o=0;o<n.length;o++)(0,n[o])()}}function Q0(n,o){var r=[],u={status:"pending",value:null,reason:null,then:function(m){r.push(m)}};return n.then(function(){u.status="fulfilled",u.value=o;for(var m=0;m<r.length;m++)(0,r[m])(o)},function(m){for(u.status="rejected",u.reason=m,m=0;m<r.length;m++)(0,r[m])(void 0)}),u}var Ad=H.S;H.S=function(n,o){rp=bt(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&X0(n,o),Ad!==null&&Ad(n,o)};var _i=I(null);function Bl(){var n=_i.current;return n!==null?n:Pe.pooledCache}function Sr(n,o){o===null?Z(_i,_i.current):Z(_i,o.pool)}function wd(){var n=Bl();return n===null?null:{parent:Ke._currentValue,pool:n}}var to=Error(s(460)),Vl=Error(s(474)),Er=Error(s(542)),Ar={then:function(){}};function Cd(n){return n=n.status,n==="fulfilled"||n==="rejected"}function bd(n,o,r){switch(r=n[r],r===void 0?n.push(o):r!==o&&(o.then(fn,fn),o=r),o.status){case"fulfilled":return o.value;case"rejected":throw n=o.reason,Nd(n),n;default:if(typeof o.status=="string")o.then(fn,fn);else{if(n=Pe,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=o,n.status="pending",n.then(function(u){if(o.status==="pending"){var m=o;m.status="fulfilled",m.value=u}},function(u){if(o.status==="pending"){var m=o;m.status="rejected",m.reason=u}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw n=o.reason,Nd(n),n}throw Si=o,to}}function Ti(n){try{var o=n._init;return o(n._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(Si=r,to):r}}var Si=null;function Rd(){if(Si===null)throw Error(s(459));var n=Si;return Si=null,n}function Nd(n){if(n===to||n===Er)throw Error(s(483))}var no=null,ss=0;function wr(n){var o=ss;return ss+=1,no===null&&(no=[]),bd(no,n,o)}function rs(n,o){o=o.props.ref,n.ref=o!==void 0?o:null}function Cr(n,o){throw o.$$typeof===_?Error(s(525)):(n=Object.prototype.toString.call(o),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":n)))}function Id(n){function o(M,N){if(n){var x=M.deletions;x===null?(M.deletions=[N],M.flags|=16):x.push(N)}}function r(M,N){if(!n)return null;for(;N!==null;)o(M,N),N=N.sibling;return null}function u(M){for(var N=new Map;M!==null;)M.key!==null?N.set(M.key,M):N.set(M.index,M),M=M.sibling;return N}function m(M,N){return M=hn(M,N),M.index=0,M.sibling=null,M}function y(M,N,x){return M.index=x,n?(x=M.alternate,x!==null?(x=x.index,x<N?(M.flags|=67108866,N):x):(M.flags|=67108866,N)):(M.flags|=1048576,N)}function S(M){return n&&M.alternate===null&&(M.flags|=67108866),M}function A(M,N,x,z){return N===null||N.tag!==6?(N=Ml(x,M.mode,z),N.return=M,N):(N=m(N,x),N.return=M,N)}function C(M,N,x,z){var se=x.type;return se===b?G(M,N,x.props.children,z,x.key):N!==null&&(N.elementType===se||typeof se=="object"&&se!==null&&se.$$typeof===Y&&Ti(se)===N.type)?(N=m(N,x.props),rs(N,x),N.return=M,N):(N=yr(x.type,x.key,x.props,null,M.mode,z),rs(N,x),N.return=M,N)}function k(M,N,x,z){return N===null||N.tag!==4||N.stateNode.containerInfo!==x.containerInfo||N.stateNode.implementation!==x.implementation?(N=Dl(x,M.mode,z),N.return=M,N):(N=m(N,x.children||[]),N.return=M,N)}function G(M,N,x,z,se){return N===null||N.tag!==7?(N=mi(x,M.mode,z,se),N.return=M,N):(N=m(N,x),N.return=M,N)}function F(M,N,x){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return N=Ml(""+N,M.mode,x),N.return=M,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case E:return x=yr(N.type,N.key,N.props,null,M.mode,x),rs(x,N),x.return=M,x;case w:return N=Dl(N,M.mode,x),N.return=M,N;case Y:return N=Ti(N),F(M,N,x)}if(tt(N)||Te(N))return N=mi(N,M.mode,x,null),N.return=M,N;if(typeof N.then=="function")return F(M,wr(N),x);if(N.$$typeof===U)return F(M,Tr(M,N),x);Cr(M,N)}return null}function O(M,N,x,z){var se=N!==null?N.key:null;if(typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint")return se!==null?null:A(M,N,""+x,z);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case E:return x.key===se?C(M,N,x,z):null;case w:return x.key===se?k(M,N,x,z):null;case Y:return x=Ti(x),O(M,N,x,z)}if(tt(x)||Te(x))return se!==null?null:G(M,N,x,z,null);if(typeof x.then=="function")return O(M,N,wr(x),z);if(x.$$typeof===U)return O(M,N,Tr(M,x),z);Cr(M,x)}return null}function L(M,N,x,z,se){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return M=M.get(x)||null,A(N,M,""+z,se);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case E:return M=M.get(z.key===null?x:z.key)||null,C(N,M,z,se);case w:return M=M.get(z.key===null?x:z.key)||null,k(N,M,z,se);case Y:return z=Ti(z),L(M,N,x,z,se)}if(tt(z)||Te(z))return M=M.get(x)||null,G(N,M,z,se,null);if(typeof z.then=="function")return L(M,N,x,wr(z),se);if(z.$$typeof===U)return L(M,N,x,Tr(N,z),se);Cr(N,z)}return null}function j(M,N,x,z){for(var se=null,we=null,te=N,he=N=0,_e=null;te!==null&&he<x.length;he++){te.index>he?(_e=te,te=null):_e=te.sibling;var Ce=O(M,te,x[he],z);if(Ce===null){te===null&&(te=_e);break}n&&te&&Ce.alternate===null&&o(M,te),N=y(Ce,N,he),we===null?se=Ce:we.sibling=Ce,we=Ce,te=_e}if(he===x.length)return r(M,te),Se&&pn(M,he),se;if(te===null){for(;he<x.length;he++)te=F(M,x[he],z),te!==null&&(N=y(te,N,he),we===null?se=te:we.sibling=te,we=te);return Se&&pn(M,he),se}for(te=u(te);he<x.length;he++)_e=L(te,M,he,x[he],z),_e!==null&&(n&&_e.alternate!==null&&te.delete(_e.key===null?he:_e.key),N=y(_e,N,he),we===null?se=_e:we.sibling=_e,we=_e);return n&&te.forEach(function(ii){return o(M,ii)}),Se&&pn(M,he),se}function re(M,N,x,z){if(x==null)throw Error(s(151));for(var se=null,we=null,te=N,he=N=0,_e=null,Ce=x.next();te!==null&&!Ce.done;he++,Ce=x.next()){te.index>he?(_e=te,te=null):_e=te.sibling;var ii=O(M,te,Ce.value,z);if(ii===null){te===null&&(te=_e);break}n&&te&&ii.alternate===null&&o(M,te),N=y(ii,N,he),we===null?se=ii:we.sibling=ii,we=ii,te=_e}if(Ce.done)return r(M,te),Se&&pn(M,he),se;if(te===null){for(;!Ce.done;he++,Ce=x.next())Ce=F(M,Ce.value,z),Ce!==null&&(N=y(Ce,N,he),we===null?se=Ce:we.sibling=Ce,we=Ce);return Se&&pn(M,he),se}for(te=u(te);!Ce.done;he++,Ce=x.next())Ce=L(te,M,he,Ce.value,z),Ce!==null&&(n&&Ce.alternate!==null&&te.delete(Ce.key===null?he:Ce.key),N=y(Ce,N,he),we===null?se=Ce:we.sibling=Ce,we=Ce);return n&&te.forEach(function(aT){return o(M,aT)}),Se&&pn(M,he),se}function ke(M,N,x,z){if(typeof x=="object"&&x!==null&&x.type===b&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case E:e:{for(var se=x.key;N!==null;){if(N.key===se){if(se=x.type,se===b){if(N.tag===7){r(M,N.sibling),z=m(N,x.props.children),z.return=M,M=z;break e}}else if(N.elementType===se||typeof se=="object"&&se!==null&&se.$$typeof===Y&&Ti(se)===N.type){r(M,N.sibling),z=m(N,x.props),rs(z,x),z.return=M,M=z;break e}r(M,N);break}else o(M,N);N=N.sibling}x.type===b?(z=mi(x.props.children,M.mode,z,x.key),z.return=M,M=z):(z=yr(x.type,x.key,x.props,null,M.mode,z),rs(z,x),z.return=M,M=z)}return S(M);case w:e:{for(se=x.key;N!==null;){if(N.key===se)if(N.tag===4&&N.stateNode.containerInfo===x.containerInfo&&N.stateNode.implementation===x.implementation){r(M,N.sibling),z=m(N,x.children||[]),z.return=M,M=z;break e}else{r(M,N);break}else o(M,N);N=N.sibling}z=Dl(x,M.mode,z),z.return=M,M=z}return S(M);case Y:return x=Ti(x),ke(M,N,x,z)}if(tt(x))return j(M,N,x,z);if(Te(x)){if(se=Te(x),typeof se!="function")throw Error(s(150));return x=se.call(x),re(M,N,x,z)}if(typeof x.then=="function")return ke(M,N,wr(x),z);if(x.$$typeof===U)return ke(M,N,Tr(M,x),z);Cr(M,x)}return typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint"?(x=""+x,N!==null&&N.tag===6?(r(M,N.sibling),z=m(N,x),z.return=M,M=z):(r(M,N),z=Ml(x,M.mode,z),z.return=M,M=z),S(M)):r(M,N)}return function(M,N,x,z){try{ss=0;var se=ke(M,N,x,z);return no=null,se}catch(te){if(te===to||te===Er)throw te;var we=Mt(29,te,null,M.mode);return we.lanes=z,we.return=M,we}}}var Ei=Id(!0),Md=Id(!1),Hn=!1;function zl(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Fl(n,o){n=n.updateQueue,o.updateQueue===n&&(o.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Bn(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Vn(n,o,r){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(Re&2)!==0){var m=u.pending;return m===null?o.next=o:(o.next=m.next,m.next=o),u.pending=o,o=gr(n),hd(n,null,r),o}return mr(n,u,o,r),gr(n)}function as(n,o,r){if(o=o.updateQueue,o!==null&&(o=o.shared,(r&4194048)!==0)){var u=o.lanes;u&=n.pendingLanes,r|=u,o.lanes=r,Sf(n,r)}}function $l(n,o){var r=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,r===u)){var m=null,y=null;if(r=r.firstBaseUpdate,r!==null){do{var S={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};y===null?m=y=S:y=y.next=S,r=r.next}while(r!==null);y===null?m=y=o:y=y.next=o}else m=y=o;r={baseState:u.baseState,firstBaseUpdate:m,lastBaseUpdate:y,shared:u.shared,callbacks:u.callbacks},n.updateQueue=r;return}n=r.lastBaseUpdate,n===null?r.firstBaseUpdate=o:n.next=o,r.lastBaseUpdate=o}var Jl=!1;function ls(){if(Jl){var n=eo;if(n!==null)throw n}}function us(n,o,r,u){Jl=!1;var m=n.updateQueue;Hn=!1;var y=m.firstBaseUpdate,S=m.lastBaseUpdate,A=m.shared.pending;if(A!==null){m.shared.pending=null;var C=A,k=C.next;C.next=null,S===null?y=k:S.next=k,S=C;var G=n.alternate;G!==null&&(G=G.updateQueue,A=G.lastBaseUpdate,A!==S&&(A===null?G.firstBaseUpdate=k:A.next=k,G.lastBaseUpdate=C))}if(y!==null){var F=m.baseState;S=0,G=k=C=null,A=y;do{var O=A.lane&-536870913,L=O!==A.lane;if(L?(ve&O)===O:(u&O)===O){O!==0&&O===ji&&(Jl=!0),G!==null&&(G=G.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var j=n,re=A;O=o;var ke=r;switch(re.tag){case 1:if(j=re.payload,typeof j=="function"){F=j.call(ke,F,O);break e}F=j;break e;case 3:j.flags=j.flags&-65537|128;case 0:if(j=re.payload,O=typeof j=="function"?j.call(ke,F,O):j,O==null)break e;F=T({},F,O);break e;case 2:Hn=!0}}O=A.callback,O!==null&&(n.flags|=64,L&&(n.flags|=8192),L=m.callbacks,L===null?m.callbacks=[O]:L.push(O))}else L={lane:O,tag:A.tag,payload:A.payload,callback:A.callback,next:null},G===null?(k=G=L,C=F):G=G.next=L,S|=O;if(A=A.next,A===null){if(A=m.shared.pending,A===null)break;L=A,A=L.next,L.next=null,m.lastBaseUpdate=L,m.shared.pending=null}}while(!0);G===null&&(C=F),m.baseState=C,m.firstBaseUpdate=k,m.lastBaseUpdate=G,y===null&&(m.shared.lanes=0),Yn|=S,n.lanes=S,n.memoizedState=F}}function Dd(n,o){if(typeof n!="function")throw Error(s(191,n));n.call(o)}function Ud(n,o){var r=n.callbacks;if(r!==null)for(n.callbacks=null,n=0;n<r.length;n++)Dd(r[n],o)}var io=I(null),br=I(0);function xd(n,o){n=Cn,Z(br,n),Z(io,o),Cn=n|o.baseLanes}function Yl(){Z(br,Cn),Z(io,io.current)}function Kl(){Cn=br.current,$(io),$(br)}var Dt=I(null),$t=null;function zn(n){var o=n.alternate;Z(Je,Je.current&1),Z(Dt,n),$t===null&&(o===null||io.current!==null||o.memoizedState!==null)&&($t=n)}function Xl(n){Z(Je,Je.current),Z(Dt,n),$t===null&&($t=n)}function kd(n){n.tag===22?(Z(Je,Je.current),Z(Dt,n),$t===null&&($t=n)):Fn()}function Fn(){Z(Je,Je.current),Z(Dt,Dt.current)}function Ut(n){$(Dt),$t===n&&($t=null),$(Je)}var Je=I(0);function Rr(n){for(var o=n;o!==null;){if(o.tag===13){var r=o.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||tc(r)||nc(r)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===n)break;for(;o.sibling===null;){if(o.return===null||o.return===n)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var yn=0,de=null,Ue=null,Xe=null,Nr=!1,oo=!1,Ai=!1,Ir=0,cs=0,so=null,W0=0;function Ve(){throw Error(s(321))}function Ql(n,o){if(o===null)return!1;for(var r=0;r<o.length&&r<n.length;r++)if(!It(n[r],o[r]))return!1;return!0}function Wl(n,o,r,u,m,y){return yn=y,de=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,H.H=n===null||n.memoizedState===null?yh:du,Ai=!1,y=r(u,m),Ai=!1,oo&&(y=Ld(o,r,u,m)),Od(n),y}function Od(n){H.H=hs;var o=Ue!==null&&Ue.next!==null;if(yn=0,Xe=Ue=de=null,Nr=!1,cs=0,so=null,o)throw Error(s(300));n===null||Qe||(n=n.dependencies,n!==null&&_r(n)&&(Qe=!0))}function Ld(n,o,r,u){de=n;var m=0;do{if(oo&&(so=null),cs=0,oo=!1,25<=m)throw Error(s(301));if(m+=1,Xe=Ue=null,n.updateQueue!=null){var y=n.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}H.H=vh,y=o(r,u)}while(oo);return y}function Z0(){var n=H.H,o=n.useState()[0];return o=typeof o.then=="function"?fs(o):o,n=n.useState()[0],(Ue!==null?Ue.memoizedState:null)!==n&&(de.flags|=1024),o}function Zl(){var n=Ir!==0;return Ir=0,n}function jl(n,o,r){o.updateQueue=n.updateQueue,o.flags&=-2053,n.lanes&=~r}function eu(n){if(Nr){for(n=n.memoizedState;n!==null;){var o=n.queue;o!==null&&(o.pending=null),n=n.next}Nr=!1}yn=0,Xe=Ue=de=null,oo=!1,cs=Ir=0,so=null}function mt(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xe===null?de.memoizedState=Xe=n:Xe=Xe.next=n,Xe}function Ye(){if(Ue===null){var n=de.alternate;n=n!==null?n.memoizedState:null}else n=Ue.next;var o=Xe===null?de.memoizedState:Xe.next;if(o!==null)Xe=o,Ue=n;else{if(n===null)throw de.alternate===null?Error(s(467)):Error(s(310));Ue=n,n={memoizedState:Ue.memoizedState,baseState:Ue.baseState,baseQueue:Ue.baseQueue,queue:Ue.queue,next:null},Xe===null?de.memoizedState=Xe=n:Xe=Xe.next=n}return Xe}function Mr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function fs(n){var o=cs;return cs+=1,so===null&&(so=[]),n=bd(so,n,o),o=de,(Xe===null?o.memoizedState:Xe.next)===null&&(o=o.alternate,H.H=o===null||o.memoizedState===null?yh:du),n}function Dr(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return fs(n);if(n.$$typeof===U)return at(n)}throw Error(s(438,String(n)))}function tu(n){var o=null,r=de.updateQueue;if(r!==null&&(o=r.memoCache),o==null){var u=de.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(o={data:u.data.map(function(m){return m.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),r===null&&(r=Mr(),de.updateQueue=r),r.memoCache=o,r=o.data[o.index],r===void 0)for(r=o.data[o.index]=Array(n),u=0;u<n;u++)r[u]=oe;return o.index++,r}function vn(n,o){return typeof o=="function"?o(n):o}function Ur(n){var o=Ye();return nu(o,Ue,n)}function nu(n,o,r){var u=n.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=r;var m=n.baseQueue,y=u.pending;if(y!==null){if(m!==null){var S=m.next;m.next=y.next,y.next=S}o.baseQueue=m=y,u.pending=null}if(y=n.baseState,m===null)n.memoizedState=y;else{o=m.next;var A=S=null,C=null,k=o,G=!1;do{var F=k.lane&-536870913;if(F!==k.lane?(ve&F)===F:(yn&F)===F){var O=k.revertLane;if(O===0)C!==null&&(C=C.next={lane:0,revertLane:0,gesture:null,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null}),F===ji&&(G=!0);else if((yn&O)===O){k=k.next,O===ji&&(G=!0);continue}else F={lane:0,revertLane:k.revertLane,gesture:null,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null},C===null?(A=C=F,S=y):C=C.next=F,de.lanes|=O,Yn|=O;F=k.action,Ai&&r(y,F),y=k.hasEagerState?k.eagerState:r(y,F)}else O={lane:F,revertLane:k.revertLane,gesture:k.gesture,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null},C===null?(A=C=O,S=y):C=C.next=O,de.lanes|=F,Yn|=F;k=k.next}while(k!==null&&k!==o);if(C===null?S=y:C.next=A,!It(y,n.memoizedState)&&(Qe=!0,G&&(r=eo,r!==null)))throw r;n.memoizedState=y,n.baseState=S,n.baseQueue=C,u.lastRenderedState=y}return m===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function iu(n){var o=Ye(),r=o.queue;if(r===null)throw Error(s(311));r.lastRenderedReducer=n;var u=r.dispatch,m=r.pending,y=o.memoizedState;if(m!==null){r.pending=null;var S=m=m.next;do y=n(y,S.action),S=S.next;while(S!==m);It(y,o.memoizedState)||(Qe=!0),o.memoizedState=y,o.baseQueue===null&&(o.baseState=y),r.lastRenderedState=y}return[y,u]}function Pd(n,o,r){var u=de,m=Ye(),y=Se;if(y){if(r===void 0)throw Error(s(407));r=r()}else r=o();var S=!It((Ue||m).memoizedState,r);if(S&&(m.memoizedState=r,Qe=!0),m=m.queue,ru(Hd.bind(null,u,m,n),[n]),m.getSnapshot!==o||S||Xe!==null&&Xe.memoizedState.tag&1){if(u.flags|=2048,ro(9,{destroy:void 0},Gd.bind(null,u,m,r,o),null),Pe===null)throw Error(s(349));y||(yn&127)!==0||qd(u,o,r)}return r}function qd(n,o,r){n.flags|=16384,n={getSnapshot:o,value:r},o=de.updateQueue,o===null?(o=Mr(),de.updateQueue=o,o.stores=[n]):(r=o.stores,r===null?o.stores=[n]:r.push(n))}function Gd(n,o,r,u){o.value=r,o.getSnapshot=u,Bd(o)&&Vd(n)}function Hd(n,o,r){return r(function(){Bd(o)&&Vd(n)})}function Bd(n){var o=n.getSnapshot;n=n.value;try{var r=o();return!It(n,r)}catch{return!0}}function Vd(n){var o=pi(n,2);o!==null&&Ct(o,n,2)}function ou(n){var o=mt();if(typeof n=="function"){var r=n;if(n=r(),Ai){xn(!0);try{r()}finally{xn(!1)}}}return o.memoizedState=o.baseState=n,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vn,lastRenderedState:n},o}function zd(n,o,r,u){return n.baseState=r,nu(n,Ue,typeof u=="function"?u:vn)}function j0(n,o,r,u,m){if(Or(n))throw Error(s(485));if(n=o.action,n!==null){var y={payload:m,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){y.listeners.push(S)}};H.T!==null?r(!0):y.isTransition=!1,u(y),r=o.pending,r===null?(y.next=o.pending=y,Fd(o,y)):(y.next=r.next,o.pending=r.next=y)}}function Fd(n,o){var r=o.action,u=o.payload,m=n.state;if(o.isTransition){var y=H.T,S={};H.T=S;try{var A=r(m,u),C=H.S;C!==null&&C(S,A),$d(n,o,A)}catch(k){su(n,o,k)}finally{y!==null&&S.types!==null&&(y.types=S.types),H.T=y}}else try{y=r(m,u),$d(n,o,y)}catch(k){su(n,o,k)}}function $d(n,o,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(u){Jd(n,o,u)},function(u){return su(n,o,u)}):Jd(n,o,r)}function Jd(n,o,r){o.status="fulfilled",o.value=r,Yd(o),n.state=r,o=n.pending,o!==null&&(r=o.next,r===o?n.pending=null:(r=r.next,o.next=r,Fd(n,r)))}function su(n,o,r){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do o.status="rejected",o.reason=r,Yd(o),o=o.next;while(o!==u)}n.action=null}function Yd(n){n=n.listeners;for(var o=0;o<n.length;o++)(0,n[o])()}function Kd(n,o){return o}function Xd(n,o){if(Se){var r=Pe.formState;if(r!==null){e:{var u=de;if(Se){if(Ge){t:{for(var m=Ge,y=Ft;m.nodeType!==8;){if(!y){m=null;break t}if(m=Jt(m.nextSibling),m===null){m=null;break t}}y=m.data,m=y==="F!"||y==="F"?m:null}if(m){Ge=Jt(m.nextSibling),u=m.data==="F!";break e}}qn(u)}u=!1}u&&(o=r[0])}}return r=mt(),r.memoizedState=r.baseState=o,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kd,lastRenderedState:o},r.queue=u,r=ph.bind(null,de,u),u.dispatch=r,u=ou(!1),y=fu.bind(null,de,!1,u.queue),u=mt(),m={state:o,dispatch:null,action:n,pending:null},u.queue=m,r=j0.bind(null,de,m,y,r),m.dispatch=r,u.memoizedState=n,[o,r,!1]}function Qd(n){var o=Ye();return Wd(o,Ue,n)}function Wd(n,o,r){if(o=nu(n,o,Kd)[0],n=Ur(vn)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var u=fs(o)}catch(S){throw S===to?Er:S}else u=o;o=Ye();var m=o.queue,y=m.dispatch;return r!==o.memoizedState&&(de.flags|=2048,ro(9,{destroy:void 0},e_.bind(null,m,r),null)),[u,y,n]}function e_(n,o){n.action=o}function Zd(n){var o=Ye(),r=Ue;if(r!==null)return Wd(o,r,n);Ye(),o=o.memoizedState,r=Ye();var u=r.queue.dispatch;return r.memoizedState=n,[o,u,!1]}function ro(n,o,r,u){return n={tag:n,create:r,deps:u,inst:o,next:null},o=de.updateQueue,o===null&&(o=Mr(),de.updateQueue=o),r=o.lastEffect,r===null?o.lastEffect=n.next=n:(u=r.next,r.next=n,n.next=u,o.lastEffect=n),n}function jd(){return Ye().memoizedState}function xr(n,o,r,u){var m=mt();de.flags|=n,m.memoizedState=ro(1|o,{destroy:void 0},r,u===void 0?null:u)}function kr(n,o,r,u){var m=Ye();u=u===void 0?null:u;var y=m.memoizedState.inst;Ue!==null&&u!==null&&Ql(u,Ue.memoizedState.deps)?m.memoizedState=ro(o,y,r,u):(de.flags|=n,m.memoizedState=ro(1|o,y,r,u))}function eh(n,o){xr(8390656,8,n,o)}function ru(n,o){kr(2048,8,n,o)}function t_(n){de.flags|=4;var o=de.updateQueue;if(o===null)o=Mr(),de.updateQueue=o,o.events=[n];else{var r=o.events;r===null?o.events=[n]:r.push(n)}}function th(n){var o=Ye().memoizedState;return t_({ref:o,nextImpl:n}),function(){if((Re&2)!==0)throw Error(s(440));return o.impl.apply(void 0,arguments)}}function nh(n,o){return kr(4,2,n,o)}function ih(n,o){return kr(4,4,n,o)}function oh(n,o){if(typeof o=="function"){n=n();var r=o(n);return function(){typeof r=="function"?r():o(null)}}if(o!=null)return n=n(),o.current=n,function(){o.current=null}}function sh(n,o,r){r=r!=null?r.concat([n]):null,kr(4,4,oh.bind(null,o,n),r)}function au(){}function rh(n,o){var r=Ye();o=o===void 0?null:o;var u=r.memoizedState;return o!==null&&Ql(o,u[1])?u[0]:(r.memoizedState=[n,o],n)}function ah(n,o){var r=Ye();o=o===void 0?null:o;var u=r.memoizedState;if(o!==null&&Ql(o,u[1]))return u[0];if(u=n(),Ai){xn(!0);try{n()}finally{xn(!1)}}return r.memoizedState=[u,o],u}function lu(n,o,r){return r===void 0||(yn&1073741824)!==0&&(ve&261930)===0?n.memoizedState=o:(n.memoizedState=r,n=lp(),de.lanes|=n,Yn|=n,r)}function lh(n,o,r,u){return It(r,o)?r:io.current!==null?(n=lu(n,r,u),It(n,o)||(Qe=!0),n):(yn&42)===0||(yn&1073741824)!==0&&(ve&261930)===0?(Qe=!0,n.memoizedState=r):(n=lp(),de.lanes|=n,Yn|=n,o)}function uh(n,o,r,u,m){var y=Q.p;Q.p=y!==0&&8>y?y:8;var S=H.T,A={};H.T=A,fu(n,!1,o,r);try{var C=m(),k=H.S;if(k!==null&&k(A,C),C!==null&&typeof C=="object"&&typeof C.then=="function"){var G=Q0(C,u);ds(n,o,G,Ot(n))}else ds(n,o,u,Ot(n))}catch(F){ds(n,o,{then:function(){},status:"rejected",reason:F},Ot())}finally{Q.p=y,S!==null&&A.types!==null&&(S.types=A.types),H.T=S}}function n_(){}function uu(n,o,r,u){if(n.tag!==5)throw Error(s(476));var m=ch(n).queue;uh(n,m,o,ie,r===null?n_:function(){return fh(n),r(u)})}function ch(n){var o=n.memoizedState;if(o!==null)return o;o={memoizedState:ie,baseState:ie,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vn,lastRenderedState:ie},next:null};var r={};return o.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vn,lastRenderedState:r},next:null},n.memoizedState=o,n=n.alternate,n!==null&&(n.memoizedState=o),o}function fh(n){var o=ch(n);o.next===null&&(o=n.alternate.memoizedState),ds(n,o.next.queue,{},Ot())}function cu(){return at(Is)}function dh(){return Ye().memoizedState}function hh(){return Ye().memoizedState}function i_(n){for(var o=n.return;o!==null;){switch(o.tag){case 24:case 3:var r=Ot();n=Bn(r);var u=Vn(o,n,r);u!==null&&(Ct(u,o,r),as(u,o,r)),o={cache:Gl()},n.payload=o;return}o=o.return}}function o_(n,o,r){var u=Ot();r={lane:u,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},Or(n)?mh(o,r):(r=Nl(n,o,r,u),r!==null&&(Ct(r,n,u),gh(r,o,u)))}function ph(n,o,r){var u=Ot();ds(n,o,r,u)}function ds(n,o,r,u){var m={lane:u,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(Or(n))mh(o,m);else{var y=n.alternate;if(n.lanes===0&&(y===null||y.lanes===0)&&(y=o.lastRenderedReducer,y!==null))try{var S=o.lastRenderedState,A=y(S,r);if(m.hasEagerState=!0,m.eagerState=A,It(A,S))return mr(n,o,m,0),Pe===null&&pr(),!1}catch{}if(r=Nl(n,o,m,u),r!==null)return Ct(r,n,u),gh(r,o,u),!0}return!1}function fu(n,o,r,u){if(u={lane:2,revertLane:zu(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Or(n)){if(o)throw Error(s(479))}else o=Nl(n,r,u,2),o!==null&&Ct(o,n,2)}function Or(n){var o=n.alternate;return n===de||o!==null&&o===de}function mh(n,o){oo=Nr=!0;var r=n.pending;r===null?o.next=o:(o.next=r.next,r.next=o),n.pending=o}function gh(n,o,r){if((r&4194048)!==0){var u=o.lanes;u&=n.pendingLanes,r|=u,o.lanes=r,Sf(n,r)}}var hs={readContext:at,use:Dr,useCallback:Ve,useContext:Ve,useEffect:Ve,useImperativeHandle:Ve,useLayoutEffect:Ve,useInsertionEffect:Ve,useMemo:Ve,useReducer:Ve,useRef:Ve,useState:Ve,useDebugValue:Ve,useDeferredValue:Ve,useTransition:Ve,useSyncExternalStore:Ve,useId:Ve,useHostTransitionStatus:Ve,useFormState:Ve,useActionState:Ve,useOptimistic:Ve,useMemoCache:Ve,useCacheRefresh:Ve};hs.useEffectEvent=Ve;var yh={readContext:at,use:Dr,useCallback:function(n,o){return mt().memoizedState=[n,o===void 0?null:o],n},useContext:at,useEffect:eh,useImperativeHandle:function(n,o,r){r=r!=null?r.concat([n]):null,xr(4194308,4,oh.bind(null,o,n),r)},useLayoutEffect:function(n,o){return xr(4194308,4,n,o)},useInsertionEffect:function(n,o){xr(4,2,n,o)},useMemo:function(n,o){var r=mt();o=o===void 0?null:o;var u=n();if(Ai){xn(!0);try{n()}finally{xn(!1)}}return r.memoizedState=[u,o],u},useReducer:function(n,o,r){var u=mt();if(r!==void 0){var m=r(o);if(Ai){xn(!0);try{r(o)}finally{xn(!1)}}}else m=o;return u.memoizedState=u.baseState=m,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:m},u.queue=n,n=n.dispatch=o_.bind(null,de,n),[u.memoizedState,n]},useRef:function(n){var o=mt();return n={current:n},o.memoizedState=n},useState:function(n){n=ou(n);var o=n.queue,r=ph.bind(null,de,o);return o.dispatch=r,[n.memoizedState,r]},useDebugValue:au,useDeferredValue:function(n,o){var r=mt();return lu(r,n,o)},useTransition:function(){var n=ou(!1);return n=uh.bind(null,de,n.queue,!0,!1),mt().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,o,r){var u=de,m=mt();if(Se){if(r===void 0)throw Error(s(407));r=r()}else{if(r=o(),Pe===null)throw Error(s(349));(ve&127)!==0||qd(u,o,r)}m.memoizedState=r;var y={value:r,getSnapshot:o};return m.queue=y,eh(Hd.bind(null,u,y,n),[n]),u.flags|=2048,ro(9,{destroy:void 0},Gd.bind(null,u,y,r,o),null),r},useId:function(){var n=mt(),o=Pe.identifierPrefix;if(Se){var r=an,u=rn;r=(u&~(1<<32-Nt(u)-1)).toString(32)+r,o="_"+o+"R_"+r,r=Ir++,0<r&&(o+="H"+r.toString(32)),o+="_"}else r=W0++,o="_"+o+"r_"+r.toString(32)+"_";return n.memoizedState=o},useHostTransitionStatus:cu,useFormState:Xd,useActionState:Xd,useOptimistic:function(n){var o=mt();o.memoizedState=o.baseState=n;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=r,o=fu.bind(null,de,!0,r),r.dispatch=o,[n,o]},useMemoCache:tu,useCacheRefresh:function(){return mt().memoizedState=i_.bind(null,de)},useEffectEvent:function(n){var o=mt(),r={impl:n};return o.memoizedState=r,function(){if((Re&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}},du={readContext:at,use:Dr,useCallback:rh,useContext:at,useEffect:ru,useImperativeHandle:sh,useInsertionEffect:nh,useLayoutEffect:ih,useMemo:ah,useReducer:Ur,useRef:jd,useState:function(){return Ur(vn)},useDebugValue:au,useDeferredValue:function(n,o){var r=Ye();return lh(r,Ue.memoizedState,n,o)},useTransition:function(){var n=Ur(vn)[0],o=Ye().memoizedState;return[typeof n=="boolean"?n:fs(n),o]},useSyncExternalStore:Pd,useId:dh,useHostTransitionStatus:cu,useFormState:Qd,useActionState:Qd,useOptimistic:function(n,o){var r=Ye();return zd(r,Ue,n,o)},useMemoCache:tu,useCacheRefresh:hh};du.useEffectEvent=th;var vh={readContext:at,use:Dr,useCallback:rh,useContext:at,useEffect:ru,useImperativeHandle:sh,useInsertionEffect:nh,useLayoutEffect:ih,useMemo:ah,useReducer:iu,useRef:jd,useState:function(){return iu(vn)},useDebugValue:au,useDeferredValue:function(n,o){var r=Ye();return Ue===null?lu(r,n,o):lh(r,Ue.memoizedState,n,o)},useTransition:function(){var n=iu(vn)[0],o=Ye().memoizedState;return[typeof n=="boolean"?n:fs(n),o]},useSyncExternalStore:Pd,useId:dh,useHostTransitionStatus:cu,useFormState:Zd,useActionState:Zd,useOptimistic:function(n,o){var r=Ye();return Ue!==null?zd(r,Ue,n,o):(r.baseState=n,[n,r.queue.dispatch])},useMemoCache:tu,useCacheRefresh:hh};vh.useEffectEvent=th;function hu(n,o,r,u){o=n.memoizedState,r=r(u,o),r=r==null?o:T({},o,r),n.memoizedState=r,n.lanes===0&&(n.updateQueue.baseState=r)}var pu={enqueueSetState:function(n,o,r){n=n._reactInternals;var u=Ot(),m=Bn(u);m.payload=o,r!=null&&(m.callback=r),o=Vn(n,m,u),o!==null&&(Ct(o,n,u),as(o,n,u))},enqueueReplaceState:function(n,o,r){n=n._reactInternals;var u=Ot(),m=Bn(u);m.tag=1,m.payload=o,r!=null&&(m.callback=r),o=Vn(n,m,u),o!==null&&(Ct(o,n,u),as(o,n,u))},enqueueForceUpdate:function(n,o){n=n._reactInternals;var r=Ot(),u=Bn(r);u.tag=2,o!=null&&(u.callback=o),o=Vn(n,u,r),o!==null&&(Ct(o,n,r),as(o,n,r))}};function _h(n,o,r,u,m,y,S){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,y,S):o.prototype&&o.prototype.isPureReactComponent?!jo(r,u)||!jo(m,y):!0}function Th(n,o,r,u){n=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(r,u),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(r,u),o.state!==n&&pu.enqueueReplaceState(o,o.state,null)}function wi(n,o){var r=o;if("ref"in o){r={};for(var u in o)u!=="ref"&&(r[u]=o[u])}if(n=n.defaultProps){r===o&&(r=T({},r));for(var m in n)r[m]===void 0&&(r[m]=n[m])}return r}function Sh(n){hr(n)}function Eh(n){console.error(n)}function Ah(n){hr(n)}function Lr(n,o){try{var r=n.onUncaughtError;r(o.value,{componentStack:o.stack})}catch(u){setTimeout(function(){throw u})}}function wh(n,o,r){try{var u=n.onCaughtError;u(r.value,{componentStack:r.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function mu(n,o,r){return r=Bn(r),r.tag=3,r.payload={element:null},r.callback=function(){Lr(n,o)},r}function Ch(n){return n=Bn(n),n.tag=3,n}function bh(n,o,r,u){var m=r.type.getDerivedStateFromError;if(typeof m=="function"){var y=u.value;n.payload=function(){return m(y)},n.callback=function(){wh(o,r,u)}}var S=r.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(n.callback=function(){wh(o,r,u),typeof m!="function"&&(Kn===null?Kn=new Set([this]):Kn.add(this));var A=u.stack;this.componentDidCatch(u.value,{componentStack:A!==null?A:""})})}function s_(n,o,r,u,m){if(r.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(o=r.alternate,o!==null&&Zi(o,r,m,!0),r=Dt.current,r!==null){switch(r.tag){case 31:case 13:return $t===null?Kr():r.alternate===null&&ze===0&&(ze=3),r.flags&=-257,r.flags|=65536,r.lanes=m,u===Ar?r.flags|=16384:(o=r.updateQueue,o===null?r.updateQueue=new Set([u]):o.add(u),Hu(n,u,m)),!1;case 22:return r.flags|=65536,u===Ar?r.flags|=16384:(o=r.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([u])},r.updateQueue=o):(r=o.retryQueue,r===null?o.retryQueue=new Set([u]):r.add(u)),Hu(n,u,m)),!1}throw Error(s(435,r.tag))}return Hu(n,u,m),Kr(),!1}if(Se)return o=Dt.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=m,u!==kl&&(n=Error(s(422),{cause:u}),ns(Bt(n,r)))):(u!==kl&&(o=Error(s(423),{cause:u}),ns(Bt(o,r))),n=n.current.alternate,n.flags|=65536,m&=-m,n.lanes|=m,u=Bt(u,r),m=mu(n.stateNode,u,m),$l(n,m),ze!==4&&(ze=2)),!1;var y=Error(s(520),{cause:u});if(y=Bt(y,r),Ss===null?Ss=[y]:Ss.push(y),ze!==4&&(ze=2),o===null)return!0;u=Bt(u,r),r=o;do{switch(r.tag){case 3:return r.flags|=65536,n=m&-m,r.lanes|=n,n=mu(r.stateNode,u,n),$l(r,n),!1;case 1:if(o=r.type,y=r.stateNode,(r.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Kn===null||!Kn.has(y))))return r.flags|=65536,m&=-m,r.lanes|=m,m=Ch(m),bh(m,n,r,u),$l(r,m),!1}r=r.return}while(r!==null);return!1}var gu=Error(s(461)),Qe=!1;function lt(n,o,r,u){o.child=n===null?Md(o,null,r,u):Ei(o,n.child,r,u)}function Rh(n,o,r,u,m){r=r.render;var y=o.ref;if("ref"in u){var S={};for(var A in u)A!=="ref"&&(S[A]=u[A])}else S=u;return vi(o),u=Wl(n,o,r,S,y,m),A=Zl(),n!==null&&!Qe?(jl(n,o,m),_n(n,o,m)):(Se&&A&&Ul(o),o.flags|=1,lt(n,o,u,m),o.child)}function Nh(n,o,r,u,m){if(n===null){var y=r.type;return typeof y=="function"&&!Il(y)&&y.defaultProps===void 0&&r.compare===null?(o.tag=15,o.type=y,Ih(n,o,y,u,m)):(n=yr(r.type,null,u,o,o.mode,m),n.ref=o.ref,n.return=o,o.child=n)}if(y=n.child,!wu(n,m)){var S=y.memoizedProps;if(r=r.compare,r=r!==null?r:jo,r(S,u)&&n.ref===o.ref)return _n(n,o,m)}return o.flags|=1,n=hn(y,u),n.ref=o.ref,n.return=o,o.child=n}function Ih(n,o,r,u,m){if(n!==null){var y=n.memoizedProps;if(jo(y,u)&&n.ref===o.ref)if(Qe=!1,o.pendingProps=u=y,wu(n,m))(n.flags&131072)!==0&&(Qe=!0);else return o.lanes=n.lanes,_n(n,o,m)}return yu(n,o,r,u,m)}function Mh(n,o,r,u){var m=u.children,y=n!==null?n.memoizedState:null;if(n===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((o.flags&128)!==0){if(y=y!==null?y.baseLanes|r:r,n!==null){for(u=o.child=n.child,m=0;u!==null;)m=m|u.lanes|u.childLanes,u=u.sibling;u=m&~y}else u=0,o.child=null;return Dh(n,o,y,r,u)}if((r&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},n!==null&&Sr(o,y!==null?y.cachePool:null),y!==null?xd(o,y):Yl(),kd(o);else return u=o.lanes=536870912,Dh(n,o,y!==null?y.baseLanes|r:r,r,u)}else y!==null?(Sr(o,y.cachePool),xd(o,y),Fn(),o.memoizedState=null):(n!==null&&Sr(o,null),Yl(),Fn());return lt(n,o,m,r),o.child}function ps(n,o){return n!==null&&n.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function Dh(n,o,r,u,m){var y=Bl();return y=y===null?null:{parent:Ke._currentValue,pool:y},o.memoizedState={baseLanes:r,cachePool:y},n!==null&&Sr(o,null),Yl(),kd(o),n!==null&&Zi(n,o,u,!0),o.childLanes=m,null}function Pr(n,o){return o=Gr({mode:o.mode,children:o.children},n.mode),o.ref=n.ref,n.child=o,o.return=n,o}function Uh(n,o,r){return Ei(o,n.child,null,r),n=Pr(o,o.pendingProps),n.flags|=2,Ut(o),o.memoizedState=null,n}function r_(n,o,r){var u=o.pendingProps,m=(o.flags&128)!==0;if(o.flags&=-129,n===null){if(Se){if(u.mode==="hidden")return n=Pr(o,u),o.lanes=536870912,ps(null,n);if(Xl(o),(n=Ge)?(n=Fp(n,Ft),n=n!==null&&n.data==="&"?n:null,n!==null&&(o.memoizedState={dehydrated:n,treeContext:Ln!==null?{id:rn,overflow:an}:null,retryLane:536870912,hydrationErrors:null},r=md(n),r.return=o,o.child=r,rt=o,Ge=null)):n=null,n===null)throw qn(o);return o.lanes=536870912,null}return Pr(o,u)}var y=n.memoizedState;if(y!==null){var S=y.dehydrated;if(Xl(o),m)if(o.flags&256)o.flags&=-257,o=Uh(n,o,r);else if(o.memoizedState!==null)o.child=n.child,o.flags|=128,o=null;else throw Error(s(558));else if(Qe||Zi(n,o,r,!1),m=(r&n.childLanes)!==0,Qe||m){if(u=Pe,u!==null&&(S=Ef(u,r),S!==0&&S!==y.retryLane))throw y.retryLane=S,pi(n,S),Ct(u,n,S),gu;Kr(),o=Uh(n,o,r)}else n=y.treeContext,Ge=Jt(S.nextSibling),rt=o,Se=!0,Pn=null,Ft=!1,n!==null&&vd(o,n),o=Pr(o,u),o.flags|=4096;return o}return n=hn(n.child,{mode:u.mode,children:u.children}),n.ref=o.ref,o.child=n,n.return=o,n}function qr(n,o){var r=o.ref;if(r===null)n!==null&&n.ref!==null&&(o.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(s(284));(n===null||n.ref!==r)&&(o.flags|=4194816)}}function yu(n,o,r,u,m){return vi(o),r=Wl(n,o,r,u,void 0,m),u=Zl(),n!==null&&!Qe?(jl(n,o,m),_n(n,o,m)):(Se&&u&&Ul(o),o.flags|=1,lt(n,o,r,m),o.child)}function xh(n,o,r,u,m,y){return vi(o),o.updateQueue=null,r=Ld(o,u,r,m),Od(n),u=Zl(),n!==null&&!Qe?(jl(n,o,y),_n(n,o,y)):(Se&&u&&Ul(o),o.flags|=1,lt(n,o,r,y),o.child)}function kh(n,o,r,u,m){if(vi(o),o.stateNode===null){var y=Ki,S=r.contextType;typeof S=="object"&&S!==null&&(y=at(S)),y=new r(u,y),o.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=pu,o.stateNode=y,y._reactInternals=o,y=o.stateNode,y.props=u,y.state=o.memoizedState,y.refs={},zl(o),S=r.contextType,y.context=typeof S=="object"&&S!==null?at(S):Ki,y.state=o.memoizedState,S=r.getDerivedStateFromProps,typeof S=="function"&&(hu(o,r,S,u),y.state=o.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(S=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),S!==y.state&&pu.enqueueReplaceState(y,y.state,null),us(o,u,y,m),ls(),y.state=o.memoizedState),typeof y.componentDidMount=="function"&&(o.flags|=4194308),u=!0}else if(n===null){y=o.stateNode;var A=o.memoizedProps,C=wi(r,A);y.props=C;var k=y.context,G=r.contextType;S=Ki,typeof G=="object"&&G!==null&&(S=at(G));var F=r.getDerivedStateFromProps;G=typeof F=="function"||typeof y.getSnapshotBeforeUpdate=="function",A=o.pendingProps!==A,G||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(A||k!==S)&&Th(o,y,u,S),Hn=!1;var O=o.memoizedState;y.state=O,us(o,u,y,m),ls(),k=o.memoizedState,A||O!==k||Hn?(typeof F=="function"&&(hu(o,r,F,u),k=o.memoizedState),(C=Hn||_h(o,r,C,u,O,k,S))?(G||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(o.flags|=4194308)):(typeof y.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=u,o.memoizedState=k),y.props=u,y.state=k,y.context=S,u=C):(typeof y.componentDidMount=="function"&&(o.flags|=4194308),u=!1)}else{y=o.stateNode,Fl(n,o),S=o.memoizedProps,G=wi(r,S),y.props=G,F=o.pendingProps,O=y.context,k=r.contextType,C=Ki,typeof k=="object"&&k!==null&&(C=at(k)),A=r.getDerivedStateFromProps,(k=typeof A=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(S!==F||O!==C)&&Th(o,y,u,C),Hn=!1,O=o.memoizedState,y.state=O,us(o,u,y,m),ls();var L=o.memoizedState;S!==F||O!==L||Hn||n!==null&&n.dependencies!==null&&_r(n.dependencies)?(typeof A=="function"&&(hu(o,r,A,u),L=o.memoizedState),(G=Hn||_h(o,r,G,u,O,L,C)||n!==null&&n.dependencies!==null&&_r(n.dependencies))?(k||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(u,L,C),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(u,L,C)),typeof y.componentDidUpdate=="function"&&(o.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof y.componentDidUpdate!="function"||S===n.memoizedProps&&O===n.memoizedState||(o.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&O===n.memoizedState||(o.flags|=1024),o.memoizedProps=u,o.memoizedState=L),y.props=u,y.state=L,y.context=C,u=G):(typeof y.componentDidUpdate!="function"||S===n.memoizedProps&&O===n.memoizedState||(o.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||S===n.memoizedProps&&O===n.memoizedState||(o.flags|=1024),u=!1)}return y=u,qr(n,o),u=(o.flags&128)!==0,y||u?(y=o.stateNode,r=u&&typeof r.getDerivedStateFromError!="function"?null:y.render(),o.flags|=1,n!==null&&u?(o.child=Ei(o,n.child,null,m),o.child=Ei(o,null,r,m)):lt(n,o,r,m),o.memoizedState=y.state,n=o.child):n=_n(n,o,m),n}function Oh(n,o,r,u){return gi(),o.flags|=256,lt(n,o,r,u),o.child}var vu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function _u(n){return{baseLanes:n,cachePool:wd()}}function Tu(n,o,r){return n=n!==null?n.childLanes&~r:0,o&&(n|=kt),n}function Lh(n,o,r){var u=o.pendingProps,m=!1,y=(o.flags&128)!==0,S;if((S=y)||(S=n!==null&&n.memoizedState===null?!1:(Je.current&2)!==0),S&&(m=!0,o.flags&=-129),S=(o.flags&32)!==0,o.flags&=-33,n===null){if(Se){if(m?zn(o):Fn(),(n=Ge)?(n=Fp(n,Ft),n=n!==null&&n.data!=="&"?n:null,n!==null&&(o.memoizedState={dehydrated:n,treeContext:Ln!==null?{id:rn,overflow:an}:null,retryLane:536870912,hydrationErrors:null},r=md(n),r.return=o,o.child=r,rt=o,Ge=null)):n=null,n===null)throw qn(o);return nc(n)?o.lanes=32:o.lanes=536870912,null}var A=u.children;return u=u.fallback,m?(Fn(),m=o.mode,A=Gr({mode:"hidden",children:A},m),u=mi(u,m,r,null),A.return=o,u.return=o,A.sibling=u,o.child=A,u=o.child,u.memoizedState=_u(r),u.childLanes=Tu(n,S,r),o.memoizedState=vu,ps(null,u)):(zn(o),Su(o,A))}var C=n.memoizedState;if(C!==null&&(A=C.dehydrated,A!==null)){if(y)o.flags&256?(zn(o),o.flags&=-257,o=Eu(n,o,r)):o.memoizedState!==null?(Fn(),o.child=n.child,o.flags|=128,o=null):(Fn(),A=u.fallback,m=o.mode,u=Gr({mode:"visible",children:u.children},m),A=mi(A,m,r,null),A.flags|=2,u.return=o,A.return=o,u.sibling=A,o.child=u,Ei(o,n.child,null,r),u=o.child,u.memoizedState=_u(r),u.childLanes=Tu(n,S,r),o.memoizedState=vu,o=ps(null,u));else if(zn(o),nc(A)){if(S=A.nextSibling&&A.nextSibling.dataset,S)var k=S.dgst;S=k,u=Error(s(419)),u.stack="",u.digest=S,ns({value:u,source:null,stack:null}),o=Eu(n,o,r)}else if(Qe||Zi(n,o,r,!1),S=(r&n.childLanes)!==0,Qe||S){if(S=Pe,S!==null&&(u=Ef(S,r),u!==0&&u!==C.retryLane))throw C.retryLane=u,pi(n,u),Ct(S,n,u),gu;tc(A)||Kr(),o=Eu(n,o,r)}else tc(A)?(o.flags|=192,o.child=n.child,o=null):(n=C.treeContext,Ge=Jt(A.nextSibling),rt=o,Se=!0,Pn=null,Ft=!1,n!==null&&vd(o,n),o=Su(o,u.children),o.flags|=4096);return o}return m?(Fn(),A=u.fallback,m=o.mode,C=n.child,k=C.sibling,u=hn(C,{mode:"hidden",children:u.children}),u.subtreeFlags=C.subtreeFlags&65011712,k!==null?A=hn(k,A):(A=mi(A,m,r,null),A.flags|=2),A.return=o,u.return=o,u.sibling=A,o.child=u,ps(null,u),u=o.child,A=n.child.memoizedState,A===null?A=_u(r):(m=A.cachePool,m!==null?(C=Ke._currentValue,m=m.parent!==C?{parent:C,pool:C}:m):m=wd(),A={baseLanes:A.baseLanes|r,cachePool:m}),u.memoizedState=A,u.childLanes=Tu(n,S,r),o.memoizedState=vu,ps(n.child,u)):(zn(o),r=n.child,n=r.sibling,r=hn(r,{mode:"visible",children:u.children}),r.return=o,r.sibling=null,n!==null&&(S=o.deletions,S===null?(o.deletions=[n],o.flags|=16):S.push(n)),o.child=r,o.memoizedState=null,r)}function Su(n,o){return o=Gr({mode:"visible",children:o},n.mode),o.return=n,n.child=o}function Gr(n,o){return n=Mt(22,n,null,o),n.lanes=0,n}function Eu(n,o,r){return Ei(o,n.child,null,r),n=Su(o,o.pendingProps.children),n.flags|=2,o.memoizedState=null,n}function Ph(n,o,r){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o),Pl(n.return,o,r)}function Au(n,o,r,u,m,y){var S=n.memoizedState;S===null?n.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:u,tail:r,tailMode:m,treeForkCount:y}:(S.isBackwards=o,S.rendering=null,S.renderingStartTime=0,S.last=u,S.tail=r,S.tailMode=m,S.treeForkCount=y)}function qh(n,o,r){var u=o.pendingProps,m=u.revealOrder,y=u.tail;u=u.children;var S=Je.current,A=(S&2)!==0;if(A?(S=S&1|2,o.flags|=128):S&=1,Z(Je,S),lt(n,o,u,r),u=Se?ts:0,!A&&n!==null&&(n.flags&128)!==0)e:for(n=o.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Ph(n,r,o);else if(n.tag===19)Ph(n,r,o);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===o)break e;for(;n.sibling===null;){if(n.return===null||n.return===o)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(m){case"forwards":for(r=o.child,m=null;r!==null;)n=r.alternate,n!==null&&Rr(n)===null&&(m=r),r=r.sibling;r=m,r===null?(m=o.child,o.child=null):(m=r.sibling,r.sibling=null),Au(o,!1,m,r,y,u);break;case"backwards":case"unstable_legacy-backwards":for(r=null,m=o.child,o.child=null;m!==null;){if(n=m.alternate,n!==null&&Rr(n)===null){o.child=m;break}n=m.sibling,m.sibling=r,r=m,m=n}Au(o,!0,r,null,y,u);break;case"together":Au(o,!1,null,null,void 0,u);break;default:o.memoizedState=null}return o.child}function _n(n,o,r){if(n!==null&&(o.dependencies=n.dependencies),Yn|=o.lanes,(r&o.childLanes)===0)if(n!==null){if(Zi(n,o,r,!1),(r&o.childLanes)===0)return null}else return null;if(n!==null&&o.child!==n.child)throw Error(s(153));if(o.child!==null){for(n=o.child,r=hn(n,n.pendingProps),o.child=r,r.return=o;n.sibling!==null;)n=n.sibling,r=r.sibling=hn(n,n.pendingProps),r.return=o;r.sibling=null}return o.child}function wu(n,o){return(n.lanes&o)!==0?!0:(n=n.dependencies,!!(n!==null&&_r(n)))}function a_(n,o,r){switch(o.tag){case 3:pt(o,o.stateNode.containerInfo),Gn(o,Ke,n.memoizedState.cache),gi();break;case 27:case 5:Ho(o);break;case 4:pt(o,o.stateNode.containerInfo);break;case 10:Gn(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,Xl(o),null;break;case 13:var u=o.memoizedState;if(u!==null)return u.dehydrated!==null?(zn(o),o.flags|=128,null):(r&o.child.childLanes)!==0?Lh(n,o,r):(zn(o),n=_n(n,o,r),n!==null?n.sibling:null);zn(o);break;case 19:var m=(n.flags&128)!==0;if(u=(r&o.childLanes)!==0,u||(Zi(n,o,r,!1),u=(r&o.childLanes)!==0),m){if(u)return qh(n,o,r);o.flags|=128}if(m=o.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),Z(Je,Je.current),u)break;return null;case 22:return o.lanes=0,Mh(n,o,r,o.pendingProps);case 24:Gn(o,Ke,n.memoizedState.cache)}return _n(n,o,r)}function Gh(n,o,r){if(n!==null)if(n.memoizedProps!==o.pendingProps)Qe=!0;else{if(!wu(n,r)&&(o.flags&128)===0)return Qe=!1,a_(n,o,r);Qe=(n.flags&131072)!==0}else Qe=!1,Se&&(o.flags&1048576)!==0&&yd(o,ts,o.index);switch(o.lanes=0,o.tag){case 16:e:{var u=o.pendingProps;if(n=Ti(o.elementType),o.type=n,typeof n=="function")Il(n)?(u=wi(n,u),o.tag=1,o=kh(null,o,n,u,r)):(o.tag=0,o=yu(null,o,n,u,r));else{if(n!=null){var m=n.$$typeof;if(m===V){o.tag=11,o=Rh(null,o,n,u,r);break e}else if(m===J){o.tag=14,o=Nh(null,o,n,u,r);break e}}throw o=Ee(n)||n,Error(s(306,o,""))}}return o;case 0:return yu(n,o,o.type,o.pendingProps,r);case 1:return u=o.type,m=wi(u,o.pendingProps),kh(n,o,u,m,r);case 3:e:{if(pt(o,o.stateNode.containerInfo),n===null)throw Error(s(387));u=o.pendingProps;var y=o.memoizedState;m=y.element,Fl(n,o),us(o,u,null,r);var S=o.memoizedState;if(u=S.cache,Gn(o,Ke,u),u!==y.cache&&ql(o,[Ke],r,!0),ls(),u=S.element,y.isDehydrated)if(y={element:u,isDehydrated:!1,cache:S.cache},o.updateQueue.baseState=y,o.memoizedState=y,o.flags&256){o=Oh(n,o,u,r);break e}else if(u!==m){m=Bt(Error(s(424)),o),ns(m),o=Oh(n,o,u,r);break e}else for(n=o.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,Ge=Jt(n.firstChild),rt=o,Se=!0,Pn=null,Ft=!0,r=Md(o,null,u,r),o.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(gi(),u===m){o=_n(n,o,r);break e}lt(n,o,u,r)}o=o.child}return o;case 26:return qr(n,o),n===null?(r=Qp(o.type,null,o.pendingProps,null))?o.memoizedState=r:Se||(r=o.type,n=o.pendingProps,u=ta(me.current).createElement(r),u[st]=o,u[_t]=n,ut(u,r,n),nt(u),o.stateNode=u):o.memoizedState=Qp(o.type,n.memoizedProps,o.pendingProps,n.memoizedState),null;case 27:return Ho(o),n===null&&Se&&(u=o.stateNode=Yp(o.type,o.pendingProps,me.current),rt=o,Ft=!0,m=Ge,Zn(o.type)?(ic=m,Ge=Jt(u.firstChild)):Ge=m),lt(n,o,o.pendingProps.children,r),qr(n,o),n===null&&(o.flags|=4194304),o.child;case 5:return n===null&&Se&&((m=u=Ge)&&(u=P_(u,o.type,o.pendingProps,Ft),u!==null?(o.stateNode=u,rt=o,Ge=Jt(u.firstChild),Ft=!1,m=!0):m=!1),m||qn(o)),Ho(o),m=o.type,y=o.pendingProps,S=n!==null?n.memoizedProps:null,u=y.children,Zu(m,y)?u=null:S!==null&&Zu(m,S)&&(o.flags|=32),o.memoizedState!==null&&(m=Wl(n,o,Z0,null,null,r),Is._currentValue=m),qr(n,o),lt(n,o,u,r),o.child;case 6:return n===null&&Se&&((n=r=Ge)&&(r=q_(r,o.pendingProps,Ft),r!==null?(o.stateNode=r,rt=o,Ge=null,n=!0):n=!1),n||qn(o)),null;case 13:return Lh(n,o,r);case 4:return pt(o,o.stateNode.containerInfo),u=o.pendingProps,n===null?o.child=Ei(o,null,u,r):lt(n,o,u,r),o.child;case 11:return Rh(n,o,o.type,o.pendingProps,r);case 7:return lt(n,o,o.pendingProps,r),o.child;case 8:return lt(n,o,o.pendingProps.children,r),o.child;case 12:return lt(n,o,o.pendingProps.children,r),o.child;case 10:return u=o.pendingProps,Gn(o,o.type,u.value),lt(n,o,u.children,r),o.child;case 9:return m=o.type._context,u=o.pendingProps.children,vi(o),m=at(m),u=u(m),o.flags|=1,lt(n,o,u,r),o.child;case 14:return Nh(n,o,o.type,o.pendingProps,r);case 15:return Ih(n,o,o.type,o.pendingProps,r);case 19:return qh(n,o,r);case 31:return r_(n,o,r);case 22:return Mh(n,o,r,o.pendingProps);case 24:return vi(o),u=at(Ke),n===null?(m=Bl(),m===null&&(m=Pe,y=Gl(),m.pooledCache=y,y.refCount++,y!==null&&(m.pooledCacheLanes|=r),m=y),o.memoizedState={parent:u,cache:m},zl(o),Gn(o,Ke,m)):((n.lanes&r)!==0&&(Fl(n,o),us(o,null,null,r),ls()),m=n.memoizedState,y=o.memoizedState,m.parent!==u?(m={parent:u,cache:u},o.memoizedState=m,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=m),Gn(o,Ke,u)):(u=y.cache,Gn(o,Ke,u),u!==m.cache&&ql(o,[Ke],r,!0))),lt(n,o,o.pendingProps.children,r),o.child;case 29:throw o.pendingProps}throw Error(s(156,o.tag))}function Tn(n){n.flags|=4}function Cu(n,o,r,u,m){if((o=(n.mode&32)!==0)&&(o=!1),o){if(n.flags|=16777216,(m&335544128)===m)if(n.stateNode.complete)n.flags|=8192;else if(dp())n.flags|=8192;else throw Si=Ar,Vl}else n.flags&=-16777217}function Hh(n,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!tm(o))if(dp())n.flags|=8192;else throw Si=Ar,Vl}function Hr(n,o){o!==null&&(n.flags|=4),n.flags&16384&&(o=n.tag!==22?_f():536870912,n.lanes|=o,co|=o)}function ms(n,o){if(!Se)switch(n.tailMode){case"hidden":o=n.tail;for(var r=null;o!==null;)o.alternate!==null&&(r=o),o=o.sibling;r===null?n.tail=null:r.sibling=null;break;case"collapsed":r=n.tail;for(var u=null;r!==null;)r.alternate!==null&&(u=r),r=r.sibling;u===null?o||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function He(n){var o=n.alternate!==null&&n.alternate.child===n.child,r=0,u=0;if(o)for(var m=n.child;m!==null;)r|=m.lanes|m.childLanes,u|=m.subtreeFlags&65011712,u|=m.flags&65011712,m.return=n,m=m.sibling;else for(m=n.child;m!==null;)r|=m.lanes|m.childLanes,u|=m.subtreeFlags,u|=m.flags,m.return=n,m=m.sibling;return n.subtreeFlags|=u,n.childLanes=r,o}function l_(n,o,r){var u=o.pendingProps;switch(xl(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return He(o),null;case 1:return He(o),null;case 3:return r=o.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),gn(Ke),$e(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(Wi(o)?Tn(o):n===null||n.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Ol())),He(o),null;case 26:var m=o.type,y=o.memoizedState;return n===null?(Tn(o),y!==null?(He(o),Hh(o,y)):(He(o),Cu(o,m,null,u,r))):y?y!==n.memoizedState?(Tn(o),He(o),Hh(o,y)):(He(o),o.flags&=-16777217):(n=n.memoizedProps,n!==u&&Tn(o),He(o),Cu(o,m,n,u,r)),null;case 27:if(Ws(o),r=me.current,m=o.type,n!==null&&o.stateNode!=null)n.memoizedProps!==u&&Tn(o);else{if(!u){if(o.stateNode===null)throw Error(s(166));return He(o),null}n=ee.current,Wi(o)?_d(o):(n=Yp(m,u,r),o.stateNode=n,Tn(o))}return He(o),null;case 5:if(Ws(o),m=o.type,n!==null&&o.stateNode!=null)n.memoizedProps!==u&&Tn(o);else{if(!u){if(o.stateNode===null)throw Error(s(166));return He(o),null}if(y=ee.current,Wi(o))_d(o);else{var S=ta(me.current);switch(y){case 1:y=S.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:y=S.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":y=S.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":y=S.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":y=S.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof u.is=="string"?S.createElement("select",{is:u.is}):S.createElement("select"),u.multiple?y.multiple=!0:u.size&&(y.size=u.size);break;default:y=typeof u.is=="string"?S.createElement(m,{is:u.is}):S.createElement(m)}}y[st]=o,y[_t]=u;e:for(S=o.child;S!==null;){if(S.tag===5||S.tag===6)y.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===o)break e;for(;S.sibling===null;){if(S.return===null||S.return===o)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}o.stateNode=y;e:switch(ut(y,m,u),m){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Tn(o)}}return He(o),Cu(o,o.type,n===null?null:n.memoizedProps,o.pendingProps,r),null;case 6:if(n&&o.stateNode!=null)n.memoizedProps!==u&&Tn(o);else{if(typeof u!="string"&&o.stateNode===null)throw Error(s(166));if(n=me.current,Wi(o)){if(n=o.stateNode,r=o.memoizedProps,u=null,m=rt,m!==null)switch(m.tag){case 27:case 5:u=m.memoizedProps}n[st]=o,n=!!(n.nodeValue===r||u!==null&&u.suppressHydrationWarning===!0||Lp(n.nodeValue,r)),n||qn(o,!0)}else n=ta(n).createTextNode(u),n[st]=o,o.stateNode=n}return He(o),null;case 31:if(r=o.memoizedState,n===null||n.memoizedState!==null){if(u=Wi(o),r!==null){if(n===null){if(!u)throw Error(s(318));if(n=o.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(557));n[st]=o}else gi(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;He(o),n=!1}else r=Ol(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=r),n=!0;if(!n)return o.flags&256?(Ut(o),o):(Ut(o),null);if((o.flags&128)!==0)throw Error(s(558))}return He(o),null;case 13:if(u=o.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(m=Wi(o),u!==null&&u.dehydrated!==null){if(n===null){if(!m)throw Error(s(318));if(m=o.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(s(317));m[st]=o}else gi(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;He(o),m=!1}else m=Ol(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=m),m=!0;if(!m)return o.flags&256?(Ut(o),o):(Ut(o),null)}return Ut(o),(o.flags&128)!==0?(o.lanes=r,o):(r=u!==null,n=n!==null&&n.memoizedState!==null,r&&(u=o.child,m=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(m=u.alternate.memoizedState.cachePool.pool),y=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==m&&(u.flags|=2048)),r!==n&&r&&(o.child.flags|=8192),Hr(o,o.updateQueue),He(o),null);case 4:return $e(),n===null&&Yu(o.stateNode.containerInfo),He(o),null;case 10:return gn(o.type),He(o),null;case 19:if($(Je),u=o.memoizedState,u===null)return He(o),null;if(m=(o.flags&128)!==0,y=u.rendering,y===null)if(m)ms(u,!1);else{if(ze!==0||n!==null&&(n.flags&128)!==0)for(n=o.child;n!==null;){if(y=Rr(n),y!==null){for(o.flags|=128,ms(u,!1),n=y.updateQueue,o.updateQueue=n,Hr(o,n),o.subtreeFlags=0,n=r,r=o.child;r!==null;)pd(r,n),r=r.sibling;return Z(Je,Je.current&1|2),Se&&pn(o,u.treeForkCount),o.child}n=n.sibling}u.tail!==null&&bt()>$r&&(o.flags|=128,m=!0,ms(u,!1),o.lanes=4194304)}else{if(!m)if(n=Rr(y),n!==null){if(o.flags|=128,m=!0,n=n.updateQueue,o.updateQueue=n,Hr(o,n),ms(u,!0),u.tail===null&&u.tailMode==="hidden"&&!y.alternate&&!Se)return He(o),null}else 2*bt()-u.renderingStartTime>$r&&r!==536870912&&(o.flags|=128,m=!0,ms(u,!1),o.lanes=4194304);u.isBackwards?(y.sibling=o.child,o.child=y):(n=u.last,n!==null?n.sibling=y:o.child=y,u.last=y)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=bt(),n.sibling=null,r=Je.current,Z(Je,m?r&1|2:r&1),Se&&pn(o,u.treeForkCount),n):(He(o),null);case 22:case 23:return Ut(o),Kl(),u=o.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(o.flags|=8192):u&&(o.flags|=8192),u?(r&536870912)!==0&&(o.flags&128)===0&&(He(o),o.subtreeFlags&6&&(o.flags|=8192)):He(o),r=o.updateQueue,r!==null&&Hr(o,r.retryQueue),r=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(r=n.memoizedState.cachePool.pool),u=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(u=o.memoizedState.cachePool.pool),u!==r&&(o.flags|=2048),n!==null&&$(_i),null;case 24:return r=null,n!==null&&(r=n.memoizedState.cache),o.memoizedState.cache!==r&&(o.flags|=2048),gn(Ke),He(o),null;case 25:return null;case 30:return null}throw Error(s(156,o.tag))}function u_(n,o){switch(xl(o),o.tag){case 1:return n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 3:return gn(Ke),$e(),n=o.flags,(n&65536)!==0&&(n&128)===0?(o.flags=n&-65537|128,o):null;case 26:case 27:case 5:return Ws(o),null;case 31:if(o.memoizedState!==null){if(Ut(o),o.alternate===null)throw Error(s(340));gi()}return n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 13:if(Ut(o),n=o.memoizedState,n!==null&&n.dehydrated!==null){if(o.alternate===null)throw Error(s(340));gi()}return n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 19:return $(Je),null;case 4:return $e(),null;case 10:return gn(o.type),null;case 22:case 23:return Ut(o),Kl(),n!==null&&$(_i),n=o.flags,n&65536?(o.flags=n&-65537|128,o):null;case 24:return gn(Ke),null;case 25:return null;default:return null}}function Bh(n,o){switch(xl(o),o.tag){case 3:gn(Ke),$e();break;case 26:case 27:case 5:Ws(o);break;case 4:$e();break;case 31:o.memoizedState!==null&&Ut(o);break;case 13:Ut(o);break;case 19:$(Je);break;case 10:gn(o.type);break;case 22:case 23:Ut(o),Kl(),n!==null&&$(_i);break;case 24:gn(Ke)}}function gs(n,o){try{var r=o.updateQueue,u=r!==null?r.lastEffect:null;if(u!==null){var m=u.next;r=m;do{if((r.tag&n)===n){u=void 0;var y=r.create,S=r.inst;u=y(),S.destroy=u}r=r.next}while(r!==m)}}catch(A){De(o,o.return,A)}}function $n(n,o,r){try{var u=o.updateQueue,m=u!==null?u.lastEffect:null;if(m!==null){var y=m.next;u=y;do{if((u.tag&n)===n){var S=u.inst,A=S.destroy;if(A!==void 0){S.destroy=void 0,m=o;var C=r,k=A;try{k()}catch(G){De(m,C,G)}}}u=u.next}while(u!==y)}}catch(G){De(o,o.return,G)}}function Vh(n){var o=n.updateQueue;if(o!==null){var r=n.stateNode;try{Ud(o,r)}catch(u){De(n,n.return,u)}}}function zh(n,o,r){r.props=wi(n.type,n.memoizedProps),r.state=n.memoizedState;try{r.componentWillUnmount()}catch(u){De(n,o,u)}}function ys(n,o){try{var r=n.ref;if(r!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof r=="function"?n.refCleanup=r(u):r.current=u}}catch(m){De(n,o,m)}}function ln(n,o){var r=n.ref,u=n.refCleanup;if(r!==null)if(typeof u=="function")try{u()}catch(m){De(n,o,m)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(m){De(n,o,m)}else r.current=null}function Fh(n){var o=n.type,r=n.memoizedProps,u=n.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":r.autoFocus&&u.focus();break e;case"img":r.src?u.src=r.src:r.srcSet&&(u.srcset=r.srcSet)}}catch(m){De(n,n.return,m)}}function bu(n,o,r){try{var u=n.stateNode;D_(u,n.type,r,o),u[_t]=o}catch(m){De(n,n.return,m)}}function $h(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Zn(n.type)||n.tag===4}function Ru(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||$h(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Zn(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Nu(n,o,r){var u=n.tag;if(u===5||u===6)n=n.stateNode,o?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(n,o):(o=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.appendChild(n),r=r._reactRootContainer,r!=null||o.onclick!==null||(o.onclick=fn));else if(u!==4&&(u===27&&Zn(n.type)&&(r=n.stateNode,o=null),n=n.child,n!==null))for(Nu(n,o,r),n=n.sibling;n!==null;)Nu(n,o,r),n=n.sibling}function Br(n,o,r){var u=n.tag;if(u===5||u===6)n=n.stateNode,o?r.insertBefore(n,o):r.appendChild(n);else if(u!==4&&(u===27&&Zn(n.type)&&(r=n.stateNode),n=n.child,n!==null))for(Br(n,o,r),n=n.sibling;n!==null;)Br(n,o,r),n=n.sibling}function Jh(n){var o=n.stateNode,r=n.memoizedProps;try{for(var u=n.type,m=o.attributes;m.length;)o.removeAttributeNode(m[0]);ut(o,u,r),o[st]=n,o[_t]=r}catch(y){De(n,n.return,y)}}var Sn=!1,We=!1,Iu=!1,Yh=typeof WeakSet=="function"?WeakSet:Set,it=null;function c_(n,o){if(n=n.containerInfo,Qu=la,n=sd(n),El(n)){if("selectionStart"in n)var r={start:n.selectionStart,end:n.selectionEnd};else e:{r=(r=n.ownerDocument)&&r.defaultView||window;var u=r.getSelection&&r.getSelection();if(u&&u.rangeCount!==0){r=u.anchorNode;var m=u.anchorOffset,y=u.focusNode;u=u.focusOffset;try{r.nodeType,y.nodeType}catch{r=null;break e}var S=0,A=-1,C=-1,k=0,G=0,F=n,O=null;t:for(;;){for(var L;F!==r||m!==0&&F.nodeType!==3||(A=S+m),F!==y||u!==0&&F.nodeType!==3||(C=S+u),F.nodeType===3&&(S+=F.nodeValue.length),(L=F.firstChild)!==null;)O=F,F=L;for(;;){if(F===n)break t;if(O===r&&++k===m&&(A=S),O===y&&++G===u&&(C=S),(L=F.nextSibling)!==null)break;F=O,O=F.parentNode}F=L}r=A===-1||C===-1?null:{start:A,end:C}}else r=null}r=r||{start:0,end:0}}else r=null;for(Wu={focusedElem:n,selectionRange:r},la=!1,it=o;it!==null;)if(o=it,n=o.child,(o.subtreeFlags&1028)!==0&&n!==null)n.return=o,it=n;else for(;it!==null;){switch(o=it,y=o.alternate,n=o.flags,o.tag){case 0:if((n&4)!==0&&(n=o.updateQueue,n=n!==null?n.events:null,n!==null))for(r=0;r<n.length;r++)m=n[r],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&y!==null){n=void 0,r=o,m=y.memoizedProps,y=y.memoizedState,u=r.stateNode;try{var j=wi(r.type,m);n=u.getSnapshotBeforeUpdate(j,y),u.__reactInternalSnapshotBeforeUpdate=n}catch(re){De(r,r.return,re)}}break;case 3:if((n&1024)!==0){if(n=o.stateNode.containerInfo,r=n.nodeType,r===9)ec(n);else if(r===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":ec(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(s(163))}if(n=o.sibling,n!==null){n.return=o.return,it=n;break}it=o.return}}function Kh(n,o,r){var u=r.flags;switch(r.tag){case 0:case 11:case 15:An(n,r),u&4&&gs(5,r);break;case 1:if(An(n,r),u&4)if(n=r.stateNode,o===null)try{n.componentDidMount()}catch(S){De(r,r.return,S)}else{var m=wi(r.type,o.memoizedProps);o=o.memoizedState;try{n.componentDidUpdate(m,o,n.__reactInternalSnapshotBeforeUpdate)}catch(S){De(r,r.return,S)}}u&64&&Vh(r),u&512&&ys(r,r.return);break;case 3:if(An(n,r),u&64&&(n=r.updateQueue,n!==null)){if(o=null,r.child!==null)switch(r.child.tag){case 27:case 5:o=r.child.stateNode;break;case 1:o=r.child.stateNode}try{Ud(n,o)}catch(S){De(r,r.return,S)}}break;case 27:o===null&&u&4&&Jh(r);case 26:case 5:An(n,r),o===null&&u&4&&Fh(r),u&512&&ys(r,r.return);break;case 12:An(n,r);break;case 31:An(n,r),u&4&&Wh(n,r);break;case 13:An(n,r),u&4&&Zh(n,r),u&64&&(n=r.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(r=__.bind(null,r),G_(n,r))));break;case 22:if(u=r.memoizedState!==null||Sn,!u){o=o!==null&&o.memoizedState!==null||We,m=Sn;var y=We;Sn=u,(We=o)&&!y?wn(n,r,(r.subtreeFlags&8772)!==0):An(n,r),Sn=m,We=y}break;case 30:break;default:An(n,r)}}function Xh(n){var o=n.alternate;o!==null&&(n.alternate=null,Xh(o)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(o=n.stateNode,o!==null&&sl(o)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Be=null,St=!1;function En(n,o,r){for(r=r.child;r!==null;)Qh(n,o,r),r=r.sibling}function Qh(n,o,r){if(Rt&&typeof Rt.onCommitFiberUnmount=="function")try{Rt.onCommitFiberUnmount(Bo,r)}catch{}switch(r.tag){case 26:We||ln(r,o),En(n,o,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:We||ln(r,o);var u=Be,m=St;Zn(r.type)&&(Be=r.stateNode,St=!1),En(n,o,r),bs(r.stateNode),Be=u,St=m;break;case 5:We||ln(r,o);case 6:if(u=Be,m=St,Be=null,En(n,o,r),Be=u,St=m,Be!==null)if(St)try{(Be.nodeType===9?Be.body:Be.nodeName==="HTML"?Be.ownerDocument.body:Be).removeChild(r.stateNode)}catch(y){De(r,o,y)}else try{Be.removeChild(r.stateNode)}catch(y){De(r,o,y)}break;case 18:Be!==null&&(St?(n=Be,Vp(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,r.stateNode),_o(n)):Vp(Be,r.stateNode));break;case 4:u=Be,m=St,Be=r.stateNode.containerInfo,St=!0,En(n,o,r),Be=u,St=m;break;case 0:case 11:case 14:case 15:$n(2,r,o),We||$n(4,r,o),En(n,o,r);break;case 1:We||(ln(r,o),u=r.stateNode,typeof u.componentWillUnmount=="function"&&zh(r,o,u)),En(n,o,r);break;case 21:En(n,o,r);break;case 22:We=(u=We)||r.memoizedState!==null,En(n,o,r),We=u;break;default:En(n,o,r)}}function Wh(n,o){if(o.memoizedState===null&&(n=o.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{_o(n)}catch(r){De(o,o.return,r)}}}function Zh(n,o){if(o.memoizedState===null&&(n=o.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{_o(n)}catch(r){De(o,o.return,r)}}function f_(n){switch(n.tag){case 31:case 13:case 19:var o=n.stateNode;return o===null&&(o=n.stateNode=new Yh),o;case 22:return n=n.stateNode,o=n._retryCache,o===null&&(o=n._retryCache=new Yh),o;default:throw Error(s(435,n.tag))}}function Vr(n,o){var r=f_(n);o.forEach(function(u){if(!r.has(u)){r.add(u);var m=T_.bind(null,n,u);u.then(m,m)}})}function Et(n,o){var r=o.deletions;if(r!==null)for(var u=0;u<r.length;u++){var m=r[u],y=n,S=o,A=S;e:for(;A!==null;){switch(A.tag){case 27:if(Zn(A.type)){Be=A.stateNode,St=!1;break e}break;case 5:Be=A.stateNode,St=!1;break e;case 3:case 4:Be=A.stateNode.containerInfo,St=!0;break e}A=A.return}if(Be===null)throw Error(s(160));Qh(y,S,m),Be=null,St=!1,y=m.alternate,y!==null&&(y.return=null),m.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)jh(o,n),o=o.sibling}var Wt=null;function jh(n,o){var r=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Et(o,n),At(n),u&4&&($n(3,n,n.return),gs(3,n),$n(5,n,n.return));break;case 1:Et(o,n),At(n),u&512&&(We||r===null||ln(r,r.return)),u&64&&Sn&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(r=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=r===null?u:r.concat(u))));break;case 26:var m=Wt;if(Et(o,n),At(n),u&512&&(We||r===null||ln(r,r.return)),u&4){var y=r!==null?r.memoizedState:null;if(u=n.memoizedState,r===null)if(u===null)if(n.stateNode===null){e:{u=n.type,r=n.memoizedProps,m=m.ownerDocument||m;t:switch(u){case"title":y=m.getElementsByTagName("title")[0],(!y||y[Fo]||y[st]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=m.createElement(u),m.head.insertBefore(y,m.querySelector("head > title"))),ut(y,u,r),y[st]=n,nt(y),u=y;break e;case"link":var S=jp("link","href",m).get(u+(r.href||""));if(S){for(var A=0;A<S.length;A++)if(y=S[A],y.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&y.getAttribute("rel")===(r.rel==null?null:r.rel)&&y.getAttribute("title")===(r.title==null?null:r.title)&&y.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){S.splice(A,1);break t}}y=m.createElement(u),ut(y,u,r),m.head.appendChild(y);break;case"meta":if(S=jp("meta","content",m).get(u+(r.content||""))){for(A=0;A<S.length;A++)if(y=S[A],y.getAttribute("content")===(r.content==null?null:""+r.content)&&y.getAttribute("name")===(r.name==null?null:r.name)&&y.getAttribute("property")===(r.property==null?null:r.property)&&y.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&y.getAttribute("charset")===(r.charSet==null?null:r.charSet)){S.splice(A,1);break t}}y=m.createElement(u),ut(y,u,r),m.head.appendChild(y);break;default:throw Error(s(468,u))}y[st]=n,nt(y),u=y}n.stateNode=u}else em(m,n.type,n.stateNode);else n.stateNode=Zp(m,u,n.memoizedProps);else y!==u?(y===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):y.count--,u===null?em(m,n.type,n.stateNode):Zp(m,u,n.memoizedProps)):u===null&&n.stateNode!==null&&bu(n,n.memoizedProps,r.memoizedProps)}break;case 27:Et(o,n),At(n),u&512&&(We||r===null||ln(r,r.return)),r!==null&&u&4&&bu(n,n.memoizedProps,r.memoizedProps);break;case 5:if(Et(o,n),At(n),u&512&&(We||r===null||ln(r,r.return)),n.flags&32){m=n.stateNode;try{Bi(m,"")}catch(j){De(n,n.return,j)}}u&4&&n.stateNode!=null&&(m=n.memoizedProps,bu(n,m,r!==null?r.memoizedProps:m)),u&1024&&(Iu=!0);break;case 6:if(Et(o,n),At(n),u&4){if(n.stateNode===null)throw Error(s(162));u=n.memoizedProps,r=n.stateNode;try{r.nodeValue=u}catch(j){De(n,n.return,j)}}break;case 3:if(oa=null,m=Wt,Wt=na(o.containerInfo),Et(o,n),Wt=m,At(n),u&4&&r!==null&&r.memoizedState.isDehydrated)try{_o(o.containerInfo)}catch(j){De(n,n.return,j)}Iu&&(Iu=!1,ep(n));break;case 4:u=Wt,Wt=na(n.stateNode.containerInfo),Et(o,n),At(n),Wt=u;break;case 12:Et(o,n),At(n);break;case 31:Et(o,n),At(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Vr(n,u)));break;case 13:Et(o,n),At(n),n.child.flags&8192&&n.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(Fr=bt()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Vr(n,u)));break;case 22:m=n.memoizedState!==null;var C=r!==null&&r.memoizedState!==null,k=Sn,G=We;if(Sn=k||m,We=G||C,Et(o,n),We=G,Sn=k,At(n),u&8192)e:for(o=n.stateNode,o._visibility=m?o._visibility&-2:o._visibility|1,m&&(r===null||C||Sn||We||Ci(n)),r=null,o=n;;){if(o.tag===5||o.tag===26){if(r===null){C=r=o;try{if(y=C.stateNode,m)S=y.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{A=C.stateNode;var F=C.memoizedProps.style,O=F!=null&&F.hasOwnProperty("display")?F.display:null;A.style.display=O==null||typeof O=="boolean"?"":(""+O).trim()}}catch(j){De(C,C.return,j)}}}else if(o.tag===6){if(r===null){C=o;try{C.stateNode.nodeValue=m?"":C.memoizedProps}catch(j){De(C,C.return,j)}}}else if(o.tag===18){if(r===null){C=o;try{var L=C.stateNode;m?zp(L,!0):zp(C.stateNode,!1)}catch(j){De(C,C.return,j)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===n)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===n)break e;for(;o.sibling===null;){if(o.return===null||o.return===n)break e;r===o&&(r=null),o=o.return}r===o&&(r=null),o.sibling.return=o.return,o=o.sibling}u&4&&(u=n.updateQueue,u!==null&&(r=u.retryQueue,r!==null&&(u.retryQueue=null,Vr(n,r))));break;case 19:Et(o,n),At(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Vr(n,u)));break;case 30:break;case 21:break;default:Et(o,n),At(n)}}function At(n){var o=n.flags;if(o&2){try{for(var r,u=n.return;u!==null;){if($h(u)){r=u;break}u=u.return}if(r==null)throw Error(s(160));switch(r.tag){case 27:var m=r.stateNode,y=Ru(n);Br(n,y,m);break;case 5:var S=r.stateNode;r.flags&32&&(Bi(S,""),r.flags&=-33);var A=Ru(n);Br(n,A,S);break;case 3:case 4:var C=r.stateNode.containerInfo,k=Ru(n);Nu(n,k,C);break;default:throw Error(s(161))}}catch(G){De(n,n.return,G)}n.flags&=-3}o&4096&&(n.flags&=-4097)}function ep(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var o=n;ep(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),n=n.sibling}}function An(n,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)Kh(n,o.alternate,o),o=o.sibling}function Ci(n){for(n=n.child;n!==null;){var o=n;switch(o.tag){case 0:case 11:case 14:case 15:$n(4,o,o.return),Ci(o);break;case 1:ln(o,o.return);var r=o.stateNode;typeof r.componentWillUnmount=="function"&&zh(o,o.return,r),Ci(o);break;case 27:bs(o.stateNode);case 26:case 5:ln(o,o.return),Ci(o);break;case 22:o.memoizedState===null&&Ci(o);break;case 30:Ci(o);break;default:Ci(o)}n=n.sibling}}function wn(n,o,r){for(r=r&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var u=o.alternate,m=n,y=o,S=y.flags;switch(y.tag){case 0:case 11:case 15:wn(m,y,r),gs(4,y);break;case 1:if(wn(m,y,r),u=y,m=u.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(k){De(u,u.return,k)}if(u=y,m=u.updateQueue,m!==null){var A=u.stateNode;try{var C=m.shared.hiddenCallbacks;if(C!==null)for(m.shared.hiddenCallbacks=null,m=0;m<C.length;m++)Dd(C[m],A)}catch(k){De(u,u.return,k)}}r&&S&64&&Vh(y),ys(y,y.return);break;case 27:Jh(y);case 26:case 5:wn(m,y,r),r&&u===null&&S&4&&Fh(y),ys(y,y.return);break;case 12:wn(m,y,r);break;case 31:wn(m,y,r),r&&S&4&&Wh(m,y);break;case 13:wn(m,y,r),r&&S&4&&Zh(m,y);break;case 22:y.memoizedState===null&&wn(m,y,r),ys(y,y.return);break;case 30:break;default:wn(m,y,r)}o=o.sibling}}function Mu(n,o){var r=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(r=n.memoizedState.cachePool.pool),n=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(n=o.memoizedState.cachePool.pool),n!==r&&(n!=null&&n.refCount++,r!=null&&is(r))}function Du(n,o){n=null,o.alternate!==null&&(n=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==n&&(o.refCount++,n!=null&&is(n))}function Zt(n,o,r,u){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)tp(n,o,r,u),o=o.sibling}function tp(n,o,r,u){var m=o.flags;switch(o.tag){case 0:case 11:case 15:Zt(n,o,r,u),m&2048&&gs(9,o);break;case 1:Zt(n,o,r,u);break;case 3:Zt(n,o,r,u),m&2048&&(n=null,o.alternate!==null&&(n=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==n&&(o.refCount++,n!=null&&is(n)));break;case 12:if(m&2048){Zt(n,o,r,u),n=o.stateNode;try{var y=o.memoizedProps,S=y.id,A=y.onPostCommit;typeof A=="function"&&A(S,o.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(C){De(o,o.return,C)}}else Zt(n,o,r,u);break;case 31:Zt(n,o,r,u);break;case 13:Zt(n,o,r,u);break;case 23:break;case 22:y=o.stateNode,S=o.alternate,o.memoizedState!==null?y._visibility&2?Zt(n,o,r,u):vs(n,o):y._visibility&2?Zt(n,o,r,u):(y._visibility|=2,ao(n,o,r,u,(o.subtreeFlags&10256)!==0||!1)),m&2048&&Mu(S,o);break;case 24:Zt(n,o,r,u),m&2048&&Du(o.alternate,o);break;default:Zt(n,o,r,u)}}function ao(n,o,r,u,m){for(m=m&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var y=n,S=o,A=r,C=u,k=S.flags;switch(S.tag){case 0:case 11:case 15:ao(y,S,A,C,m),gs(8,S);break;case 23:break;case 22:var G=S.stateNode;S.memoizedState!==null?G._visibility&2?ao(y,S,A,C,m):vs(y,S):(G._visibility|=2,ao(y,S,A,C,m)),m&&k&2048&&Mu(S.alternate,S);break;case 24:ao(y,S,A,C,m),m&&k&2048&&Du(S.alternate,S);break;default:ao(y,S,A,C,m)}o=o.sibling}}function vs(n,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var r=n,u=o,m=u.flags;switch(u.tag){case 22:vs(r,u),m&2048&&Mu(u.alternate,u);break;case 24:vs(r,u),m&2048&&Du(u.alternate,u);break;default:vs(r,u)}o=o.sibling}}var _s=8192;function lo(n,o,r){if(n.subtreeFlags&_s)for(n=n.child;n!==null;)np(n,o,r),n=n.sibling}function np(n,o,r){switch(n.tag){case 26:lo(n,o,r),n.flags&_s&&n.memoizedState!==null&&W_(r,Wt,n.memoizedState,n.memoizedProps);break;case 5:lo(n,o,r);break;case 3:case 4:var u=Wt;Wt=na(n.stateNode.containerInfo),lo(n,o,r),Wt=u;break;case 22:n.memoizedState===null&&(u=n.alternate,u!==null&&u.memoizedState!==null?(u=_s,_s=16777216,lo(n,o,r),_s=u):lo(n,o,r));break;default:lo(n,o,r)}}function ip(n){var o=n.alternate;if(o!==null&&(n=o.child,n!==null)){o.child=null;do o=n.sibling,n.sibling=null,n=o;while(n!==null)}}function Ts(n){var o=n.deletions;if((n.flags&16)!==0){if(o!==null)for(var r=0;r<o.length;r++){var u=o[r];it=u,sp(u,n)}ip(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)op(n),n=n.sibling}function op(n){switch(n.tag){case 0:case 11:case 15:Ts(n),n.flags&2048&&$n(9,n,n.return);break;case 3:Ts(n);break;case 12:Ts(n);break;case 22:var o=n.stateNode;n.memoizedState!==null&&o._visibility&2&&(n.return===null||n.return.tag!==13)?(o._visibility&=-3,zr(n)):Ts(n);break;default:Ts(n)}}function zr(n){var o=n.deletions;if((n.flags&16)!==0){if(o!==null)for(var r=0;r<o.length;r++){var u=o[r];it=u,sp(u,n)}ip(n)}for(n=n.child;n!==null;){switch(o=n,o.tag){case 0:case 11:case 15:$n(8,o,o.return),zr(o);break;case 22:r=o.stateNode,r._visibility&2&&(r._visibility&=-3,zr(o));break;default:zr(o)}n=n.sibling}}function sp(n,o){for(;it!==null;){var r=it;switch(r.tag){case 0:case 11:case 15:$n(8,r,o);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var u=r.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:is(r.memoizedState.cache)}if(u=r.child,u!==null)u.return=r,it=u;else e:for(r=n;it!==null;){u=it;var m=u.sibling,y=u.return;if(Xh(u),u===r){it=null;break e}if(m!==null){m.return=y,it=m;break e}it=y}}}var d_={getCacheForType:function(n){var o=at(Ke),r=o.data.get(n);return r===void 0&&(r=n(),o.data.set(n,r)),r},cacheSignal:function(){return at(Ke).controller.signal}},h_=typeof WeakMap=="function"?WeakMap:Map,Re=0,Pe=null,ge=null,ve=0,Me=0,xt=null,Jn=!1,uo=!1,Uu=!1,Cn=0,ze=0,Yn=0,bi=0,xu=0,kt=0,co=0,Ss=null,wt=null,ku=!1,Fr=0,rp=0,$r=1/0,Jr=null,Kn=null,je=0,Xn=null,fo=null,bn=0,Ou=0,Lu=null,ap=null,Es=0,Pu=null;function Ot(){return(Re&2)!==0&&ve!==0?ve&-ve:H.T!==null?zu():Af()}function lp(){if(kt===0)if((ve&536870912)===0||Se){var n=er;er<<=1,(er&3932160)===0&&(er=262144),kt=n}else kt=536870912;return n=Dt.current,n!==null&&(n.flags|=32),kt}function Ct(n,o,r){(n===Pe&&(Me===2||Me===9)||n.cancelPendingCommit!==null)&&(ho(n,0),Qn(n,ve,kt,!1)),zo(n,r),((Re&2)===0||n!==Pe)&&(n===Pe&&((Re&2)===0&&(bi|=r),ze===4&&Qn(n,ve,kt,!1)),un(n))}function up(n,o,r){if((Re&6)!==0)throw Error(s(327));var u=!r&&(o&127)===0&&(o&n.expiredLanes)===0||Vo(n,o),m=u?g_(n,o):Gu(n,o,!0),y=u;do{if(m===0){uo&&!u&&Qn(n,o,0,!1);break}else{if(r=n.current.alternate,y&&!p_(r)){m=Gu(n,o,!1),y=!1;continue}if(m===2){if(y=o,n.errorRecoveryDisabledLanes&y)var S=0;else S=n.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){o=S;e:{var A=n;m=Ss;var C=A.current.memoizedState.isDehydrated;if(C&&(ho(A,S).flags|=256),S=Gu(A,S,!1),S!==2){if(Uu&&!C){A.errorRecoveryDisabledLanes|=y,bi|=y,m=4;break e}y=wt,wt=m,y!==null&&(wt===null?wt=y:wt.push.apply(wt,y))}m=S}if(y=!1,m!==2)continue}}if(m===1){ho(n,0),Qn(n,o,0,!0);break}e:{switch(u=n,y=m,y){case 0:case 1:throw Error(s(345));case 4:if((o&4194048)!==o)break;case 6:Qn(u,o,kt,!Jn);break e;case 2:wt=null;break;case 3:case 5:break;default:throw Error(s(329))}if((o&62914560)===o&&(m=Fr+300-bt(),10<m)){if(Qn(u,o,kt,!Jn),nr(u,0,!0)!==0)break e;bn=o,u.timeoutHandle=Hp(cp.bind(null,u,r,wt,Jr,ku,o,kt,bi,co,Jn,y,"Throttled",-0,0),m);break e}cp(u,r,wt,Jr,ku,o,kt,bi,co,Jn,y,null,-0,0)}}break}while(!0);un(n)}function cp(n,o,r,u,m,y,S,A,C,k,G,F,O,L){if(n.timeoutHandle=-1,F=o.subtreeFlags,F&8192||(F&16785408)===16785408){F={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:fn},np(o,y,F);var j=(y&62914560)===y?Fr-bt():(y&4194048)===y?rp-bt():0;if(j=Z_(F,j),j!==null){bn=y,n.cancelPendingCommit=j(vp.bind(null,n,o,y,r,u,m,S,A,C,G,F,null,O,L)),Qn(n,y,S,!k);return}}vp(n,o,y,r,u,m,S,A,C)}function p_(n){for(var o=n;;){var r=o.tag;if((r===0||r===11||r===15)&&o.flags&16384&&(r=o.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var u=0;u<r.length;u++){var m=r[u],y=m.getSnapshot;m=m.value;try{if(!It(y(),m))return!1}catch{return!1}}if(r=o.child,o.subtreeFlags&16384&&r!==null)r.return=o,o=r;else{if(o===n)break;for(;o.sibling===null;){if(o.return===null||o.return===n)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Qn(n,o,r,u){o&=~xu,o&=~bi,n.suspendedLanes|=o,n.pingedLanes&=~o,u&&(n.warmLanes|=o),u=n.expirationTimes;for(var m=o;0<m;){var y=31-Nt(m),S=1<<y;u[y]=-1,m&=~S}r!==0&&Tf(n,r,o)}function Yr(){return(Re&6)===0?(As(0),!1):!0}function qu(){if(ge!==null){if(Me===0)var n=ge.return;else n=ge,mn=yi=null,eu(n),no=null,ss=0,n=ge;for(;n!==null;)Bh(n.alternate,n),n=n.return;ge=null}}function ho(n,o){var r=n.timeoutHandle;r!==-1&&(n.timeoutHandle=-1,k_(r)),r=n.cancelPendingCommit,r!==null&&(n.cancelPendingCommit=null,r()),bn=0,qu(),Pe=n,ge=r=hn(n.current,null),ve=o,Me=0,xt=null,Jn=!1,uo=Vo(n,o),Uu=!1,co=kt=xu=bi=Yn=ze=0,wt=Ss=null,ku=!1,(o&8)!==0&&(o|=o&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=o;0<u;){var m=31-Nt(u),y=1<<m;o|=n[m],u&=~y}return Cn=o,pr(),r}function fp(n,o){de=null,H.H=hs,o===to||o===Er?(o=Rd(),Me=3):o===Vl?(o=Rd(),Me=4):Me=o===gu?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,xt=o,ge===null&&(ze=1,Lr(n,Bt(o,n.current)))}function dp(){var n=Dt.current;return n===null?!0:(ve&4194048)===ve?$t===null:(ve&62914560)===ve||(ve&536870912)!==0?n===$t:!1}function hp(){var n=H.H;return H.H=hs,n===null?hs:n}function pp(){var n=H.A;return H.A=d_,n}function Kr(){ze=4,Jn||(ve&4194048)!==ve&&Dt.current!==null||(uo=!0),(Yn&134217727)===0&&(bi&134217727)===0||Pe===null||Qn(Pe,ve,kt,!1)}function Gu(n,o,r){var u=Re;Re|=2;var m=hp(),y=pp();(Pe!==n||ve!==o)&&(Jr=null,ho(n,o)),o=!1;var S=ze;e:do try{if(Me!==0&&ge!==null){var A=ge,C=xt;switch(Me){case 8:qu(),S=6;break e;case 3:case 2:case 9:case 6:Dt.current===null&&(o=!0);var k=Me;if(Me=0,xt=null,po(n,A,C,k),r&&uo){S=0;break e}break;default:k=Me,Me=0,xt=null,po(n,A,C,k)}}m_(),S=ze;break}catch(G){fp(n,G)}while(!0);return o&&n.shellSuspendCounter++,mn=yi=null,Re=u,H.H=m,H.A=y,ge===null&&(Pe=null,ve=0,pr()),S}function m_(){for(;ge!==null;)mp(ge)}function g_(n,o){var r=Re;Re|=2;var u=hp(),m=pp();Pe!==n||ve!==o?(Jr=null,$r=bt()+500,ho(n,o)):uo=Vo(n,o);e:do try{if(Me!==0&&ge!==null){o=ge;var y=xt;t:switch(Me){case 1:Me=0,xt=null,po(n,o,y,1);break;case 2:case 9:if(Cd(y)){Me=0,xt=null,gp(o);break}o=function(){Me!==2&&Me!==9||Pe!==n||(Me=7),un(n)},y.then(o,o);break e;case 3:Me=7;break e;case 4:Me=5;break e;case 7:Cd(y)?(Me=0,xt=null,gp(o)):(Me=0,xt=null,po(n,o,y,7));break;case 5:var S=null;switch(ge.tag){case 26:S=ge.memoizedState;case 5:case 27:var A=ge;if(S?tm(S):A.stateNode.complete){Me=0,xt=null;var C=A.sibling;if(C!==null)ge=C;else{var k=A.return;k!==null?(ge=k,Xr(k)):ge=null}break t}}Me=0,xt=null,po(n,o,y,5);break;case 6:Me=0,xt=null,po(n,o,y,6);break;case 8:qu(),ze=6;break e;default:throw Error(s(462))}}y_();break}catch(G){fp(n,G)}while(!0);return mn=yi=null,H.H=u,H.A=m,Re=r,ge!==null?0:(Pe=null,ve=0,pr(),ze)}function y_(){for(;ge!==null&&!Hv();)mp(ge)}function mp(n){var o=Gh(n.alternate,n,Cn);n.memoizedProps=n.pendingProps,o===null?Xr(n):ge=o}function gp(n){var o=n,r=o.alternate;switch(o.tag){case 15:case 0:o=xh(r,o,o.pendingProps,o.type,void 0,ve);break;case 11:o=xh(r,o,o.pendingProps,o.type.render,o.ref,ve);break;case 5:eu(o);default:Bh(r,o),o=ge=pd(o,Cn),o=Gh(r,o,Cn)}n.memoizedProps=n.pendingProps,o===null?Xr(n):ge=o}function po(n,o,r,u){mn=yi=null,eu(o),no=null,ss=0;var m=o.return;try{if(s_(n,m,o,r,ve)){ze=1,Lr(n,Bt(r,n.current)),ge=null;return}}catch(y){if(m!==null)throw ge=m,y;ze=1,Lr(n,Bt(r,n.current)),ge=null;return}o.flags&32768?(Se||u===1?n=!0:uo||(ve&536870912)!==0?n=!1:(Jn=n=!0,(u===2||u===9||u===3||u===6)&&(u=Dt.current,u!==null&&u.tag===13&&(u.flags|=16384))),yp(o,n)):Xr(o)}function Xr(n){var o=n;do{if((o.flags&32768)!==0){yp(o,Jn);return}n=o.return;var r=l_(o.alternate,o,Cn);if(r!==null){ge=r;return}if(o=o.sibling,o!==null){ge=o;return}ge=o=n}while(o!==null);ze===0&&(ze=5)}function yp(n,o){do{var r=u_(n.alternate,n);if(r!==null){r.flags&=32767,ge=r;return}if(r=n.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!o&&(n=n.sibling,n!==null)){ge=n;return}ge=n=r}while(n!==null);ze=6,ge=null}function vp(n,o,r,u,m,y,S,A,C){n.cancelPendingCommit=null;do Qr();while(je!==0);if((Re&6)!==0)throw Error(s(327));if(o!==null){if(o===n.current)throw Error(s(177));if(y=o.lanes|o.childLanes,y|=Rl,Qv(n,r,y,S,A,C),n===Pe&&(ge=Pe=null,ve=0),fo=o,Xn=n,bn=r,Ou=y,Lu=m,ap=u,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,S_(Zs,function(){return Ap(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||u){u=H.T,H.T=null,m=Q.p,Q.p=2,S=Re,Re|=4;try{c_(n,o,r)}finally{Re=S,Q.p=m,H.T=u}}je=1,_p(),Tp(),Sp()}}function _p(){if(je===1){je=0;var n=Xn,o=fo,r=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||r){r=H.T,H.T=null;var u=Q.p;Q.p=2;var m=Re;Re|=4;try{jh(o,n);var y=Wu,S=sd(n.containerInfo),A=y.focusedElem,C=y.selectionRange;if(S!==A&&A&&A.ownerDocument&&od(A.ownerDocument.documentElement,A)){if(C!==null&&El(A)){var k=C.start,G=C.end;if(G===void 0&&(G=k),"selectionStart"in A)A.selectionStart=k,A.selectionEnd=Math.min(G,A.value.length);else{var F=A.ownerDocument||document,O=F&&F.defaultView||window;if(O.getSelection){var L=O.getSelection(),j=A.textContent.length,re=Math.min(C.start,j),ke=C.end===void 0?re:Math.min(C.end,j);!L.extend&&re>ke&&(S=ke,ke=re,re=S);var M=id(A,re),N=id(A,ke);if(M&&N&&(L.rangeCount!==1||L.anchorNode!==M.node||L.anchorOffset!==M.offset||L.focusNode!==N.node||L.focusOffset!==N.offset)){var x=F.createRange();x.setStart(M.node,M.offset),L.removeAllRanges(),re>ke?(L.addRange(x),L.extend(N.node,N.offset)):(x.setEnd(N.node,N.offset),L.addRange(x))}}}}for(F=[],L=A;L=L.parentNode;)L.nodeType===1&&F.push({element:L,left:L.scrollLeft,top:L.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<F.length;A++){var z=F[A];z.element.scrollLeft=z.left,z.element.scrollTop=z.top}}la=!!Qu,Wu=Qu=null}finally{Re=m,Q.p=u,H.T=r}}n.current=o,je=2}}function Tp(){if(je===2){je=0;var n=Xn,o=fo,r=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||r){r=H.T,H.T=null;var u=Q.p;Q.p=2;var m=Re;Re|=4;try{Kh(n,o.alternate,o)}finally{Re=m,Q.p=u,H.T=r}}je=3}}function Sp(){if(je===4||je===3){je=0,Bv();var n=Xn,o=fo,r=bn,u=ap;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?je=5:(je=0,fo=Xn=null,Ep(n,n.pendingLanes));var m=n.pendingLanes;if(m===0&&(Kn=null),il(r),o=o.stateNode,Rt&&typeof Rt.onCommitFiberRoot=="function")try{Rt.onCommitFiberRoot(Bo,o,void 0,(o.current.flags&128)===128)}catch{}if(u!==null){o=H.T,m=Q.p,Q.p=2,H.T=null;try{for(var y=n.onRecoverableError,S=0;S<u.length;S++){var A=u[S];y(A.value,{componentStack:A.stack})}}finally{H.T=o,Q.p=m}}(bn&3)!==0&&Qr(),un(n),m=n.pendingLanes,(r&261930)!==0&&(m&42)!==0?n===Pu?Es++:(Es=0,Pu=n):Es=0,As(0)}}function Ep(n,o){(n.pooledCacheLanes&=o)===0&&(o=n.pooledCache,o!=null&&(n.pooledCache=null,is(o)))}function Qr(){return _p(),Tp(),Sp(),Ap()}function Ap(){if(je!==5)return!1;var n=Xn,o=Ou;Ou=0;var r=il(bn),u=H.T,m=Q.p;try{Q.p=32>r?32:r,H.T=null,r=Lu,Lu=null;var y=Xn,S=bn;if(je=0,fo=Xn=null,bn=0,(Re&6)!==0)throw Error(s(331));var A=Re;if(Re|=4,op(y.current),tp(y,y.current,S,r),Re=A,As(0,!1),Rt&&typeof Rt.onPostCommitFiberRoot=="function")try{Rt.onPostCommitFiberRoot(Bo,y)}catch{}return!0}finally{Q.p=m,H.T=u,Ep(n,o)}}function wp(n,o,r){o=Bt(r,o),o=mu(n.stateNode,o,2),n=Vn(n,o,2),n!==null&&(zo(n,2),un(n))}function De(n,o,r){if(n.tag===3)wp(n,n,r);else for(;o!==null;){if(o.tag===3){wp(o,n,r);break}else if(o.tag===1){var u=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Kn===null||!Kn.has(u))){n=Bt(r,n),r=Ch(2),u=Vn(o,r,2),u!==null&&(bh(r,u,o,n),zo(u,2),un(u));break}}o=o.return}}function Hu(n,o,r){var u=n.pingCache;if(u===null){u=n.pingCache=new h_;var m=new Set;u.set(o,m)}else m=u.get(o),m===void 0&&(m=new Set,u.set(o,m));m.has(r)||(Uu=!0,m.add(r),n=v_.bind(null,n,o,r),o.then(n,n))}function v_(n,o,r){var u=n.pingCache;u!==null&&u.delete(o),n.pingedLanes|=n.suspendedLanes&r,n.warmLanes&=~r,Pe===n&&(ve&r)===r&&(ze===4||ze===3&&(ve&62914560)===ve&&300>bt()-Fr?(Re&2)===0&&ho(n,0):xu|=r,co===ve&&(co=0)),un(n)}function Cp(n,o){o===0&&(o=_f()),n=pi(n,o),n!==null&&(zo(n,o),un(n))}function __(n){var o=n.memoizedState,r=0;o!==null&&(r=o.retryLane),Cp(n,r)}function T_(n,o){var r=0;switch(n.tag){case 31:case 13:var u=n.stateNode,m=n.memoizedState;m!==null&&(r=m.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(o),Cp(n,r)}function S_(n,o){return ja(n,o)}var Wr=null,mo=null,Bu=!1,Zr=!1,Vu=!1,Wn=0;function un(n){n!==mo&&n.next===null&&(mo===null?Wr=mo=n:mo=mo.next=n),Zr=!0,Bu||(Bu=!0,A_())}function As(n,o){if(!Vu&&Zr){Vu=!0;do for(var r=!1,u=Wr;u!==null;){if(n!==0){var m=u.pendingLanes;if(m===0)var y=0;else{var S=u.suspendedLanes,A=u.pingedLanes;y=(1<<31-Nt(42|n)+1)-1,y&=m&~(S&~A),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(r=!0,Ip(u,y))}else y=ve,y=nr(u,u===Pe?y:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(y&3)===0||Vo(u,y)||(r=!0,Ip(u,y));u=u.next}while(r);Vu=!1}}function E_(){bp()}function bp(){Zr=Bu=!1;var n=0;Wn!==0&&x_()&&(n=Wn);for(var o=bt(),r=null,u=Wr;u!==null;){var m=u.next,y=Rp(u,o);y===0?(u.next=null,r===null?Wr=m:r.next=m,m===null&&(mo=r)):(r=u,(n!==0||(y&3)!==0)&&(Zr=!0)),u=m}je!==0&&je!==5||As(n),Wn!==0&&(Wn=0)}function Rp(n,o){for(var r=n.suspendedLanes,u=n.pingedLanes,m=n.expirationTimes,y=n.pendingLanes&-62914561;0<y;){var S=31-Nt(y),A=1<<S,C=m[S];C===-1?((A&r)===0||(A&u)!==0)&&(m[S]=Xv(A,o)):C<=o&&(n.expiredLanes|=A),y&=~A}if(o=Pe,r=ve,r=nr(n,n===o?r:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,r===0||n===o&&(Me===2||Me===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&el(u),n.callbackNode=null,n.callbackPriority=0;if((r&3)===0||Vo(n,r)){if(o=r&-r,o===n.callbackPriority)return o;switch(u!==null&&el(u),il(r)){case 2:case 8:r=yf;break;case 32:r=Zs;break;case 268435456:r=vf;break;default:r=Zs}return u=Np.bind(null,n),r=ja(r,u),n.callbackPriority=o,n.callbackNode=r,o}return u!==null&&u!==null&&el(u),n.callbackPriority=2,n.callbackNode=null,2}function Np(n,o){if(je!==0&&je!==5)return n.callbackNode=null,n.callbackPriority=0,null;var r=n.callbackNode;if(Qr()&&n.callbackNode!==r)return null;var u=ve;return u=nr(n,n===Pe?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(up(n,u,o),Rp(n,bt()),n.callbackNode!=null&&n.callbackNode===r?Np.bind(null,n):null)}function Ip(n,o){if(Qr())return null;up(n,o,!0)}function A_(){O_(function(){(Re&6)!==0?ja(gf,E_):bp()})}function zu(){if(Wn===0){var n=ji;n===0&&(n=js,js<<=1,(js&261888)===0&&(js=256)),Wn=n}return Wn}function Mp(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:rr(""+n)}function Dp(n,o){var r=o.ownerDocument.createElement("input");return r.name=o.name,r.value=o.value,n.id&&r.setAttribute("form",n.id),o.parentNode.insertBefore(r,o),n=new FormData(n),r.parentNode.removeChild(r),n}function w_(n,o,r,u,m){if(o==="submit"&&r&&r.stateNode===m){var y=Mp((m[_t]||null).action),S=u.submitter;S&&(o=(o=S[_t]||null)?Mp(o.formAction):S.getAttribute("formAction"),o!==null&&(y=o,S=null));var A=new cr("action","action",null,u,m);n.push({event:A,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Wn!==0){var C=S?Dp(m,S):new FormData(m);uu(r,{pending:!0,data:C,method:m.method,action:y},null,C)}}else typeof y=="function"&&(A.preventDefault(),C=S?Dp(m,S):new FormData(m),uu(r,{pending:!0,data:C,method:m.method,action:y},y,C))},currentTarget:m}]})}}for(var Fu=0;Fu<bl.length;Fu++){var $u=bl[Fu],C_=$u.toLowerCase(),b_=$u[0].toUpperCase()+$u.slice(1);Qt(C_,"on"+b_)}Qt(ld,"onAnimationEnd"),Qt(ud,"onAnimationIteration"),Qt(cd,"onAnimationStart"),Qt("dblclick","onDoubleClick"),Qt("focusin","onFocus"),Qt("focusout","onBlur"),Qt(V0,"onTransitionRun"),Qt(z0,"onTransitionStart"),Qt(F0,"onTransitionCancel"),Qt(fd,"onTransitionEnd"),Gi("onMouseEnter",["mouseout","mouseover"]),Gi("onMouseLeave",["mouseout","mouseover"]),Gi("onPointerEnter",["pointerout","pointerover"]),Gi("onPointerLeave",["pointerout","pointerover"]),ci("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ci("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ci("onBeforeInput",["compositionend","keypress","textInput","paste"]),ci("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ci("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ci("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ws="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),R_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ws));function Up(n,o){o=(o&4)!==0;for(var r=0;r<n.length;r++){var u=n[r],m=u.event;u=u.listeners;e:{var y=void 0;if(o)for(var S=u.length-1;0<=S;S--){var A=u[S],C=A.instance,k=A.currentTarget;if(A=A.listener,C!==y&&m.isPropagationStopped())break e;y=A,m.currentTarget=k;try{y(m)}catch(G){hr(G)}m.currentTarget=null,y=C}else for(S=0;S<u.length;S++){if(A=u[S],C=A.instance,k=A.currentTarget,A=A.listener,C!==y&&m.isPropagationStopped())break e;y=A,m.currentTarget=k;try{y(m)}catch(G){hr(G)}m.currentTarget=null,y=C}}}}function ye(n,o){var r=o[ol];r===void 0&&(r=o[ol]=new Set);var u=n+"__bubble";r.has(u)||(xp(o,n,2,!1),r.add(u))}function Ju(n,o,r){var u=0;o&&(u|=4),xp(r,n,u,o)}var jr="_reactListening"+Math.random().toString(36).slice(2);function Yu(n){if(!n[jr]){n[jr]=!0,bf.forEach(function(r){r!=="selectionchange"&&(R_.has(r)||Ju(r,!1,n),Ju(r,!0,n))});var o=n.nodeType===9?n:n.ownerDocument;o===null||o[jr]||(o[jr]=!0,Ju("selectionchange",!1,o))}}function xp(n,o,r,u){switch(lm(o)){case 2:var m=tT;break;case 8:m=nT;break;default:m=lc}r=m.bind(null,o,r,n),m=void 0,!hl||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(m=!0),u?m!==void 0?n.addEventListener(o,r,{capture:!0,passive:m}):n.addEventListener(o,r,!0):m!==void 0?n.addEventListener(o,r,{passive:m}):n.addEventListener(o,r,!1)}function Ku(n,o,r,u,m){var y=u;if((o&1)===0&&(o&2)===0&&u!==null)e:for(;;){if(u===null)return;var S=u.tag;if(S===3||S===4){var A=u.stateNode.containerInfo;if(A===m)break;if(S===4)for(S=u.return;S!==null;){var C=S.tag;if((C===3||C===4)&&S.stateNode.containerInfo===m)return;S=S.return}for(;A!==null;){if(S=Li(A),S===null)return;if(C=S.tag,C===5||C===6||C===26||C===27){u=y=S;continue e}A=A.parentNode}}u=u.return}qf(function(){var k=y,G=fl(r),F=[];e:{var O=dd.get(n);if(O!==void 0){var L=cr,j=n;switch(n){case"keypress":if(lr(r)===0)break e;case"keydown":case"keyup":L=T0;break;case"focusin":j="focus",L=yl;break;case"focusout":j="blur",L=yl;break;case"beforeblur":case"afterblur":L=yl;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":L=Bf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":L=l0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":L=A0;break;case ld:case ud:case cd:L=f0;break;case fd:L=C0;break;case"scroll":case"scrollend":L=r0;break;case"wheel":L=R0;break;case"copy":case"cut":case"paste":L=h0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":L=zf;break;case"toggle":case"beforetoggle":L=I0}var re=(o&4)!==0,ke=!re&&(n==="scroll"||n==="scrollend"),M=re?O!==null?O+"Capture":null:O;re=[];for(var N=k,x;N!==null;){var z=N;if(x=z.stateNode,z=z.tag,z!==5&&z!==26&&z!==27||x===null||M===null||(z=Jo(N,M),z!=null&&re.push(Cs(N,z,x))),ke)break;N=N.return}0<re.length&&(O=new L(O,j,null,r,G),F.push({event:O,listeners:re}))}}if((o&7)===0){e:{if(O=n==="mouseover"||n==="pointerover",L=n==="mouseout"||n==="pointerout",O&&r!==cl&&(j=r.relatedTarget||r.fromElement)&&(Li(j)||j[Oi]))break e;if((L||O)&&(O=G.window===G?G:(O=G.ownerDocument)?O.defaultView||O.parentWindow:window,L?(j=r.relatedTarget||r.toElement,L=k,j=j?Li(j):null,j!==null&&(ke=l(j),re=j.tag,j!==ke||re!==5&&re!==27&&re!==6)&&(j=null)):(L=null,j=k),L!==j)){if(re=Bf,z="onMouseLeave",M="onMouseEnter",N="mouse",(n==="pointerout"||n==="pointerover")&&(re=zf,z="onPointerLeave",M="onPointerEnter",N="pointer"),ke=L==null?O:$o(L),x=j==null?O:$o(j),O=new re(z,N+"leave",L,r,G),O.target=ke,O.relatedTarget=x,z=null,Li(G)===k&&(re=new re(M,N+"enter",j,r,G),re.target=x,re.relatedTarget=ke,z=re),ke=z,L&&j)t:{for(re=N_,M=L,N=j,x=0,z=M;z;z=re(z))x++;z=0;for(var se=N;se;se=re(se))z++;for(;0<x-z;)M=re(M),x--;for(;0<z-x;)N=re(N),z--;for(;x--;){if(M===N||N!==null&&M===N.alternate){re=M;break t}M=re(M),N=re(N)}re=null}else re=null;L!==null&&kp(F,O,L,re,!1),j!==null&&ke!==null&&kp(F,ke,j,re,!0)}}e:{if(O=k?$o(k):window,L=O.nodeName&&O.nodeName.toLowerCase(),L==="select"||L==="input"&&O.type==="file")var we=Wf;else if(Xf(O))if(Zf)we=G0;else{we=P0;var te=L0}else L=O.nodeName,!L||L.toLowerCase()!=="input"||O.type!=="checkbox"&&O.type!=="radio"?k&&ul(k.elementType)&&(we=Wf):we=q0;if(we&&(we=we(n,k))){Qf(F,we,r,G);break e}te&&te(n,O,k),n==="focusout"&&k&&O.type==="number"&&k.memoizedProps.value!=null&&ll(O,"number",O.value)}switch(te=k?$o(k):window,n){case"focusin":(Xf(te)||te.contentEditable==="true")&&($i=te,Al=k,es=null);break;case"focusout":es=Al=$i=null;break;case"mousedown":wl=!0;break;case"contextmenu":case"mouseup":case"dragend":wl=!1,rd(F,r,G);break;case"selectionchange":if(B0)break;case"keydown":case"keyup":rd(F,r,G)}var he;if(_l)e:{switch(n){case"compositionstart":var _e="onCompositionStart";break e;case"compositionend":_e="onCompositionEnd";break e;case"compositionupdate":_e="onCompositionUpdate";break e}_e=void 0}else Fi?Yf(n,r)&&(_e="onCompositionEnd"):n==="keydown"&&r.keyCode===229&&(_e="onCompositionStart");_e&&(Ff&&r.locale!=="ko"&&(Fi||_e!=="onCompositionStart"?_e==="onCompositionEnd"&&Fi&&(he=Gf()):(On=G,pl="value"in On?On.value:On.textContent,Fi=!0)),te=ea(k,_e),0<te.length&&(_e=new Vf(_e,n,null,r,G),F.push({event:_e,listeners:te}),he?_e.data=he:(he=Kf(r),he!==null&&(_e.data=he)))),(he=D0?U0(n,r):x0(n,r))&&(_e=ea(k,"onBeforeInput"),0<_e.length&&(te=new Vf("onBeforeInput","beforeinput",null,r,G),F.push({event:te,listeners:_e}),te.data=he)),w_(F,n,k,r,G)}Up(F,o)})}function Cs(n,o,r){return{instance:n,listener:o,currentTarget:r}}function ea(n,o){for(var r=o+"Capture",u=[];n!==null;){var m=n,y=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||y===null||(m=Jo(n,r),m!=null&&u.unshift(Cs(n,m,y)),m=Jo(n,o),m!=null&&u.push(Cs(n,m,y))),n.tag===3)return u;n=n.return}return[]}function N_(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function kp(n,o,r,u,m){for(var y=o._reactName,S=[];r!==null&&r!==u;){var A=r,C=A.alternate,k=A.stateNode;if(A=A.tag,C!==null&&C===u)break;A!==5&&A!==26&&A!==27||k===null||(C=k,m?(k=Jo(r,y),k!=null&&S.unshift(Cs(r,k,C))):m||(k=Jo(r,y),k!=null&&S.push(Cs(r,k,C)))),r=r.return}S.length!==0&&n.push({event:o,listeners:S})}var I_=/\r\n?/g,M_=/\u0000|\uFFFD/g;function Op(n){return(typeof n=="string"?n:""+n).replace(I_,`
`).replace(M_,"")}function Lp(n,o){return o=Op(o),Op(n)===o}function xe(n,o,r,u,m,y){switch(r){case"children":typeof u=="string"?o==="body"||o==="textarea"&&u===""||Bi(n,u):(typeof u=="number"||typeof u=="bigint")&&o!=="body"&&Bi(n,""+u);break;case"className":or(n,"class",u);break;case"tabIndex":or(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":or(n,r,u);break;case"style":Lf(n,u,y);break;case"data":if(o!=="object"){or(n,"data",u);break}case"src":case"href":if(u===""&&(o!=="a"||r!=="href")){n.removeAttribute(r);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(r);break}u=rr(""+u),n.setAttribute(r,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(r==="formAction"?(o!=="input"&&xe(n,o,"name",m.name,m,null),xe(n,o,"formEncType",m.formEncType,m,null),xe(n,o,"formMethod",m.formMethod,m,null),xe(n,o,"formTarget",m.formTarget,m,null)):(xe(n,o,"encType",m.encType,m,null),xe(n,o,"method",m.method,m,null),xe(n,o,"target",m.target,m,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(r);break}u=rr(""+u),n.setAttribute(r,u);break;case"onClick":u!=null&&(n.onclick=fn);break;case"onScroll":u!=null&&ye("scroll",n);break;case"onScrollEnd":u!=null&&ye("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(r=u.__html,r!=null){if(m.children!=null)throw Error(s(60));n.innerHTML=r}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}r=rr(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(r,""+u):n.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(r,""):n.removeAttribute(r);break;case"capture":case"download":u===!0?n.setAttribute(r,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(r,u):n.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(r,u):n.removeAttribute(r);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(r):n.setAttribute(r,u);break;case"popover":ye("beforetoggle",n),ye("toggle",n),ir(n,"popover",u);break;case"xlinkActuate":cn(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":cn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":cn(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":cn(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":cn(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":cn(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":cn(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":cn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":cn(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":ir(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=o0.get(r)||r,ir(n,r,u))}}function Xu(n,o,r,u,m,y){switch(r){case"style":Lf(n,u,y);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(r=u.__html,r!=null){if(m.children!=null)throw Error(s(60));n.innerHTML=r}}break;case"children":typeof u=="string"?Bi(n,u):(typeof u=="number"||typeof u=="bigint")&&Bi(n,""+u);break;case"onScroll":u!=null&&ye("scroll",n);break;case"onScrollEnd":u!=null&&ye("scrollend",n);break;case"onClick":u!=null&&(n.onclick=fn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Rf.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(m=r.endsWith("Capture"),o=r.slice(2,m?r.length-7:void 0),y=n[_t]||null,y=y!=null?y[r]:null,typeof y=="function"&&n.removeEventListener(o,y,m),typeof u=="function")){typeof y!="function"&&y!==null&&(r in n?n[r]=null:n.hasAttribute(r)&&n.removeAttribute(r)),n.addEventListener(o,u,m);break e}r in n?n[r]=u:u===!0?n.setAttribute(r,""):ir(n,r,u)}}}function ut(n,o,r){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ye("error",n),ye("load",n);var u=!1,m=!1,y;for(y in r)if(r.hasOwnProperty(y)){var S=r[y];if(S!=null)switch(y){case"src":u=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:xe(n,o,y,S,r,null)}}m&&xe(n,o,"srcSet",r.srcSet,r,null),u&&xe(n,o,"src",r.src,r,null);return;case"input":ye("invalid",n);var A=y=S=m=null,C=null,k=null;for(u in r)if(r.hasOwnProperty(u)){var G=r[u];if(G!=null)switch(u){case"name":m=G;break;case"type":S=G;break;case"checked":C=G;break;case"defaultChecked":k=G;break;case"value":y=G;break;case"defaultValue":A=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,o));break;default:xe(n,o,u,G,r,null)}}Uf(n,y,A,C,k,S,m,!1);return;case"select":ye("invalid",n),u=S=y=null;for(m in r)if(r.hasOwnProperty(m)&&(A=r[m],A!=null))switch(m){case"value":y=A;break;case"defaultValue":S=A;break;case"multiple":u=A;default:xe(n,o,m,A,r,null)}o=y,r=S,n.multiple=!!u,o!=null?Hi(n,!!u,o,!1):r!=null&&Hi(n,!!u,r,!0);return;case"textarea":ye("invalid",n),y=m=u=null;for(S in r)if(r.hasOwnProperty(S)&&(A=r[S],A!=null))switch(S){case"value":u=A;break;case"defaultValue":m=A;break;case"children":y=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(s(91));break;default:xe(n,o,S,A,r,null)}kf(n,u,m,y);return;case"option":for(C in r)r.hasOwnProperty(C)&&(u=r[C],u!=null)&&(C==="selected"?n.selected=u&&typeof u!="function"&&typeof u!="symbol":xe(n,o,C,u,r,null));return;case"dialog":ye("beforetoggle",n),ye("toggle",n),ye("cancel",n),ye("close",n);break;case"iframe":case"object":ye("load",n);break;case"video":case"audio":for(u=0;u<ws.length;u++)ye(ws[u],n);break;case"image":ye("error",n),ye("load",n);break;case"details":ye("toggle",n);break;case"embed":case"source":case"link":ye("error",n),ye("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(k in r)if(r.hasOwnProperty(k)&&(u=r[k],u!=null))switch(k){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:xe(n,o,k,u,r,null)}return;default:if(ul(o)){for(G in r)r.hasOwnProperty(G)&&(u=r[G],u!==void 0&&Xu(n,o,G,u,r,void 0));return}}for(A in r)r.hasOwnProperty(A)&&(u=r[A],u!=null&&xe(n,o,A,u,r,null))}function D_(n,o,r,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,y=null,S=null,A=null,C=null,k=null,G=null;for(L in r){var F=r[L];if(r.hasOwnProperty(L)&&F!=null)switch(L){case"checked":break;case"value":break;case"defaultValue":C=F;default:u.hasOwnProperty(L)||xe(n,o,L,null,u,F)}}for(var O in u){var L=u[O];if(F=r[O],u.hasOwnProperty(O)&&(L!=null||F!=null))switch(O){case"type":y=L;break;case"name":m=L;break;case"checked":k=L;break;case"defaultChecked":G=L;break;case"value":S=L;break;case"defaultValue":A=L;break;case"children":case"dangerouslySetInnerHTML":if(L!=null)throw Error(s(137,o));break;default:L!==F&&xe(n,o,O,L,u,F)}}al(n,S,A,C,k,G,y,m);return;case"select":L=S=A=O=null;for(y in r)if(C=r[y],r.hasOwnProperty(y)&&C!=null)switch(y){case"value":break;case"multiple":L=C;default:u.hasOwnProperty(y)||xe(n,o,y,null,u,C)}for(m in u)if(y=u[m],C=r[m],u.hasOwnProperty(m)&&(y!=null||C!=null))switch(m){case"value":O=y;break;case"defaultValue":A=y;break;case"multiple":S=y;default:y!==C&&xe(n,o,m,y,u,C)}o=A,r=S,u=L,O!=null?Hi(n,!!r,O,!1):!!u!=!!r&&(o!=null?Hi(n,!!r,o,!0):Hi(n,!!r,r?[]:"",!1));return;case"textarea":L=O=null;for(A in r)if(m=r[A],r.hasOwnProperty(A)&&m!=null&&!u.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:xe(n,o,A,null,u,m)}for(S in u)if(m=u[S],y=r[S],u.hasOwnProperty(S)&&(m!=null||y!=null))switch(S){case"value":O=m;break;case"defaultValue":L=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(s(91));break;default:m!==y&&xe(n,o,S,m,u,y)}xf(n,O,L);return;case"option":for(var j in r)O=r[j],r.hasOwnProperty(j)&&O!=null&&!u.hasOwnProperty(j)&&(j==="selected"?n.selected=!1:xe(n,o,j,null,u,O));for(C in u)O=u[C],L=r[C],u.hasOwnProperty(C)&&O!==L&&(O!=null||L!=null)&&(C==="selected"?n.selected=O&&typeof O!="function"&&typeof O!="symbol":xe(n,o,C,O,u,L));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var re in r)O=r[re],r.hasOwnProperty(re)&&O!=null&&!u.hasOwnProperty(re)&&xe(n,o,re,null,u,O);for(k in u)if(O=u[k],L=r[k],u.hasOwnProperty(k)&&O!==L&&(O!=null||L!=null))switch(k){case"children":case"dangerouslySetInnerHTML":if(O!=null)throw Error(s(137,o));break;default:xe(n,o,k,O,u,L)}return;default:if(ul(o)){for(var ke in r)O=r[ke],r.hasOwnProperty(ke)&&O!==void 0&&!u.hasOwnProperty(ke)&&Xu(n,o,ke,void 0,u,O);for(G in u)O=u[G],L=r[G],!u.hasOwnProperty(G)||O===L||O===void 0&&L===void 0||Xu(n,o,G,O,u,L);return}}for(var M in r)O=r[M],r.hasOwnProperty(M)&&O!=null&&!u.hasOwnProperty(M)&&xe(n,o,M,null,u,O);for(F in u)O=u[F],L=r[F],!u.hasOwnProperty(F)||O===L||O==null&&L==null||xe(n,o,F,O,u,L)}function Pp(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function U_(){if(typeof performance.getEntriesByType=="function"){for(var n=0,o=0,r=performance.getEntriesByType("resource"),u=0;u<r.length;u++){var m=r[u],y=m.transferSize,S=m.initiatorType,A=m.duration;if(y&&A&&Pp(S)){for(S=0,A=m.responseEnd,u+=1;u<r.length;u++){var C=r[u],k=C.startTime;if(k>A)break;var G=C.transferSize,F=C.initiatorType;G&&Pp(F)&&(C=C.responseEnd,S+=G*(C<A?1:(A-k)/(C-k)))}if(--u,o+=8*(y+S)/(m.duration/1e3),n++,10<n)break}}if(0<n)return o/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Qu=null,Wu=null;function ta(n){return n.nodeType===9?n:n.ownerDocument}function qp(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Gp(n,o){if(n===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&o==="foreignObject"?0:n}function Zu(n,o){return n==="textarea"||n==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var ju=null;function x_(){var n=window.event;return n&&n.type==="popstate"?n===ju?!1:(ju=n,!0):(ju=null,!1)}var Hp=typeof setTimeout=="function"?setTimeout:void 0,k_=typeof clearTimeout=="function"?clearTimeout:void 0,Bp=typeof Promise=="function"?Promise:void 0,O_=typeof queueMicrotask=="function"?queueMicrotask:typeof Bp<"u"?function(n){return Bp.resolve(null).then(n).catch(L_)}:Hp;function L_(n){setTimeout(function(){throw n})}function Zn(n){return n==="head"}function Vp(n,o){var r=o,u=0;do{var m=r.nextSibling;if(n.removeChild(r),m&&m.nodeType===8)if(r=m.data,r==="/$"||r==="/&"){if(u===0){n.removeChild(m),_o(o);return}u--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")u++;else if(r==="html")bs(n.ownerDocument.documentElement);else if(r==="head"){r=n.ownerDocument.head,bs(r);for(var y=r.firstChild;y;){var S=y.nextSibling,A=y.nodeName;y[Fo]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&y.rel.toLowerCase()==="stylesheet"||r.removeChild(y),y=S}}else r==="body"&&bs(n.ownerDocument.body);r=m}while(r);_o(o)}function zp(n,o){var r=n;n=0;do{var u=r.nextSibling;if(r.nodeType===1?o?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(o?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),u&&u.nodeType===8)if(r=u.data,r==="/$"){if(n===0)break;n--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||n++;r=u}while(r)}function ec(n){var o=n.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var r=o;switch(o=o.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":ec(r),sl(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}n.removeChild(r)}}function P_(n,o,r,u){for(;n.nodeType===1;){var m=r;if(n.nodeName.toLowerCase()!==o.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[Fo])switch(o){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(y=n.getAttribute("rel"),y==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(y!==m.rel||n.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||n.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||n.getAttribute("title")!==(m.title==null?null:m.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(y=n.getAttribute("src"),(y!==(m.src==null?null:m.src)||n.getAttribute("type")!==(m.type==null?null:m.type)||n.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&y&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(o==="input"&&n.type==="hidden"){var y=m.name==null?null:""+m.name;if(m.type==="hidden"&&n.getAttribute("name")===y)return n}else return n;if(n=Jt(n.nextSibling),n===null)break}return null}function q_(n,o,r){if(o==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!r||(n=Jt(n.nextSibling),n===null))return null;return n}function Fp(n,o){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=Jt(n.nextSibling),n===null))return null;return n}function tc(n){return n.data==="$?"||n.data==="$~"}function nc(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function G_(n,o){var r=n.ownerDocument;if(n.data==="$~")n._reactRetry=o;else if(n.data!=="$?"||r.readyState!=="loading")o();else{var u=function(){o(),r.removeEventListener("DOMContentLoaded",u)};r.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function Jt(n){for(;n!=null;n=n.nextSibling){var o=n.nodeType;if(o===1||o===3)break;if(o===8){if(o=n.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return n}var ic=null;function $p(n){n=n.nextSibling;for(var o=0;n;){if(n.nodeType===8){var r=n.data;if(r==="/$"||r==="/&"){if(o===0)return Jt(n.nextSibling);o--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||o++}n=n.nextSibling}return null}function Jp(n){n=n.previousSibling;for(var o=0;n;){if(n.nodeType===8){var r=n.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(o===0)return n;o--}else r!=="/$"&&r!=="/&"||o++}n=n.previousSibling}return null}function Yp(n,o,r){switch(o=ta(r),n){case"html":if(n=o.documentElement,!n)throw Error(s(452));return n;case"head":if(n=o.head,!n)throw Error(s(453));return n;case"body":if(n=o.body,!n)throw Error(s(454));return n;default:throw Error(s(451))}}function bs(n){for(var o=n.attributes;o.length;)n.removeAttributeNode(o[0]);sl(n)}var Yt=new Map,Kp=new Set;function na(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Rn=Q.d;Q.d={f:H_,r:B_,D:V_,C:z_,L:F_,m:$_,X:Y_,S:J_,M:K_};function H_(){var n=Rn.f(),o=Yr();return n||o}function B_(n){var o=Pi(n);o!==null&&o.tag===5&&o.type==="form"?fh(o):Rn.r(n)}var go=typeof document>"u"?null:document;function Xp(n,o,r){var u=go;if(u&&typeof o=="string"&&o){var m=Gt(o);m='link[rel="'+n+'"][href="'+m+'"]',typeof r=="string"&&(m+='[crossorigin="'+r+'"]'),Kp.has(m)||(Kp.add(m),n={rel:n,crossOrigin:r,href:o},u.querySelector(m)===null&&(o=u.createElement("link"),ut(o,"link",n),nt(o),u.head.appendChild(o)))}}function V_(n){Rn.D(n),Xp("dns-prefetch",n,null)}function z_(n,o){Rn.C(n,o),Xp("preconnect",n,o)}function F_(n,o,r){Rn.L(n,o,r);var u=go;if(u&&n&&o){var m='link[rel="preload"][as="'+Gt(o)+'"]';o==="image"&&r&&r.imageSrcSet?(m+='[imagesrcset="'+Gt(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(m+='[imagesizes="'+Gt(r.imageSizes)+'"]')):m+='[href="'+Gt(n)+'"]';var y=m;switch(o){case"style":y=yo(n);break;case"script":y=vo(n)}Yt.has(y)||(n=T({rel:"preload",href:o==="image"&&r&&r.imageSrcSet?void 0:n,as:o},r),Yt.set(y,n),u.querySelector(m)!==null||o==="style"&&u.querySelector(Rs(y))||o==="script"&&u.querySelector(Ns(y))||(o=u.createElement("link"),ut(o,"link",n),nt(o),u.head.appendChild(o)))}}function $_(n,o){Rn.m(n,o);var r=go;if(r&&n){var u=o&&typeof o.as=="string"?o.as:"script",m='link[rel="modulepreload"][as="'+Gt(u)+'"][href="'+Gt(n)+'"]',y=m;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=vo(n)}if(!Yt.has(y)&&(n=T({rel:"modulepreload",href:n},o),Yt.set(y,n),r.querySelector(m)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Ns(y)))return}u=r.createElement("link"),ut(u,"link",n),nt(u),r.head.appendChild(u)}}}function J_(n,o,r){Rn.S(n,o,r);var u=go;if(u&&n){var m=qi(u).hoistableStyles,y=yo(n);o=o||"default";var S=m.get(y);if(!S){var A={loading:0,preload:null};if(S=u.querySelector(Rs(y)))A.loading=5;else{n=T({rel:"stylesheet",href:n,"data-precedence":o},r),(r=Yt.get(y))&&oc(n,r);var C=S=u.createElement("link");nt(C),ut(C,"link",n),C._p=new Promise(function(k,G){C.onload=k,C.onerror=G}),C.addEventListener("load",function(){A.loading|=1}),C.addEventListener("error",function(){A.loading|=2}),A.loading|=4,ia(S,o,u)}S={type:"stylesheet",instance:S,count:1,state:A},m.set(y,S)}}}function Y_(n,o){Rn.X(n,o);var r=go;if(r&&n){var u=qi(r).hoistableScripts,m=vo(n),y=u.get(m);y||(y=r.querySelector(Ns(m)),y||(n=T({src:n,async:!0},o),(o=Yt.get(m))&&sc(n,o),y=r.createElement("script"),nt(y),ut(y,"link",n),r.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(m,y))}}function K_(n,o){Rn.M(n,o);var r=go;if(r&&n){var u=qi(r).hoistableScripts,m=vo(n),y=u.get(m);y||(y=r.querySelector(Ns(m)),y||(n=T({src:n,async:!0,type:"module"},o),(o=Yt.get(m))&&sc(n,o),y=r.createElement("script"),nt(y),ut(y,"link",n),r.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(m,y))}}function Qp(n,o,r,u){var m=(m=me.current)?na(m):null;if(!m)throw Error(s(446));switch(n){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(o=yo(r.href),r=qi(m).hoistableStyles,u=r.get(o),u||(u={type:"style",instance:null,count:0,state:null},r.set(o,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){n=yo(r.href);var y=qi(m).hoistableStyles,S=y.get(n);if(S||(m=m.ownerDocument||m,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(n,S),(y=m.querySelector(Rs(n)))&&!y._p&&(S.instance=y,S.state.loading=5),Yt.has(n)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},Yt.set(n,r),y||X_(m,n,r,S.state))),o&&u===null)throw Error(s(528,""));return S}if(o&&u!==null)throw Error(s(529,""));return null;case"script":return o=r.async,r=r.src,typeof r=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=vo(r),r=qi(m).hoistableScripts,u=r.get(o),u||(u={type:"script",instance:null,count:0,state:null},r.set(o,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,n))}}function yo(n){return'href="'+Gt(n)+'"'}function Rs(n){return'link[rel="stylesheet"]['+n+"]"}function Wp(n){return T({},n,{"data-precedence":n.precedence,precedence:null})}function X_(n,o,r,u){n.querySelector('link[rel="preload"][as="style"]['+o+"]")?u.loading=1:(o=n.createElement("link"),u.preload=o,o.addEventListener("load",function(){return u.loading|=1}),o.addEventListener("error",function(){return u.loading|=2}),ut(o,"link",r),nt(o),n.head.appendChild(o))}function vo(n){return'[src="'+Gt(n)+'"]'}function Ns(n){return"script[async]"+n}function Zp(n,o,r){if(o.count++,o.instance===null)switch(o.type){case"style":var u=n.querySelector('style[data-href~="'+Gt(r.href)+'"]');if(u)return o.instance=u,nt(u),u;var m=T({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),nt(u),ut(u,"style",m),ia(u,r.precedence,n),o.instance=u;case"stylesheet":m=yo(r.href);var y=n.querySelector(Rs(m));if(y)return o.state.loading|=4,o.instance=y,nt(y),y;u=Wp(r),(m=Yt.get(m))&&oc(u,m),y=(n.ownerDocument||n).createElement("link"),nt(y);var S=y;return S._p=new Promise(function(A,C){S.onload=A,S.onerror=C}),ut(y,"link",u),o.state.loading|=4,ia(y,r.precedence,n),o.instance=y;case"script":return y=vo(r.src),(m=n.querySelector(Ns(y)))?(o.instance=m,nt(m),m):(u=r,(m=Yt.get(y))&&(u=T({},r),sc(u,m)),n=n.ownerDocument||n,m=n.createElement("script"),nt(m),ut(m,"link",u),n.head.appendChild(m),o.instance=m);case"void":return null;default:throw Error(s(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(u=o.instance,o.state.loading|=4,ia(u,r.precedence,n));return o.instance}function ia(n,o,r){for(var u=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=u.length?u[u.length-1]:null,y=m,S=0;S<u.length;S++){var A=u[S];if(A.dataset.precedence===o)y=A;else if(y!==m)break}y?y.parentNode.insertBefore(n,y.nextSibling):(o=r.nodeType===9?r.head:r,o.insertBefore(n,o.firstChild))}function oc(n,o){n.crossOrigin==null&&(n.crossOrigin=o.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=o.referrerPolicy),n.title==null&&(n.title=o.title)}function sc(n,o){n.crossOrigin==null&&(n.crossOrigin=o.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=o.referrerPolicy),n.integrity==null&&(n.integrity=o.integrity)}var oa=null;function jp(n,o,r){if(oa===null){var u=new Map,m=oa=new Map;m.set(r,u)}else m=oa,u=m.get(r),u||(u=new Map,m.set(r,u));if(u.has(n))return u;for(u.set(n,null),r=r.getElementsByTagName(n),m=0;m<r.length;m++){var y=r[m];if(!(y[Fo]||y[st]||n==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var S=y.getAttribute(o)||"";S=n+S;var A=u.get(S);A?A.push(y):u.set(S,[y])}}return u}function em(n,o,r){n=n.ownerDocument||n,n.head.insertBefore(r,o==="title"?n.querySelector("head > title"):null)}function Q_(n,o,r){if(r===1||o.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;return o.rel==="stylesheet"?(n=o.disabled,typeof o.precedence=="string"&&n==null):!0;case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function tm(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function W_(n,o,r,u){if(r.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var m=yo(u.href),y=o.querySelector(Rs(m));if(y){o=y._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(n.count++,n=sa.bind(n),o.then(n,n)),r.state.loading|=4,r.instance=y,nt(y);return}y=o.ownerDocument||o,u=Wp(u),(m=Yt.get(m))&&oc(u,m),y=y.createElement("link"),nt(y);var S=y;S._p=new Promise(function(A,C){S.onload=A,S.onerror=C}),ut(y,"link",u),r.instance=y}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(r,o),(o=r.state.preload)&&(r.state.loading&3)===0&&(n.count++,r=sa.bind(n),o.addEventListener("load",r),o.addEventListener("error",r))}}var rc=0;function Z_(n,o){return n.stylesheets&&n.count===0&&aa(n,n.stylesheets),0<n.count||0<n.imgCount?function(r){var u=setTimeout(function(){if(n.stylesheets&&aa(n,n.stylesheets),n.unsuspend){var y=n.unsuspend;n.unsuspend=null,y()}},6e4+o);0<n.imgBytes&&rc===0&&(rc=62500*U_());var m=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&aa(n,n.stylesheets),n.unsuspend)){var y=n.unsuspend;n.unsuspend=null,y()}},(n.imgBytes>rc?50:800)+o);return n.unsuspend=r,function(){n.unsuspend=null,clearTimeout(u),clearTimeout(m)}}:null}function sa(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)aa(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var ra=null;function aa(n,o){n.stylesheets=null,n.unsuspend!==null&&(n.count++,ra=new Map,o.forEach(j_,n),ra=null,sa.call(n))}function j_(n,o){if(!(o.state.loading&4)){var r=ra.get(n);if(r)var u=r.get(null);else{r=new Map,ra.set(n,r);for(var m=n.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<m.length;y++){var S=m[y];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(r.set(S.dataset.precedence,S),u=S)}u&&r.set(null,u)}m=o.instance,S=m.getAttribute("data-precedence"),y=r.get(S)||u,y===u&&r.set(null,m),r.set(S,m),this.count++,u=sa.bind(this),m.addEventListener("load",u),m.addEventListener("error",u),y?y.parentNode.insertBefore(m,y.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(m,n.firstChild)),o.state.loading|=4}}var Is={$$typeof:U,Provider:null,Consumer:null,_currentValue:ie,_currentValue2:ie,_threadCount:0};function eT(n,o,r,u,m,y,S,A,C){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=tl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tl(0),this.hiddenUpdates=tl(null),this.identifierPrefix=u,this.onUncaughtError=m,this.onCaughtError=y,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=C,this.incompleteTransitions=new Map}function nm(n,o,r,u,m,y,S,A,C,k,G,F){return n=new eT(n,o,r,S,C,k,G,F,A),o=1,y===!0&&(o|=24),y=Mt(3,null,null,o),n.current=y,y.stateNode=n,o=Gl(),o.refCount++,n.pooledCache=o,o.refCount++,y.memoizedState={element:u,isDehydrated:r,cache:o},zl(y),n}function im(n){return n?(n=Ki,n):Ki}function om(n,o,r,u,m,y){m=im(m),u.context===null?u.context=m:u.pendingContext=m,u=Bn(o),u.payload={element:r},y=y===void 0?null:y,y!==null&&(u.callback=y),r=Vn(n,u,o),r!==null&&(Ct(r,n,o),as(r,n,o))}function sm(n,o){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var r=n.retryLane;n.retryLane=r!==0&&r<o?r:o}}function ac(n,o){sm(n,o),(n=n.alternate)&&sm(n,o)}function rm(n){if(n.tag===13||n.tag===31){var o=pi(n,67108864);o!==null&&Ct(o,n,67108864),ac(n,67108864)}}function am(n){if(n.tag===13||n.tag===31){var o=Ot();o=nl(o);var r=pi(n,o);r!==null&&Ct(r,n,o),ac(n,o)}}var la=!0;function tT(n,o,r,u){var m=H.T;H.T=null;var y=Q.p;try{Q.p=2,lc(n,o,r,u)}finally{Q.p=y,H.T=m}}function nT(n,o,r,u){var m=H.T;H.T=null;var y=Q.p;try{Q.p=8,lc(n,o,r,u)}finally{Q.p=y,H.T=m}}function lc(n,o,r,u){if(la){var m=uc(u);if(m===null)Ku(n,o,u,ua,r),um(n,u);else if(oT(m,n,o,r,u))u.stopPropagation();else if(um(n,u),o&4&&-1<iT.indexOf(n)){for(;m!==null;){var y=Pi(m);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var S=ui(y.pendingLanes);if(S!==0){var A=y;for(A.pendingLanes|=2,A.entangledLanes|=2;S;){var C=1<<31-Nt(S);A.entanglements[1]|=C,S&=~C}un(y),(Re&6)===0&&($r=bt()+500,As(0))}}break;case 31:case 13:A=pi(y,2),A!==null&&Ct(A,y,2),Yr(),ac(y,2)}if(y=uc(u),y===null&&Ku(n,o,u,ua,r),y===m)break;m=y}m!==null&&u.stopPropagation()}else Ku(n,o,u,null,r)}}function uc(n){return n=fl(n),cc(n)}var ua=null;function cc(n){if(ua=null,n=Li(n),n!==null){var o=l(n);if(o===null)n=null;else{var r=o.tag;if(r===13){if(n=c(o),n!==null)return n;n=null}else if(r===31){if(n=h(o),n!==null)return n;n=null}else if(r===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;n=null}else o!==n&&(n=null)}}return ua=n,null}function lm(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Vv()){case gf:return 2;case yf:return 8;case Zs:case zv:return 32;case vf:return 268435456;default:return 32}default:return 32}}var fc=!1,jn=null,ei=null,ti=null,Ms=new Map,Ds=new Map,ni=[],iT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function um(n,o){switch(n){case"focusin":case"focusout":jn=null;break;case"dragenter":case"dragleave":ei=null;break;case"mouseover":case"mouseout":ti=null;break;case"pointerover":case"pointerout":Ms.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ds.delete(o.pointerId)}}function Us(n,o,r,u,m,y){return n===null||n.nativeEvent!==y?(n={blockedOn:o,domEventName:r,eventSystemFlags:u,nativeEvent:y,targetContainers:[m]},o!==null&&(o=Pi(o),o!==null&&rm(o)),n):(n.eventSystemFlags|=u,o=n.targetContainers,m!==null&&o.indexOf(m)===-1&&o.push(m),n)}function oT(n,o,r,u,m){switch(o){case"focusin":return jn=Us(jn,n,o,r,u,m),!0;case"dragenter":return ei=Us(ei,n,o,r,u,m),!0;case"mouseover":return ti=Us(ti,n,o,r,u,m),!0;case"pointerover":var y=m.pointerId;return Ms.set(y,Us(Ms.get(y)||null,n,o,r,u,m)),!0;case"gotpointercapture":return y=m.pointerId,Ds.set(y,Us(Ds.get(y)||null,n,o,r,u,m)),!0}return!1}function cm(n){var o=Li(n.target);if(o!==null){var r=l(o);if(r!==null){if(o=r.tag,o===13){if(o=c(r),o!==null){n.blockedOn=o,wf(n.priority,function(){am(r)});return}}else if(o===31){if(o=h(r),o!==null){n.blockedOn=o,wf(n.priority,function(){am(r)});return}}else if(o===3&&r.stateNode.current.memoizedState.isDehydrated){n.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}n.blockedOn=null}function ca(n){if(n.blockedOn!==null)return!1;for(var o=n.targetContainers;0<o.length;){var r=uc(n.nativeEvent);if(r===null){r=n.nativeEvent;var u=new r.constructor(r.type,r);cl=u,r.target.dispatchEvent(u),cl=null}else return o=Pi(r),o!==null&&rm(o),n.blockedOn=r,!1;o.shift()}return!0}function fm(n,o,r){ca(n)&&r.delete(o)}function sT(){fc=!1,jn!==null&&ca(jn)&&(jn=null),ei!==null&&ca(ei)&&(ei=null),ti!==null&&ca(ti)&&(ti=null),Ms.forEach(fm),Ds.forEach(fm)}function fa(n,o){n.blockedOn===o&&(n.blockedOn=null,fc||(fc=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,sT)))}var da=null;function dm(n){da!==n&&(da=n,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){da===n&&(da=null);for(var o=0;o<n.length;o+=3){var r=n[o],u=n[o+1],m=n[o+2];if(typeof u!="function"){if(cc(u||r)===null)continue;break}var y=Pi(r);y!==null&&(n.splice(o,3),o-=3,uu(y,{pending:!0,data:m,method:r.method,action:u},u,m))}}))}function _o(n){function o(C){return fa(C,n)}jn!==null&&fa(jn,n),ei!==null&&fa(ei,n),ti!==null&&fa(ti,n),Ms.forEach(o),Ds.forEach(o);for(var r=0;r<ni.length;r++){var u=ni[r];u.blockedOn===n&&(u.blockedOn=null)}for(;0<ni.length&&(r=ni[0],r.blockedOn===null);)cm(r),r.blockedOn===null&&ni.shift();if(r=(n.ownerDocument||n).$$reactFormReplay,r!=null)for(u=0;u<r.length;u+=3){var m=r[u],y=r[u+1],S=m[_t]||null;if(typeof y=="function")S||dm(r);else if(S){var A=null;if(y&&y.hasAttribute("formAction")){if(m=y,S=y[_t]||null)A=S.formAction;else if(cc(m)!==null)continue}else A=S.action;typeof A=="function"?r[u+1]=A:(r.splice(u,3),u-=3),dm(r)}}}function hm(){function n(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(S){return m=S})},focusReset:"manual",scroll:"manual"})}function o(){m!==null&&(m(),m=null),u||setTimeout(r,20)}function r(){if(!u&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,m=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(r,100),function(){u=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),m!==null&&(m(),m=null)}}}function dc(n){this._internalRoot=n}ha.prototype.render=dc.prototype.render=function(n){var o=this._internalRoot;if(o===null)throw Error(s(409));var r=o.current,u=Ot();om(r,u,n,o,null,null)},ha.prototype.unmount=dc.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var o=n.containerInfo;om(n.current,2,null,n,null,null),Yr(),o[Oi]=null}};function ha(n){this._internalRoot=n}ha.prototype.unstable_scheduleHydration=function(n){if(n){var o=Af();n={blockedOn:null,target:n,priority:o};for(var r=0;r<ni.length&&o!==0&&o<ni[r].priority;r++);ni.splice(r,0,n),r===0&&cm(n)}};var pm=e.version;if(pm!=="19.2.4")throw Error(s(527,pm,"19.2.4"));Q.findDOMNode=function(n){var o=n._reactInternals;if(o===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=p(o),n=n!==null?v(n):null,n=n===null?null:n.stateNode,n};var rT={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pa.isDisabled&&pa.supportsFiber)try{Bo=pa.inject(rT),Rt=pa}catch{}}return ks.createRoot=function(n,o){if(!a(n))throw Error(s(299));var r=!1,u="",m=Sh,y=Eh,S=Ah;return o!=null&&(o.unstable_strictMode===!0&&(r=!0),o.identifierPrefix!==void 0&&(u=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(y=o.onCaughtError),o.onRecoverableError!==void 0&&(S=o.onRecoverableError)),o=nm(n,1,!1,null,null,r,u,null,m,y,S,hm),n[Oi]=o.current,Yu(n),new dc(o)},ks.hydrateRoot=function(n,o,r){if(!a(n))throw Error(s(299));var u=!1,m="",y=Sh,S=Eh,A=Ah,C=null;return r!=null&&(r.unstable_strictMode===!0&&(u=!0),r.identifierPrefix!==void 0&&(m=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(S=r.onCaughtError),r.onRecoverableError!==void 0&&(A=r.onRecoverableError),r.formState!==void 0&&(C=r.formState)),o=nm(n,1,!0,o,r??null,u,m,C,y,S,A,hm),o.context=im(null),r=o.current,u=Ot(),u=nl(u),m=Bn(u),m.callback=null,Vn(r,m,u),r=u,o.current.lanes=r,zo(o,r),un(o),n[Oi]=o.current,Yu(n),new ha(o)},ks.version="19.2.4",ks}var wm;function gT(){if(wm)return pc.exports;wm=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),pc.exports=mT(),pc.exports}var yT=gT(),Ne=ef();function Ga(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(i[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(t);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(t,s[a])&&(i[s[a]]=t[s[a]]);return i}function vT(t,e,i,s){function a(l){return l instanceof i?l:new i(function(c){c(l)})}return new(i||(i=Promise))(function(l,c){function h(v){try{p(s.next(v))}catch(T){c(T)}}function g(v){try{p(s.throw(v))}catch(T){c(T)}}function p(v){v.done?l(v.value):a(v.value).then(h,g)}p((s=s.apply(t,e||[])).next())})}const _T=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class tf extends Error{constructor(e,i="FunctionsError",s){super(e),this.name=i,this.context=s}}class TT extends tf{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Cm extends tf{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class bm extends tf{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Ic;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Ic||(Ic={}));class ST{constructor(e,{headers:i={},customFetch:s,region:a=Ic.Any}={}){this.url=e,this.headers=i,this.region=a,this.fetch=_T(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return vT(this,arguments,void 0,function*(i,s={}){var a;let l,c;try{const{headers:h,method:g,body:p,signal:v,timeout:T}=s;let _={},{region:E}=s;E||(E=this.region);const w=new URL(`${this.url}/${i}`);E&&E!=="any"&&(_["x-region"]=E,w.searchParams.set("forceFunctionRegion",E));let b;p&&(h&&!Object.prototype.hasOwnProperty.call(h,"Content-Type")||!h)?typeof Blob<"u"&&p instanceof Blob||p instanceof ArrayBuffer?(_["Content-Type"]="application/octet-stream",b=p):typeof p=="string"?(_["Content-Type"]="text/plain",b=p):typeof FormData<"u"&&p instanceof FormData?b=p:(_["Content-Type"]="application/json",b=JSON.stringify(p)):p&&typeof p!="string"&&!(typeof Blob<"u"&&p instanceof Blob)&&!(p instanceof ArrayBuffer)&&!(typeof FormData<"u"&&p instanceof FormData)?b=JSON.stringify(p):b=p;let R=v;T&&(c=new AbortController,l=setTimeout(()=>c.abort(),T),v?(R=c.signal,v.addEventListener("abort",()=>c.abort())):R=c.signal);const D=yield this.fetch(w.toString(),{method:g||"POST",headers:Object.assign(Object.assign(Object.assign({},_),this.headers),h),body:b,signal:R}).catch(X=>{throw new TT(X)}),q=D.headers.get("x-relay-error");if(q&&q==="true")throw new Cm(D);if(!D.ok)throw new bm(D);let U=((a=D.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),V;return U==="application/json"?V=yield D.json():U==="application/octet-stream"||U==="application/pdf"?V=yield D.blob():U==="text/event-stream"?V=D:U==="multipart/form-data"?V=yield D.formData():V=yield D.text(),{data:V,error:null,response:D}}catch(h){return{data:null,error:h,response:h instanceof bm||h instanceof Cm?h.context:void 0}}finally{l&&clearTimeout(l)}})}}var ET=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},AT=class{constructor(t){var e,i,s;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(i=t.isMaybeSingle)!==null&&i!==void 0?i:!1,this.urlLengthLimit=(s=t.urlLengthLimit)!==null&&s!==void 0?s:8e3,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var i=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let a=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{let c=null,h=null,g=null,p=l.status,v=l.statusText;if(l.ok){var T,_;if(i.method!=="HEAD"){var E;const D=await l.text();D===""||(i.headers.get("Accept")==="text/csv"||i.headers.get("Accept")&&(!((E=i.headers.get("Accept"))===null||E===void 0)&&E.includes("application/vnd.pgrst.plan+text"))?h=D:h=JSON.parse(D))}const b=(T=i.headers.get("Prefer"))===null||T===void 0?void 0:T.match(/count=(exact|planned|estimated)/),R=(_=l.headers.get("content-range"))===null||_===void 0?void 0:_.split("/");b&&R&&R.length>1&&(g=parseInt(R[1])),i.isMaybeSingle&&i.method==="GET"&&Array.isArray(h)&&(h.length>1?(c={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,g=null,p=406,v="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{var w;const b=await l.text();try{c=JSON.parse(b),Array.isArray(c)&&l.status===404&&(h=[],c=null,p=200,v="OK")}catch{l.status===404&&b===""?(p=204,v="No Content"):c={message:b}}if(c&&i.isMaybeSingle&&(!(c==null||(w=c.details)===null||w===void 0)&&w.includes("0 rows"))&&(c=null,p=200,v="OK"),c&&i.shouldThrowOnError)throw new ET(c)}return{error:c,data:h,count:g,status:p,statusText:v}});return this.shouldThrowOnError||(a=a.catch(l=>{var c;let h="",g="",p="";const v=l?.cause;if(v){var T,_,E,w;const D=(T=v?.message)!==null&&T!==void 0?T:"",q=(_=v?.code)!==null&&_!==void 0?_:"";h=`${(E=l?.name)!==null&&E!==void 0?E:"FetchError"}: ${l?.message}`,h+=`

Caused by: ${(w=v?.name)!==null&&w!==void 0?w:"Error"}: ${D}`,q&&(h+=` (${q})`),v?.stack&&(h+=`
${v.stack}`)}else{var b;h=(b=l?.stack)!==null&&b!==void 0?b:""}const R=this.url.toString().length;return l?.name==="AbortError"||l?.code==="ABORT_ERR"?(p="",g="Request was aborted (timeout or manual cancellation)",R>this.urlLengthLimit&&(g+=`. Note: Your request URL is ${R} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):(v?.name==="HeadersOverflowError"||v?.code==="UND_ERR_HEADERS_OVERFLOW")&&(p="",g="HTTP headers exceeded server limits (typically 16KB)",R>this.urlLengthLimit&&(g+=`. Your request URL is ${R} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(c=l?.name)!==null&&c!==void 0?c:"FetchError"}: ${l?.message}`,details:h,hint:g,code:p},data:null,count:null,status:0,statusText:""}})),a.then(t,e)}returns(){return this}overrideTypes(){return this}},wT=class extends AT{select(t){let e=!1;const i=(t??"*").split("").map(s=>/\s/.test(s)&&!e?"":(s==='"'&&(e=!e),s)).join("");return this.url.searchParams.set("select",i),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:i,foreignTable:s,referencedTable:a=s}={}){const l=a?`${a}.order`:"order",c=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${c?`${c},`:""}${t}.${e?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:i=e}={}){const s=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,e,{foreignTable:i,referencedTable:s=i}={}){const a=typeof s>"u"?"offset":`${s}.offset`,l=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(a,`${t}`),this.url.searchParams.set(l,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:i=!1,buffers:s=!1,wal:a=!1,format:l="text"}={}){var c;const h=[t?"analyze":null,e?"verbose":null,i?"settings":null,s?"buffers":null,a?"wal":null].filter(Boolean).join("|"),g=(c=this.headers.get("Accept"))!==null&&c!==void 0?c:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${l}; for="${g}"; options=${h};`),l==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const Rm=new RegExp("[,()]");var bo=class extends wT{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const i=Array.from(new Set(e)).map(s=>typeof s=="string"&&Rm.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${i})`),this}notIn(t,e){const i=Array.from(new Set(e)).map(s=>typeof s=="string"&&Rm.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`not.in.(${i})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:i,type:s}={}){let a="";s==="plain"?a="pl":s==="phrase"?a="ph":s==="websearch"&&(a="w");const l=i===void 0?"":`(${i})`;return this.url.searchParams.append(t,`${a}fts${l}.${e}`),this}match(t){return Object.entries(t).forEach(([e,i])=>{this.url.searchParams.append(e,`eq.${i}`)}),this}not(t,e,i){return this.url.searchParams.append(t,`not.${e}.${i}`),this}or(t,{foreignTable:e,referencedTable:i=e}={}){const s=i?`${i}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,e,i){return this.url.searchParams.append(t,`${e}.${i}`),this}},CT=class{constructor(t,{headers:e={},schema:i,fetch:s,urlLengthLimit:a=8e3}){this.url=t,this.headers=new Headers(e),this.schema=i,this.fetch=s,this.urlLengthLimit=a}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(t,e){const{head:i=!1,count:s}=e??{},a=i?"HEAD":"GET";let l=!1;const c=(t??"*").split("").map(p=>/\s/.test(p)&&!l?"":(p==='"'&&(l=!l),p)).join(""),{url:h,headers:g}=this.cloneRequestState();return h.searchParams.set("select",c),s&&g.append("Prefer",`count=${s}`),new bo({method:a,url:h,headers:g,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(t,{count:e,defaultToNull:i=!0}={}){var s;const a="POST",{url:l,headers:c}=this.cloneRequestState();if(e&&c.append("Prefer",`count=${e}`),i||c.append("Prefer","missing=default"),Array.isArray(t)){const h=t.reduce((g,p)=>g.concat(Object.keys(p)),[]);if(h.length>0){const g=[...new Set(h)].map(p=>`"${p}"`);l.searchParams.set("columns",g.join(","))}}return new bo({method:a,url:l,headers:c,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(t,{onConflict:e,ignoreDuplicates:i=!1,count:s,defaultToNull:a=!0}={}){var l;const c="POST",{url:h,headers:g}=this.cloneRequestState();if(g.append("Prefer",`resolution=${i?"ignore":"merge"}-duplicates`),e!==void 0&&h.searchParams.set("on_conflict",e),s&&g.append("Prefer",`count=${s}`),a||g.append("Prefer","missing=default"),Array.isArray(t)){const p=t.reduce((v,T)=>v.concat(Object.keys(T)),[]);if(p.length>0){const v=[...new Set(p)].map(T=>`"${T}"`);h.searchParams.set("columns",v.join(","))}}return new bo({method:c,url:h,headers:g,schema:this.schema,body:t,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch,urlLengthLimit:this.urlLengthLimit})}update(t,{count:e}={}){var i;const s="PATCH",{url:a,headers:l}=this.cloneRequestState();return e&&l.append("Prefer",`count=${e}`),new bo({method:s,url:a,headers:l,schema:this.schema,body:t,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:t}={}){var e;const i="DELETE",{url:s,headers:a}=this.cloneRequestState();return t&&a.append("Prefer",`count=${t}`),new bo({method:i,url:s,headers:a,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch,urlLengthLimit:this.urlLengthLimit})}};function Vs(t){"@babel/helpers - typeof";return Vs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vs(t)}function bT(t,e){if(Vs(t)!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var s=i.call(t,e);if(Vs(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function RT(t){var e=bT(t,"string");return Vs(e)=="symbol"?e:e+""}function NT(t,e,i){return(e=RT(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Nm(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),i.push.apply(i,s)}return i}function ma(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?Nm(Object(i),!0).forEach(function(s){NT(t,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Nm(Object(i)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(i,s))})}return t}var IT=class My{constructor(e,{headers:i={},schema:s,fetch:a,timeout:l,urlLengthLimit:c=8e3}={}){this.url=e,this.headers=new Headers(i),this.schemaName=s,this.urlLengthLimit=c;const h=a??globalThis.fetch;l!==void 0&&l>0?this.fetch=(g,p)=>{const v=new AbortController,T=setTimeout(()=>v.abort(),l),_=p?.signal;if(_){if(_.aborted)return clearTimeout(T),h(g,p);const E=()=>{clearTimeout(T),v.abort()};return _.addEventListener("abort",E,{once:!0}),h(g,ma(ma({},p),{},{signal:v.signal})).finally(()=>{clearTimeout(T),_.removeEventListener("abort",E)})}return h(g,ma(ma({},p),{},{signal:v.signal})).finally(()=>clearTimeout(T))}:this.fetch=h}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new CT(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(e){return new My(this.url,{headers:this.headers,schema:e,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(e,i={},{head:s=!1,get:a=!1,count:l}={}){var c;let h;const g=new URL(`${this.url}/rpc/${e}`);let p;const v=E=>E!==null&&typeof E=="object"&&(!Array.isArray(E)||E.some(v)),T=s&&Object.values(i).some(v);T?(h="POST",p=i):s||a?(h=s?"HEAD":"GET",Object.entries(i).filter(([E,w])=>w!==void 0).map(([E,w])=>[E,Array.isArray(w)?`{${w.join(",")}}`:`${w}`]).forEach(([E,w])=>{g.searchParams.append(E,w)})):(h="POST",p=i);const _=new Headers(this.headers);return T?_.set("Prefer",l?`count=${l},return=minimal`:"return=minimal"):l&&_.set("Prefer",`count=${l}`),new bo({method:h,url:g,headers:_,schema:this.schemaName,body:p,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch,urlLengthLimit:this.urlLengthLimit})}};class MT{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const i=globalThis.process;if(i){const s=i.versions;if(s&&s.node){const a=s.node,l=parseInt(a.replace(/^v/,"").split(".")[0]);return l>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${l} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${l} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let i=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(i+=`

Suggested solution: ${e.workaround}`),new Error(i)}static createWebSocket(e,i){const s=this.getWebSocketConstructor();return new s(e,i)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const DT="2.95.3",UT=`realtime-js/${DT}`,xT="1.0.0",Dy="2.0.0",Im=Dy,Mc=1e4,kT=1e3,OT=100;var oi;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(oi||(oi={}));var et;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(et||(et={}));var tn;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(tn||(tn={}));var Dc;(function(t){t.websocket="websocket"})(Dc||(Dc={}));var Di;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Di||(Di={}));class LT{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,i){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return i(this._binaryEncodeUserBroadcastPush(e));let s=[e.join_ref,e.ref,e.topic,e.event,e.payload];return i(JSON.stringify(s))}_binaryEncodeUserBroadcastPush(e){var i;return this._isArrayBuffer((i=e.payload)===null||i===void 0?void 0:i.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var i,s;const a=(s=(i=e.payload)===null||i===void 0?void 0:i.payload)!==null&&s!==void 0?s:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(e){var i,s;const a=(s=(i=e.payload)===null||i===void 0?void 0:i.payload)!==null&&s!==void 0?s:{},c=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,c)}_encodeUserBroadcastPush(e,i,s){var a,l;const c=e.topic,h=(a=e.ref)!==null&&a!==void 0?a:"",g=(l=e.join_ref)!==null&&l!==void 0?l:"",p=e.payload.event,v=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},T=Object.keys(v).length===0?"":JSON.stringify(v);if(g.length>255)throw new Error(`joinRef length ${g.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`ref length ${h.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`topic length ${c.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`userEvent length ${p.length} exceeds maximum of 255`);if(T.length>255)throw new Error(`metadata length ${T.length} exceeds maximum of 255`);const _=this.USER_BROADCAST_PUSH_META_LENGTH+g.length+h.length+c.length+p.length+T.length,E=new ArrayBuffer(this.HEADER_LENGTH+_);let w=new DataView(E),b=0;w.setUint8(b++,this.KINDS.userBroadcastPush),w.setUint8(b++,g.length),w.setUint8(b++,h.length),w.setUint8(b++,c.length),w.setUint8(b++,p.length),w.setUint8(b++,T.length),w.setUint8(b++,i),Array.from(g,D=>w.setUint8(b++,D.charCodeAt(0))),Array.from(h,D=>w.setUint8(b++,D.charCodeAt(0))),Array.from(c,D=>w.setUint8(b++,D.charCodeAt(0))),Array.from(p,D=>w.setUint8(b++,D.charCodeAt(0))),Array.from(T,D=>w.setUint8(b++,D.charCodeAt(0)));var R=new Uint8Array(E.byteLength+s.byteLength);return R.set(new Uint8Array(E),0),R.set(new Uint8Array(s),E.byteLength),R.buffer}decode(e,i){if(this._isArrayBuffer(e)){let s=this._binaryDecode(e);return i(s)}if(typeof e=="string"){const s=JSON.parse(e),[a,l,c,h,g]=s;return i({join_ref:a,ref:l,topic:c,event:h,payload:g})}return i({})}_binaryDecode(e){const i=new DataView(e),s=i.getUint8(0),a=new TextDecoder;if(s===this.KINDS.userBroadcast)return this._decodeUserBroadcast(e,i,a)}_decodeUserBroadcast(e,i,s){const a=i.getUint8(1),l=i.getUint8(2),c=i.getUint8(3),h=i.getUint8(4);let g=this.HEADER_LENGTH+4;const p=s.decode(e.slice(g,g+a));g=g+a;const v=s.decode(e.slice(g,g+l));g=g+l;const T=s.decode(e.slice(g,g+c));g=g+c;const _=e.slice(g,e.byteLength),E=h===this.JSON_ENCODING?JSON.parse(s.decode(_)):_,w={type:this.BROADCAST_EVENT,event:v,payload:E};return c>0&&(w.meta=JSON.parse(T)),{join_ref:null,ref:null,topic:p,event:this.BROADCAST_EVENT,payload:w}}_isArrayBuffer(e){var i;return e instanceof ArrayBuffer||((i=e?.constructor)===null||i===void 0?void 0:i.name)==="ArrayBuffer"}_pick(e,i){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([s])=>i.includes(s)))}}class Uy{constructor(e,i){this.callback=e,this.timerCalc=i,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=i}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var qe;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(qe||(qe={}));const Mm=(t,e,i={})=>{var s;const a=(s=i.skipTypes)!==null&&s!==void 0?s:[];return e?Object.keys(e).reduce((l,c)=>(l[c]=PT(c,t,e,a),l),{}):{}},PT=(t,e,i,s)=>{const a=e.find(h=>h.name===t),l=a?.type,c=i[t];return l&&!s.includes(l)?xy(l,c):Uc(c)},xy=(t,e)=>{if(t.charAt(0)==="_"){const i=t.slice(1,t.length);return BT(e,i)}switch(t){case qe.bool:return qT(e);case qe.float4:case qe.float8:case qe.int2:case qe.int4:case qe.int8:case qe.numeric:case qe.oid:return GT(e);case qe.json:case qe.jsonb:return HT(e);case qe.timestamp:return VT(e);case qe.abstime:case qe.date:case qe.daterange:case qe.int4range:case qe.int8range:case qe.money:case qe.reltime:case qe.text:case qe.time:case qe.timestamptz:case qe.timetz:case qe.tsrange:case qe.tstzrange:return Uc(e);default:return Uc(e)}},Uc=t=>t,qT=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},GT=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},HT=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},BT=(t,e)=>{if(typeof t!="string")return t;const i=t.length-1,s=t[i];if(t[0]==="{"&&s==="}"){let l;const c=t.slice(1,i);try{l=JSON.parse("["+c+"]")}catch{l=c?c.split(","):[]}return l.map(h=>xy(e,h))}return t},VT=t=>typeof t=="string"?t.replace(" ","T"):t,ky=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class _c{constructor(e,i,s={},a=Mc){this.channel=e,this.event=i,this.payload=s,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,i){var s;return this._hasReceived(e)&&i((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:i}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=i=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=i,this._matchReceive(i)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,i){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:i})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:i}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(i))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Dm;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Dm||(Dm={}));class Hs{constructor(e,i){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=i?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},a=>{const{onJoin:l,onLeave:c,onSync:h}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Hs.syncState(this.state,a,l,c),this.pendingDiffs.forEach(g=>{this.state=Hs.syncDiff(this.state,g,l,c)}),this.pendingDiffs=[],h()}),this.channel._on(s.diff,{},a=>{const{onJoin:l,onLeave:c,onSync:h}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Hs.syncDiff(this.state,a,l,c),h())}),this.onJoin((a,l,c)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:l,newPresences:c})}),this.onLeave((a,l,c)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:l,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,i,s,a){const l=this.cloneDeep(e),c=this.transformState(i),h={},g={};return this.map(l,(p,v)=>{c[p]||(g[p]=v)}),this.map(c,(p,v)=>{const T=l[p];if(T){const _=v.map(R=>R.presence_ref),E=T.map(R=>R.presence_ref),w=v.filter(R=>E.indexOf(R.presence_ref)<0),b=T.filter(R=>_.indexOf(R.presence_ref)<0);w.length>0&&(h[p]=w),b.length>0&&(g[p]=b)}else h[p]=v}),this.syncDiff(l,{joins:h,leaves:g},s,a)}static syncDiff(e,i,s,a){const{joins:l,leaves:c}={joins:this.transformState(i.joins),leaves:this.transformState(i.leaves)};return s||(s=()=>{}),a||(a=()=>{}),this.map(l,(h,g)=>{var p;const v=(p=e[h])!==null&&p!==void 0?p:[];if(e[h]=this.cloneDeep(g),v.length>0){const T=e[h].map(E=>E.presence_ref),_=v.filter(E=>T.indexOf(E.presence_ref)<0);e[h].unshift(..._)}s(h,v,g)}),this.map(c,(h,g)=>{let p=e[h];if(!p)return;const v=g.map(T=>T.presence_ref);p=p.filter(T=>v.indexOf(T.presence_ref)<0),e[h]=p,a(h,p,g),p.length===0&&delete e[h]}),e}static map(e,i){return Object.getOwnPropertyNames(e).map(s=>i(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((i,s)=>{const a=e[s];return"metas"in a?i[s]=a.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):i[s]=a,i},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Um;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Um||(Um={}));var Bs;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Bs||(Bs={}));var Nn;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Nn||(Nn={}));class Mo{constructor(e,i={config:{}},s){var a,l;if(this.topic=e,this.params=i,this.socket=s,this.bindings={},this.state=et.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},i.config),this.timeout=this.socket.timeout,this.joinPush=new _c(this,tn.join,this.params,this.timeout),this.rejoinTimer=new Uy(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=et.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(c=>c.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=et.closed,this.socket._remove(this)}),this._onError(c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=et.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=et.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=et.errored,this.rejoinTimer.scheduleTimeout())}),this._on(tn.reply,{},(c,h)=>{this._trigger(this._replyEventName(h),c)}),this.presence=new Hs(this),this.broadcastEndpointURL=ky(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((l=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,i=this.timeout){var s,a,l;if(this.socket.isConnected()||this.socket.connect(),this.state==et.closed){const{config:{broadcast:c,presence:h,private:g}}=this.params,p=(a=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(E=>E.filter))!==null&&a!==void 0?a:[],v=!!this.bindings[Bs.PRESENCE]&&this.bindings[Bs.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,T={},_={broadcast:c,presence:Object.assign(Object.assign({},h),{enabled:v}),postgres_changes:p,private:g};this.socket.accessTokenValue&&(T.access_token=this.socket.accessTokenValue),this._onError(E=>e?.(Nn.CHANNEL_ERROR,E)),this._onClose(()=>e?.(Nn.CLOSED)),this.updateJoinPayload(Object.assign({config:_},T)),this.joinedOnce=!0,this._rejoin(i),this.joinPush.receive("ok",async({postgres_changes:E})=>{var w;if(this.socket._isManualToken()||this.socket.setAuth(),E===void 0){e?.(Nn.SUBSCRIBED);return}else{const b=this.bindings.postgres_changes,R=(w=b?.length)!==null&&w!==void 0?w:0,D=[];for(let q=0;q<R;q++){const U=b[q],{filter:{event:V,schema:X,table:P,filter:J}}=U,Y=E&&E[q];if(Y&&Y.event===V&&Mo.isFilterValueEqual(Y.schema,X)&&Mo.isFilterValueEqual(Y.table,P)&&Mo.isFilterValueEqual(Y.filter,J))D.push(Object.assign(Object.assign({},U),{id:Y.id}));else{this.unsubscribe(),this.state=et.errored,e?.(Nn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=D,e&&e(Nn.SUBSCRIBED);return}}).receive("error",E=>{this.state=et.errored,e?.(Nn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(E).join(", ")||"error")))}).receive("timeout",()=>{e?.(Nn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,i={}){return await this.send({type:"presence",event:"track",payload:e},i.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,i,s){return this.state===et.joined&&e===Bs.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,i,s)}async httpSend(e,i,s={}){var a;if(i==null)return Promise.reject("Payload is required for httpSend()");const l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:i,private:this.private}]})},h=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(a=s.timeout)!==null&&a!==void 0?a:this.timeout);if(h.status===202)return{success:!0};let g=h.statusText;try{const p=await h.json();g=p.error||p.message||g}catch{}return Promise.reject(new Error(g))}async send(e,i={}){var s,a;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:l,payload:c}=e,h={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(h.Authorization=`Bearer ${this.socket.accessTokenValue}`);const g={method:"POST",headers:h,body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:c,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(s=i.timeout)!==null&&s!==void 0?s:this.timeout);return await((a=p.body)===null||a===void 0?void 0:a.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var c,h,g;const p=this._push(e.type,e,i.timeout||this.timeout);e.type==="broadcast"&&!(!((g=(h=(c=this.params)===null||c===void 0?void 0:c.config)===null||h===void 0?void 0:h.broadcast)===null||g===void 0)&&g.ack)&&l("ok"),p.receive("ok",()=>l("ok")),p.receive("error",()=>l("error")),p.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=et.leaving;const i=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(tn.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(a=>{s=new _c(this,tn.leave,{},e),s.receive("ok",()=>{i(),a("ok")}).receive("timeout",()=>{i(),a("timed out")}).receive("error",()=>{a("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=et.closed,this.bindings={}}async _fetchWithTimeout(e,i,s){const a=new AbortController,l=setTimeout(()=>a.abort(),s),c=await this.socket.fetch(e,Object.assign(Object.assign({},i),{signal:a.signal}));return clearTimeout(l),c}_push(e,i,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new _c(this,e,i,s);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>OT){const i=this.pushBuffer.shift();i&&(i.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${i.event}`,i.payload))}}_onMessage(e,i,s){return i}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,i,s){var a,l;const c=e.toLocaleLowerCase(),{close:h,error:g,leave:p,join:v}=tn;if(s&&[h,g,p,v].indexOf(c)>=0&&s!==this._joinRef())return;let _=this._onMessage(c,i,s);if(i&&!_)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(E=>{var w,b,R;return((w=E.filter)===null||w===void 0?void 0:w.event)==="*"||((R=(b=E.filter)===null||b===void 0?void 0:b.event)===null||R===void 0?void 0:R.toLocaleLowerCase())===c}).map(E=>E.callback(_,s)):(l=this.bindings[c])===null||l===void 0||l.filter(E=>{var w,b,R,D,q,U;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in E){const V=E.id,X=(w=E.filter)===null||w===void 0?void 0:w.event;return V&&((b=i.ids)===null||b===void 0?void 0:b.includes(V))&&(X==="*"||X?.toLocaleLowerCase()===((R=i.data)===null||R===void 0?void 0:R.type.toLocaleLowerCase()))}else{const V=(q=(D=E?.filter)===null||D===void 0?void 0:D.event)===null||q===void 0?void 0:q.toLocaleLowerCase();return V==="*"||V===((U=i?.event)===null||U===void 0?void 0:U.toLocaleLowerCase())}else return E.type.toLocaleLowerCase()===c}).map(E=>{if(typeof _=="object"&&"ids"in _){const w=_.data,{schema:b,table:R,commit_timestamp:D,type:q,errors:U}=w;_=Object.assign(Object.assign({},{schema:b,table:R,commit_timestamp:D,eventType:q,new:{},old:{},errors:U}),this._getPayloadRecords(w))}E.callback(_,s)})}_isClosed(){return this.state===et.closed}_isJoined(){return this.state===et.joined}_isJoining(){return this.state===et.joining}_isLeaving(){return this.state===et.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,i,s){const a=e.toLocaleLowerCase(),l={type:a,filter:i,callback:s};return this.bindings[a]?this.bindings[a].push(l):this.bindings[a]=[l],this}_off(e,i){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(a=>{var l;return!(((l=a.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===s&&Mo.isEqual(a.filter,i))})),this}static isEqual(e,i){if(Object.keys(e).length!==Object.keys(i).length)return!1;for(const s in e)if(e[s]!==i[s])return!1;return!0}static isFilterValueEqual(e,i){return(e??void 0)===(i??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(tn.close,{},e)}_onError(e){this._on(tn.error,{},i=>e(i))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=et.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const i={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(i.new=Mm(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(i.old=Mm(e.columns,e.old_record)),i}}const Tc=()=>{},ga={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},zT=[1e3,2e3,5e3,1e4],FT=1e4,$T=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class JT{constructor(e,i){var s;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Mc,this.transport=null,this.heartbeatIntervalMs=ga.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Tc,this.ref=0,this.reconnectTimer=null,this.vsn=Im,this.logger=Tc,this.conn=null,this.sendBuffer=[],this.serializer=new LT,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=a=>a?(...l)=>a(...l):(...l)=>fetch(...l),!(!((s=i?.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=i.params.apikey,this.endPoint=`${e}/${Dc.websocket}`,this.httpEndpoint=ky(e),this._initializeOptions(i),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(i?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=MT.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const i=e.message;throw i.includes("Node.js")?new Error(`${i}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${i}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,i){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,i??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const i=await e.unsubscribe();return i==="ok"&&this._remove(e),this.channels.length===0&&this.disconnect(),i}async removeAllChannels(){const e=await Promise.all(this.channels.map(i=>i.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,i,s){this.logger(e,i,s)}connectionState(){switch(this.conn&&this.conn.readyState){case oi.connecting:return Di.Connecting;case oi.open:return Di.Open;case oi.closing:return Di.Closing;default:return Di.Closed}}isConnected(){return this.connectionState()===Di.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,i={config:{}}){const s=`realtime:${e}`,a=this.getChannels().find(l=>l.topic===s);if(a)return a;{const l=new Mo(`realtime:${e}`,i,this);return this.channels.push(l),l}}push(e){const{topic:i,event:s,payload:a,ref:l}=e,c=()=>{this.encode(e,h=>{var g;(g=this.conn)===null||g===void 0||g.send(h)})};this.log("push",`${i} ${s} (${l})`,a),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(i){this.log("error","error in heartbeat callback",i)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(i){this.log("error","error in heartbeat callback",i)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(kT,"heartbeat timeout"),setTimeout(()=>{var i;this.isConnected()||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout()},ga.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(i){this.log("error","error in heartbeat callback",i)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let i=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));i&&(this.log("transport",`leaving duplicate topic "${e}"`),i.unsubscribe())}_remove(e){this.channels=this.channels.filter(i=>i.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,i=>{if(i.topic==="phoenix"&&i.event==="phx_reply"&&i.ref&&i.ref===this.pendingHeartbeatRef){const p=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(i.payload.status==="ok"?"ok":"error",p)}catch(v){this.log("error","error in heartbeat callback",v)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:s,event:a,payload:l,ref:c}=i,h=c?`(${c})`:"",g=l.status||"";this.log("receive",`${g} ${s} ${a} ${h}`.trim(),l),this.channels.filter(p=>p._isMember(s)).forEach(p=>p._trigger(a,l,c)),this._triggerStateCallbacks("message",i)})}_clearTimer(e){var i;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((i=this.reconnectTimer)===null||i===void 0||i.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===oi.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===oi.open||this.conn.readyState===oi.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(i=>{this.log("error","error waiting for auth on connect",i),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=i=>{this.log("worker","worker error",i.message),this._terminateWorker()},this.workerRef.onmessage=i=>{i.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var i;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e);try{this.heartbeatCallback("error")}catch(i){this.log("error","error in heartbeat callback",i)}}_triggerChanError(){this.channels.forEach(e=>e._trigger(tn.error))}_appendParams(e,i){if(Object.keys(i).length===0)return e;const s=e.match(/\?/)?"&":"?",a=new URLSearchParams(i);return`${e}${s}${a}`}_workerObjectUrl(e){let i;if(e)i=e;else{const s=new Blob([$T],{type:"application/javascript"});i=URL.createObjectURL(s)}return i}_setConnectionState(e,i=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=i)}async _performAuth(e=null){let i,s=!1;if(e)i=e,s=!0;else if(this.accessToken)try{i=await this.accessToken()}catch(a){this.log("error","Error fetching access token from callback",a),i=this.accessTokenValue}else i=this.accessTokenValue;s?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=i&&(this.accessTokenValue=i,this.channels.forEach(a=>{const l={access_token:i,version:UT};i&&a.updateJoinPayload(l),a.joinedOnce&&a._isJoined()&&a._push(tn.access_token,{access_token:i})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(i=>{this.log("error",`Error setting auth in ${e}`,i)})}_triggerStateCallbacks(e,i){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(i)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new Uy(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ga.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var i,s,a,l,c,h,g,p,v,T,_,E;switch(this.transport=(i=e?.transport)!==null&&i!==void 0?i:null,this.timeout=(s=e?.timeout)!==null&&s!==void 0?s:Mc,this.heartbeatIntervalMs=(a=e?.heartbeatIntervalMs)!==null&&a!==void 0?a:ga.HEARTBEAT_INTERVAL,this.worker=(l=e?.worker)!==null&&l!==void 0?l:!1,this.accessToken=(c=e?.accessToken)!==null&&c!==void 0?c:null,this.heartbeatCallback=(h=e?.heartbeatCallback)!==null&&h!==void 0?h:Tc,this.vsn=(g=e?.vsn)!==null&&g!==void 0?g:Im,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=e?.reconnectAfterMs)!==null&&p!==void 0?p:(w=>zT[w-1]||FT),this.vsn){case xT:this.encode=(v=e?.encode)!==null&&v!==void 0?v:((w,b)=>b(JSON.stringify(w))),this.decode=(T=e?.decode)!==null&&T!==void 0?T:((w,b)=>b(JSON.parse(w)));break;case Dy:this.encode=(_=e?.encode)!==null&&_!==void 0?_:this.serializer.encode.bind(this.serializer),this.decode=(E=e?.decode)!==null&&E!==void 0?E:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}var zs=class extends Error{constructor(t,e){super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&e.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function YT(t,e,i){const s=new URL(e,t);if(i)for(const[a,l]of Object.entries(i))l!==void 0&&s.searchParams.set(a,l);return s.toString()}async function KT(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function XT(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:i,path:s,query:a,body:l,headers:c}){const h=YT(t.baseUrl,s,a),g=await KT(t.auth),p=await e(h,{method:i,headers:{...l?{"Content-Type":"application/json"}:{},...g,...c},body:l?JSON.stringify(l):void 0}),v=await p.text(),T=(p.headers.get("content-type")||"").includes("application/json"),_=T&&v?JSON.parse(v):v;if(!p.ok){const E=T?_:void 0,w=E?.error;throw new zs(w?.message??`Request failed with status ${p.status}`,{status:p.status,icebergType:w?.type,icebergCode:w?.code,details:E})}return{status:p.status,headers:p.headers,data:_}}}}function ya(t){return t.join("")}var QT=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:ya(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(s=>({namespace:s}))}async createNamespace(t,e){const i={namespace:t.namespace,properties:e?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:i})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${ya(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ya(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${ya(t.namespace)}`}),!0}catch(e){if(e instanceof zs&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(i){if(i instanceof zs&&i.status===409)return;throw i}}};function To(t){return t.join("")}var WT=class{constructor(t,e="",i){this.client=t,this.prefix=e,this.accessDelegation=i}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${To(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const i={};return this.accessDelegation&&(i["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${To(t.namespace)}/tables`,body:e,headers:i})).data.metadata}async updateTable(t,e){const i=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${To(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":i.data["metadata-location"],metadata:i.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${To(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String(e?.purge??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${To(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${To(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(i){if(i instanceof zs&&i.status===404)return!1;throw i}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(i){if(i instanceof zs&&i.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw i}}},ZT=class{constructor(t){let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const i=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=XT({baseUrl:i,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=t.accessDelegation?.join(","),this.namespaceOps=new QT(this.client,e),this.tableOps=new WT(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},Ha=class extends Error{constructor(t,e="storage",i,s){super(t),this.__isStorageError=!0,this.namespace=e,this.name=e==="vectors"?"StorageVectorsError":"StorageError",this.status=i,this.statusCode=s}};function Ba(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var va=class extends Ha{constructor(t,e,i,s="storage"){super(t,s,e,i),this.name=s==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=e,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Oy=class extends Ha{constructor(t,e,i="storage"){super(t,i),this.name=i==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=e}};const jT=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),eS=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},xc=t=>{if(Array.isArray(t))return t.map(i=>xc(i));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([i,s])=>{const a=i.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[a]=xc(s)}),e},tS=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function Fs(t){"@babel/helpers - typeof";return Fs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fs(t)}function nS(t,e){if(Fs(t)!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var s=i.call(t,e);if(Fs(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function iS(t){var e=nS(t,"string");return Fs(e)=="symbol"?e:e+""}function oS(t,e,i){return(e=iS(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function xm(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),i.push.apply(i,s)}return i}function le(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?xm(Object(i),!0).forEach(function(s){oS(t,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):xm(Object(i)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(i,s))})}return t}const km=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},sS=async(t,e,i,s)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!i?.noResolveJson){const a=t,l=a.status||500;if(typeof a.json=="function")a.json().then(c=>{const h=c?.statusCode||c?.code||l+"";e(new va(km(c),l,h,s))}).catch(()=>{if(s==="vectors"){const c=l+"";e(new va(a.statusText||`HTTP ${l} error`,l,c,s))}else{const c=l+"";e(new va(a.statusText||`HTTP ${l} error`,l,c,s))}});else{const c=l+"";e(new va(a.statusText||`HTTP ${l} error`,l,c,s))}}else e(new Oy(km(t),t,s))},rS=(t,e,i,s)=>{const a={method:t,headers:e?.headers||{}};return t==="GET"||t==="HEAD"||!s?le(le({},a),i):(eS(s)?(a.headers=le({"Content-Type":"application/json"},e?.headers),a.body=JSON.stringify(s)):a.body=s,e?.duplex&&(a.duplex=e.duplex),le(le({},a),i))};async function Os(t,e,i,s,a,l,c){return new Promise((h,g)=>{t(i,rS(e,s,a,l)).then(p=>{if(!p.ok)throw p;if(s?.noResolveJson)return p;if(c==="vectors"){const v=p.headers.get("content-type");if(p.headers.get("content-length")==="0"||p.status===204)return{};if(!v||!v.includes("application/json"))return{}}return p.json()}).then(p=>h(p)).catch(p=>sS(p,g,s,c))})}function Ly(t="storage"){return{get:async(e,i,s,a)=>Os(e,"GET",i,s,a,void 0,t),post:async(e,i,s,a,l)=>Os(e,"POST",i,a,l,s,t),put:async(e,i,s,a,l)=>Os(e,"PUT",i,a,l,s,t),head:async(e,i,s,a)=>Os(e,"HEAD",i,le(le({},s),{},{noResolveJson:!0}),a,void 0,t),remove:async(e,i,s,a,l)=>Os(e,"DELETE",i,a,l,s,t)}}const aS=Ly("storage"),{get:$s,post:en,put:kc,head:lS,remove:nf}=aS,Pt=Ly("vectors");var Lo=class{constructor(t,e={},i,s="storage"){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.fetch=jT(i),this.namespace=s}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(t){var e=this;try{return{data:await t(),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Ba(i))return{data:null,error:i};throw i}}},uS=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Ba(e))return{data:null,error:e};throw e}}};let Py;Py=Symbol.toStringTag;var cS=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[Py]="BlobDownloadBuilder",this.promise=null}asStream(){return new uS(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Ba(e))return{data:null,error:e};throw e}}};const fS={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Om={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var dS=class extends Lo{constructor(t,e={},i,s){super(t,e,s,"storage"),this.bucketId=i}async uploadOrUpdate(t,e,i,s){var a=this;return a.handleOperation(async()=>{let l;const c=le(le({},Om),s);let h=le(le({},a.headers),t==="POST"&&{"x-upsert":String(c.upsert)});const g=c.metadata;typeof Blob<"u"&&i instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),g&&l.append("metadata",a.encodeMetadata(g)),l.append("",i)):typeof FormData<"u"&&i instanceof FormData?(l=i,l.has("cacheControl")||l.append("cacheControl",c.cacheControl),g&&!l.has("metadata")&&l.append("metadata",a.encodeMetadata(g))):(l=i,h["cache-control"]=`max-age=${c.cacheControl}`,h["content-type"]=c.contentType,g&&(h["x-metadata"]=a.toBase64(a.encodeMetadata(g))),(typeof ReadableStream<"u"&&l instanceof ReadableStream||l&&typeof l=="object"&&"pipe"in l&&typeof l.pipe=="function")&&!c.duplex&&(c.duplex="half")),s?.headers&&(h=le(le({},h),s.headers));const p=a._removeEmptyFolders(e),v=a._getFinalPath(p),T=await(t=="PUT"?kc:en)(a.fetch,`${a.url}/object/${v}`,l,le({headers:h},c?.duplex?{duplex:c.duplex}:{}));return{path:p,id:T.Id,fullPath:T.Key}})}async upload(t,e,i){return this.uploadOrUpdate("POST",t,e,i)}async uploadToSignedUrl(t,e,i,s){var a=this;const l=a._removeEmptyFolders(t),c=a._getFinalPath(l),h=new URL(a.url+`/object/upload/sign/${c}`);return h.searchParams.set("token",e),a.handleOperation(async()=>{let g;const p=le({upsert:Om.upsert},s),v=le(le({},a.headers),{"x-upsert":String(p.upsert)});return typeof Blob<"u"&&i instanceof Blob?(g=new FormData,g.append("cacheControl",p.cacheControl),g.append("",i)):typeof FormData<"u"&&i instanceof FormData?(g=i,g.append("cacheControl",p.cacheControl)):(g=i,v["cache-control"]=`max-age=${p.cacheControl}`,v["content-type"]=p.contentType),{path:l,fullPath:(await kc(a.fetch,h.toString(),g,{headers:v})).Key}})}async createSignedUploadUrl(t,e){var i=this;return i.handleOperation(async()=>{let s=i._getFinalPath(t);const a=le({},i.headers);e?.upsert&&(a["x-upsert"]="true");const l=await en(i.fetch,`${i.url}/object/upload/sign/${s}`,{},{headers:a}),c=new URL(i.url+l.url),h=c.searchParams.get("token");if(!h)throw new Ha("No token returned by API");return{signedUrl:c.toString(),path:t,token:h}})}async update(t,e,i){return this.uploadOrUpdate("PUT",t,e,i)}async move(t,e,i){var s=this;return s.handleOperation(async()=>await en(s.fetch,`${s.url}/object/move`,{bucketId:s.bucketId,sourceKey:t,destinationKey:e,destinationBucket:i?.destinationBucket},{headers:s.headers}))}async copy(t,e,i){var s=this;return s.handleOperation(async()=>({path:(await en(s.fetch,`${s.url}/object/copy`,{bucketId:s.bucketId,sourceKey:t,destinationKey:e,destinationBucket:i?.destinationBucket},{headers:s.headers})).Key}))}async createSignedUrl(t,e,i){var s=this;return s.handleOperation(async()=>{let a=s._getFinalPath(t),l=await en(s.fetch,`${s.url}/object/sign/${a}`,le({expiresIn:e},i?.transform?{transform:i.transform}:{}),{headers:s.headers});const c=i?.download?`&download=${i.download===!0?"":i.download}`:"";return{signedUrl:encodeURI(`${s.url}${l.signedURL}${c}`)}})}async createSignedUrls(t,e,i){var s=this;return s.handleOperation(async()=>{const a=await en(s.fetch,`${s.url}/object/sign/${s.bucketId}`,{expiresIn:e,paths:t},{headers:s.headers}),l=i?.download?`&download=${i.download===!0?"":i.download}`:"";return a.map(c=>le(le({},c),{},{signedUrl:c.signedURL?encodeURI(`${s.url}${c.signedURL}${l}`):null}))})}download(t,e,i){const s=typeof e?.transform<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString(e?.transform||{}),l=a?`?${a}`:"",c=this._getFinalPath(t),h=()=>$s(this.fetch,`${this.url}/${s}/${c}${l}`,{headers:this.headers,noResolveJson:!0},i);return new cS(h,this.shouldThrowOnError)}async info(t){var e=this;const i=e._getFinalPath(t);return e.handleOperation(async()=>xc(await $s(e.fetch,`${e.url}/object/info/${i}`,{headers:e.headers})))}async exists(t){var e=this;const i=e._getFinalPath(t);try{return await lS(e.fetch,`${e.url}/object/${i}`,{headers:e.headers}),{data:!0,error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(Ba(s)&&s instanceof Oy){const a=s.originalError;if([400,404].includes(a?.status))return{data:!1,error:s}}throw s}}getPublicUrl(t,e){const i=this._getFinalPath(t),s=[],a=e?.download?`download=${e.download===!0?"":e.download}`:"";a!==""&&s.push(a);const l=typeof e?.transform<"u"?"render/image":"object",c=this.transformOptsToQueryString(e?.transform||{});c!==""&&s.push(c);let h=s.join("&");return h!==""&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${i}${h}`)}}}async remove(t){var e=this;return e.handleOperation(async()=>await nf(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}))}async list(t,e,i){var s=this;return s.handleOperation(async()=>{const a=le(le(le({},fS),e),{},{prefix:t||""});return await en(s.fetch,`${s.url}/object/list/${s.bucketId}`,a,{headers:s.headers},i)})}async listV2(t,e){var i=this;return i.handleOperation(async()=>{const s=le({},t);return await en(i.fetch,`${i.url}/object/list-v2/${i.bucketId}`,s,{headers:i.headers},e)})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const hS="2.95.3",Qs={"X-Client-Info":`storage-js/${hS}`};var pS=class extends Lo{constructor(t,e={},i,s){const a=new URL(t);s?.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase."));const l=a.href.replace(/\/$/,""),c=le(le({},Qs),e);super(l,c,i,"storage")}async listBuckets(t){var e=this;return e.handleOperation(async()=>{const i=e.listBucketOptionsToQueryString(t);return await $s(e.fetch,`${e.url}/bucket${i}`,{headers:e.headers})})}async getBucket(t){var e=this;return e.handleOperation(async()=>await $s(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}))}async createBucket(t,e={public:!1}){var i=this;return i.handleOperation(async()=>await en(i.fetch,`${i.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:i.headers}))}async updateBucket(t,e){var i=this;return i.handleOperation(async()=>await kc(i.fetch,`${i.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:i.headers}))}async emptyBucket(t){var e=this;return e.handleOperation(async()=>await en(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}))}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await nf(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}))}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},mS=class extends Lo{constructor(t,e={},i){const s=t.replace(/\/$/,""),a=le(le({},Qs),e);super(s,a,i,"storage")}async createBucket(t){var e=this;return e.handleOperation(async()=>await en(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}))}async listBuckets(t){var e=this;return e.handleOperation(async()=>{const i=new URLSearchParams;t?.limit!==void 0&&i.set("limit",t.limit.toString()),t?.offset!==void 0&&i.set("offset",t.offset.toString()),t?.sortColumn&&i.set("sortColumn",t.sortColumn),t?.sortOrder&&i.set("sortOrder",t.sortOrder),t?.search&&i.set("search",t.search);const s=i.toString(),a=s?`${e.url}/bucket?${s}`:`${e.url}/bucket`;return await $s(e.fetch,a,{headers:e.headers})})}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await nf(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}))}from(t){var e=this;if(!tS(t))throw new Ha("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const i=new ZT({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),s=this.shouldThrowOnError;return new Proxy(i,{get(a,l){const c=a[l];return typeof c!="function"?c:async(...h)=>{try{return{data:await c.apply(a,h),error:null}}catch(g){if(s)throw g;return{data:null,error:g}}}}})}},gS=class extends Lo{constructor(t,e={},i){const s=t.replace(/\/$/,""),a=le(le({},Qs),{},{"Content-Type":"application/json"},e);super(s,a,i,"vectors")}async createIndex(t){var e=this;return e.handleOperation(async()=>await Pt.post(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{})}async getIndex(t,e){var i=this;return i.handleOperation(async()=>await Pt.post(i.fetch,`${i.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:i.headers}))}async listIndexes(t){var e=this;return e.handleOperation(async()=>await Pt.post(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}))}async deleteIndex(t,e){var i=this;return i.handleOperation(async()=>await Pt.post(i.fetch,`${i.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:i.headers})||{})}},yS=class extends Lo{constructor(t,e={},i){const s=t.replace(/\/$/,""),a=le(le({},Qs),{},{"Content-Type":"application/json"},e);super(s,a,i,"vectors")}async putVectors(t){var e=this;if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return e.handleOperation(async()=>await Pt.post(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{})}async getVectors(t){var e=this;return e.handleOperation(async()=>await Pt.post(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}))}async listVectors(t){var e=this;if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return e.handleOperation(async()=>await Pt.post(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}))}async queryVectors(t){var e=this;return e.handleOperation(async()=>await Pt.post(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}))}async deleteVectors(t){var e=this;if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return e.handleOperation(async()=>await Pt.post(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{})}},vS=class extends Lo{constructor(t,e={},i){const s=t.replace(/\/$/,""),a=le(le({},Qs),{},{"Content-Type":"application/json"},e);super(s,a,i,"vectors")}async createBucket(t){var e=this;return e.handleOperation(async()=>await Pt.post(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{})}async getBucket(t){var e=this;return e.handleOperation(async()=>await Pt.post(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}))}async listBuckets(t={}){var e=this;return e.handleOperation(async()=>await Pt.post(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}))}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await Pt.post(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{})}},_S=class extends vS{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new TS(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,i=this;return e().call(i,t)}async getBucket(t){var e=()=>super.getBucket,i=this;return e().call(i,t)}async listBuckets(t={}){var e=()=>super.listBuckets,i=this;return e().call(i,t)}async deleteBucket(t){var e=()=>super.deleteBucket,i=this;return e().call(i,t)}},TS=class extends gS{constructor(t,e,i,s){super(t,e,s),this.vectorBucketName=i}async createIndex(t){var e=()=>super.createIndex,i=this;return e().call(i,le(le({},t),{},{vectorBucketName:i.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,i=this;return e().call(i,le(le({},t),{},{vectorBucketName:i.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,i=this;return e().call(i,i.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,i=this;return e().call(i,i.vectorBucketName,t)}index(t){return new SS(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},SS=class extends yS{constructor(t,e,i,s,a){super(t,e,a),this.vectorBucketName=i,this.indexName=s}async putVectors(t){var e=()=>super.putVectors,i=this;return e().call(i,le(le({},t),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async getVectors(t){var e=()=>super.getVectors,i=this;return e().call(i,le(le({},t),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,i=this;return e().call(i,le(le({},t),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,i=this;return e().call(i,le(le({},t),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,i=this;return e().call(i,le(le({},t),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}},ES=class extends pS{constructor(t,e={},i,s){super(t,e,i,s)}from(t){return new dS(this.url,this.headers,t,this.fetch)}get vectors(){return new _S(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new mS(this.url+"/iceberg",this.headers,this.fetch)}};const qy="2.95.3",Ro=30*1e3,Oc=3,Sc=Oc*Ro,AS="http://localhost:9999",wS="supabase.auth.token",CS={"X-Client-Info":`gotrue-js/${qy}`},Lc="X-Supabase-Api-Version",Gy={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},bS=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,RS=600*1e3;class Js extends Error{constructor(e,i,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=i,this.code=s}}function ne(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class NS extends Js{constructor(e,i,s){super(e,i,s),this.name="AuthApiError",this.status=i,this.code=s}}function IS(t){return ne(t)&&t.name==="AuthApiError"}class Ui extends Js{constructor(e,i){super(e),this.name="AuthUnknownError",this.originalError=i}}class Mn extends Js{constructor(e,i,s,a){super(e,s,a),this.name=i,this.status=s}}class Lt extends Mn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Ec(t){return ne(t)&&t.name==="AuthSessionMissingError"}class So extends Mn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class _a extends Mn{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ta extends Mn{constructor(e,i=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function MS(t){return ne(t)&&t.name==="AuthImplicitGrantRedirectError"}class Lm extends Mn{constructor(e,i=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class DS extends Mn{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Pc extends Mn{constructor(e,i){super(e,"AuthRetryableFetchError",i,void 0)}}function Ac(t){return ne(t)&&t.name==="AuthRetryableFetchError"}class Pm extends Mn{constructor(e,i,s){super(e,"AuthWeakPasswordError",i,"weak_password"),this.reasons=s}}class qc extends Mn{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ma="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),qm=` 	
\r=`.split(""),US=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<qm.length;e+=1)t[qm[e].charCodeAt(0)]=-2;for(let e=0;e<Ma.length;e+=1)t[Ma[e].charCodeAt(0)]=e;return t})();function Gm(t,e,i){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;i(Ma[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;i(Ma[s]),e.queuedBits-=6}}function Hy(t,e,i){const s=US[t];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)i(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Hm(t){const e=[],i=c=>{e.push(String.fromCodePoint(c))},s={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},l=c=>{OS(c,s,i)};for(let c=0;c<t.length;c+=1)Hy(t.charCodeAt(c),a,l);return e.join("")}function xS(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function kS(t,e){for(let i=0;i<t.length;i+=1){let s=t.charCodeAt(i);if(s>55295&&s<=56319){const a=(s-55296)*1024&65535;s=(t.charCodeAt(i+1)-56320&65535|a)+65536,i+=1}xS(s,e)}}function OS(t,e,i){if(e.utf8seq===0){if(t<=127){i(t);return}for(let s=1;s<6;s+=1)if((t>>7-s&1)===0){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&i(e.codepoint)}}function xo(t){const e=[],i={queue:0,queuedBits:0},s=a=>{e.push(a)};for(let a=0;a<t.length;a+=1)Hy(t.charCodeAt(a),i,s);return new Uint8Array(e)}function LS(t){const e=[];return kS(t,i=>e.push(i)),new Uint8Array(e)}function xi(t){const e=[],i={queue:0,queuedBits:0},s=a=>{e.push(a)};return t.forEach(a=>Gm(a,i,s)),Gm(null,i,s),e.join("")}function PS(t){return Math.round(Date.now()/1e3)+t}function qS(){return Symbol("auth-callback")}const ft=()=>typeof window<"u"&&typeof document<"u",Ri={tested:!1,writable:!1},By=()=>{if(!ft())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ri.tested)return Ri.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Ri.tested=!0,Ri.writable=!0}catch{Ri.tested=!0,Ri.writable=!1}return Ri.writable};function GS(t){const e={},i=new URL(t);if(i.hash&&i.hash[0]==="#")try{new URLSearchParams(i.hash.substring(1)).forEach((a,l)=>{e[l]=a})}catch{}return i.searchParams.forEach((s,a)=>{e[a]=s}),e}const Vy=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),HS=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",No=async(t,e,i)=>{await t.setItem(e,JSON.stringify(i))},Ni=async(t,e)=>{const i=await t.getItem(e);if(!i)return null;try{return JSON.parse(i)}catch{return i}},ct=async(t,e)=>{await t.removeItem(e)};class Va{constructor(){this.promise=new Va.promiseConstructor((e,i)=>{this.resolve=e,this.reject=i})}}Va.promiseConstructor=Promise;function Sa(t){const e=t.split(".");if(e.length!==3)throw new qc("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!bS.test(e[s]))throw new qc("JWT not in base64url format");return{header:JSON.parse(Hm(e[0])),payload:JSON.parse(Hm(e[1])),signature:xo(e[2]),raw:{header:e[0],payload:e[1]}}}async function BS(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function VS(t,e){return new Promise((s,a)=>{(async()=>{for(let l=0;l<1/0;l++)try{const c=await t(l);if(!e(l,null,c)){s(c);return}}catch(c){if(!e(l,c)){a(c);return}}})()})}function zS(t){return("0"+t.toString(16)).substr(-2)}function FS(){const e=new Uint32Array(56);if(typeof crypto>"u"){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=i.length;let a="";for(let l=0;l<56;l++)a+=i.charAt(Math.floor(Math.random()*s));return a}return crypto.getRandomValues(e),Array.from(e,zS).join("")}async function $S(t){const i=new TextEncoder().encode(t),s=await crypto.subtle.digest("SHA-256",i),a=new Uint8Array(s);return Array.from(a).map(l=>String.fromCharCode(l)).join("")}async function JS(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const i=await $S(t);return btoa(i).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Eo(t,e,i=!1){const s=FS();let a=s;i&&(a+="/PASSWORD_RECOVERY"),await No(t,`${e}-code-verifier`,a);const l=await JS(s);return[l,s===l?"plain":"s256"]}const YS=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function KS(t){const e=t.headers.get(Lc);if(!e||!e.match(YS))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function XS(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function QS(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const WS=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ao(t){if(!WS.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function wc(){const t={};return new Proxy(t,{get:(e,i)=>{if(i==="__isUserNotAvailableProxy")return!0;if(typeof i=="symbol"){const s=i.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${i}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function ZS(t,e){return new Proxy(t,{get:(i,s,a)=>{if(s==="__isInsecureUserWarningProxy")return!0;if(typeof s=="symbol"){const l=s.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)"||l==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(i,s,a)}return!e.value&&typeof s=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(i,s,a)}})}function Bm(t){return JSON.parse(JSON.stringify(t))}const Ii=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),jS=[502,503,504];async function Vm(t){var e;if(!HS(t))throw new Pc(Ii(t),0);if(jS.includes(t.status))throw new Pc(Ii(t),t.status);let i;try{i=await t.json()}catch(l){throw new Ui(Ii(l),l)}let s;const a=KS(t);if(a&&a.getTime()>=Gy["2024-01-01"].timestamp&&typeof i=="object"&&i&&typeof i.code=="string"?s=i.code:typeof i=="object"&&i&&typeof i.error_code=="string"&&(s=i.error_code),s){if(s==="weak_password")throw new Pm(Ii(i),t.status,((e=i.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new Lt}else if(typeof i=="object"&&i&&typeof i.weak_password=="object"&&i.weak_password&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.reasons.reduce((l,c)=>l&&typeof c=="string",!0))throw new Pm(Ii(i),t.status,i.weak_password.reasons);throw new NS(Ii(i),t.status||500,s)}const eE=(t,e,i,s)=>{const a={method:t,headers:e?.headers||{}};return t==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),a.body=JSON.stringify(s),Object.assign(Object.assign({},a),i))};async function ae(t,e,i,s){var a;const l=Object.assign({},s?.headers);l[Lc]||(l[Lc]=Gy["2024-01-01"].name),s?.jwt&&(l.Authorization=`Bearer ${s.jwt}`);const c=(a=s?.query)!==null&&a!==void 0?a:{};s?.redirectTo&&(c.redirect_to=s.redirectTo);const h=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",g=await tE(t,e,i+h,{headers:l,noResolveJson:s?.noResolveJson},{},s?.body);return s?.xform?s?.xform(g):{data:Object.assign({},g),error:null}}async function tE(t,e,i,s,a,l){const c=eE(e,s,a,l);let h;try{h=await t(i,Object.assign({},c))}catch(g){throw console.error(g),new Pc(Ii(g),0)}if(h.ok||await Vm(h),s?.noResolveJson)return h;try{return await h.json()}catch(g){await Vm(g)}}function jt(t){var e;let i=null;oE(t)&&(i=Object.assign({},t),t.expires_at||(i.expires_at=PS(t.expires_in)));const s=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:i,user:s},error:null}}function zm(t){const e=jt(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((i,s)=>i&&typeof s=="string",!0)&&(e.data.weak_password=t.weak_password),e}function si(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function nE(t){return{data:t,error:null}}function iE(t){const{action_link:e,email_otp:i,hashed_token:s,redirect_to:a,verification_type:l}=t,c=Ga(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),h={action_link:e,email_otp:i,hashed_token:s,redirect_to:a,verification_type:l},g=Object.assign({},c);return{data:{properties:h,user:g},error:null}}function Fm(t){return t}function oE(t){return t.access_token&&t.refresh_token&&t.expires_in}const Cc=["global","local","others"];class sE{constructor({url:e="",headers:i={},fetch:s}){this.url=e,this.headers=i,this.fetch=Vy(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,i=Cc[0]){if(Cc.indexOf(i)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Cc.join(", ")}`);try{return await ae(this.fetch,"POST",`${this.url}/logout?scope=${i}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(ne(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,i={}){try{return await ae(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:i.data},headers:this.headers,redirectTo:i.redirectTo,xform:si})}catch(s){if(ne(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:i}=e,s=Ga(e,["options"]),a=Object.assign(Object.assign({},s),i);return"newEmail"in s&&(a.new_email=s?.newEmail,delete a.newEmail),await ae(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:iE,redirectTo:i?.redirectTo})}catch(i){if(ne(i))return{data:{properties:null,user:null},error:i};throw i}}async createUser(e){try{return await ae(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:si})}catch(i){if(ne(i))return{data:{user:null},error:i};throw i}}async listUsers(e){var i,s,a,l,c,h,g;try{const p={nextPage:null,lastPage:0,total:0},v=await ae(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(i=e?.page)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:"",per_page:(l=(a=e?.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:Fm});if(v.error)throw v.error;const T=await v.json(),_=(c=v.headers.get("x-total-count"))!==null&&c!==void 0?c:0,E=(g=(h=v.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&g!==void 0?g:[];return E.length>0&&(E.forEach(w=>{const b=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),R=JSON.parse(w.split(";")[1].split("=")[1]);p[`${R}Page`]=b}),p.total=parseInt(_)),{data:Object.assign(Object.assign({},T),p),error:null}}catch(p){if(ne(p))return{data:{users:[]},error:p};throw p}}async getUserById(e){Ao(e);try{return await ae(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:si})}catch(i){if(ne(i))return{data:{user:null},error:i};throw i}}async updateUserById(e,i){Ao(e);try{return await ae(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:i,headers:this.headers,xform:si})}catch(s){if(ne(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,i=!1){Ao(e);try{return await ae(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:i},xform:si})}catch(s){if(ne(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){Ao(e.userId);try{const{data:i,error:s}=await ae(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:i,error:s}}catch(i){if(ne(i))return{data:null,error:i};throw i}}async _deleteFactor(e){Ao(e.userId),Ao(e.id);try{return{data:await ae(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(i){if(ne(i))return{data:null,error:i};throw i}}async _listOAuthClients(e){var i,s,a,l,c,h,g;try{const p={nextPage:null,lastPage:0,total:0},v=await ae(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(i=e?.page)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:"",per_page:(l=(a=e?.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:Fm});if(v.error)throw v.error;const T=await v.json(),_=(c=v.headers.get("x-total-count"))!==null&&c!==void 0?c:0,E=(g=(h=v.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&g!==void 0?g:[];return E.length>0&&(E.forEach(w=>{const b=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),R=JSON.parse(w.split(";")[1].split("=")[1]);p[`${R}Page`]=b}),p.total=parseInt(_)),{data:Object.assign(Object.assign({},T),p),error:null}}catch(p){if(ne(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(e){try{return await ae(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(ne(i))return{data:null,error:i};throw i}}async _getOAuthClient(e){try{return await ae(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(ne(i))return{data:null,error:i};throw i}}async _updateOAuthClient(e,i){try{return await ae(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:i,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(ne(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(e){try{return await ae(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(i){if(ne(i))return{data:null,error:i};throw i}}async _regenerateOAuthClientSecret(e){try{return await ae(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(ne(i))return{data:null,error:i};throw i}}}function $m(t={}){return{getItem:e=>t[e]||null,setItem:(e,i)=>{t[e]=i},removeItem:e=>{delete t[e]}}}const wo={debug:!!(globalThis&&By()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class zy extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class rE extends zy{}async function aE(t,e,i){wo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),wo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async a=>{if(a){wo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,a.name);try{return await i()}finally{wo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,a.name)}}else{if(e===0)throw wo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new rE(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(wo.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await i()}}))}function lE(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Fy(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function uE(t){return parseInt(t,16)}function cE(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,s=>s.toString(16).padStart(2,"0")).join("")}function fE(t){var e;const{chainId:i,domain:s,expirationTime:a,issuedAt:l=new Date,nonce:c,notBefore:h,requestId:g,resources:p,scheme:v,uri:T,version:_}=t;{if(!Number.isInteger(i))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${i}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(c&&c.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${c}`);if(!T)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(_!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${_}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const E=Fy(t.address),w=v?`${v}://${s}`:s,b=t.statement?`${t.statement}
`:"",R=`${w} wants you to sign in with your Ethereum account:
${E}

${b}`;let D=`URI: ${T}
Version: ${_}
Chain ID: ${i}${c?`
Nonce: ${c}`:""}
Issued At: ${l.toISOString()}`;if(a&&(D+=`
Expiration Time: ${a.toISOString()}`),h&&(D+=`
Not Before: ${h.toISOString()}`),g&&(D+=`
Request ID: ${g}`),p){let q=`
Resources:`;for(const U of p){if(!U||typeof U!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${U}`);q+=`
- ${U}`}D+=q}return`${R}
${D}`}class Ze extends Error{constructor({message:e,code:i,cause:s,name:a}){var l;super(e,{cause:s}),this.__isWebAuthnError=!0,this.name=(l=a??(s instanceof Error?s.name:void 0))!==null&&l!==void 0?l:"Unknown Error",this.code=i}}class Da extends Ze{constructor(e,i){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i,message:e}),this.name="WebAuthnUnknownError",this.originalError=i}}function dE({error:t,options:e}){var i,s,a;const{publicKey:l}=e;if(!l)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Ze({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((i=l.authenticatorSelection)===null||i===void 0?void 0:i.requireResidentKey)===!0)return new Ze({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((s=l.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Ze({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((a=l.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new Ze({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Ze({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Ze({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return l.pubKeyCredParams.filter(h=>h.type==="public-key").length===0?new Ze({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Ze({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const c=window.location.hostname;if($y(c)){if(l.rp.id!==c)return new Ze({message:`The RP ID "${l.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Ze({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(l.user.id.byteLength<1||l.user.id.byteLength>64)return new Ze({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Ze({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Ze({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function hE({error:t,options:e}){const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Ze({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Ze({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const s=window.location.hostname;if($y(s)){if(i.rpId!==s)return new Ze({message:`The RP ID "${i.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Ze({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Ze({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Ze({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class pE{createNewAbortSignal(){if(this.controller){const i=new Error("Cancelling existing WebAuthn API call for new one");i.name="AbortError",this.controller.abort(i)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const mE=new pE;function gE(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:i,excludeCredentials:s}=t,a=Ga(t,["challenge","user","excludeCredentials"]),l=xo(e).buffer,c=Object.assign(Object.assign({},i),{id:xo(i.id).buffer}),h=Object.assign(Object.assign({},a),{challenge:l,user:c});if(s&&s.length>0){h.excludeCredentials=new Array(s.length);for(let g=0;g<s.length;g++){const p=s[g];h.excludeCredentials[g]=Object.assign(Object.assign({},p),{id:xo(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return h}function yE(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:i}=t,s=Ga(t,["challenge","allowCredentials"]),a=xo(e).buffer,l=Object.assign(Object.assign({},s),{challenge:a});if(i&&i.length>0){l.allowCredentials=new Array(i.length);for(let c=0;c<i.length;c++){const h=i[c];l.allowCredentials[c]=Object.assign(Object.assign({},h),{id:xo(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return l}function vE(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const i=t;return{id:t.id,rawId:t.id,response:{attestationObject:xi(new Uint8Array(t.response.attestationObject)),clientDataJSON:xi(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=i.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function _E(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const i=t,s=t.getClientExtensionResults(),a=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:xi(new Uint8Array(a.authenticatorData)),clientDataJSON:xi(new Uint8Array(a.clientDataJSON)),signature:xi(new Uint8Array(a.signature)),userHandle:a.userHandle?xi(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(e=i.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function $y(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function Jm(){var t,e;return!!(ft()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function TE(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Da("Browser returned unexpected credential type",e)}:{data:null,error:new Da("Empty credential response",e)}}catch(e){return{data:null,error:dE({error:e,options:t})}}}async function SE(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Da("Browser returned unexpected credential type",e)}:{data:null,error:new Da("Empty credential response",e)}}catch(e){return{data:null,error:hE({error:e,options:t})}}}const EE={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},AE={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Ua(...t){const e=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),i=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),s={};for(const a of t)if(a)for(const l in a){const c=a[l];if(c!==void 0)if(Array.isArray(c))s[l]=c;else if(i(c))s[l]=c;else if(e(c)){const h=s[l];e(h)?s[l]=Ua(h,c):s[l]=Ua(c)}else s[l]=c}return s}function wE(t,e){return Ua(EE,t,e||{})}function CE(t,e){return Ua(AE,t,e||{})}class bE{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:i,friendlyName:s,signal:a},l){var c;try{const{data:h,error:g}=await this.client.mfa.challenge({factorId:e,webauthn:i});if(!h)return{data:null,error:g};const p=a??mE.createNewAbortSignal();if(h.webauthn.type==="create"){const{user:v}=h.webauthn.credential_options.publicKey;if(!v.name){const T=s;if(T)v.name=`${v.id}:${T}`;else{const E=(await this.client.getUser()).data.user,w=((c=E?.user_metadata)===null||c===void 0?void 0:c.name)||E?.email||E?.id||"User";v.name=`${v.id}:${w}`}}v.displayName||(v.displayName=v.name)}switch(h.webauthn.type){case"create":{const v=wE(h.webauthn.credential_options.publicKey,l?.create),{data:T,error:_}=await TE({publicKey:v,signal:p});return T?{data:{factorId:e,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:T}},error:null}:{data:null,error:_}}case"request":{const v=CE(h.webauthn.credential_options.publicKey,l?.request),{data:T,error:_}=await SE(Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:v,signal:p}));return T?{data:{factorId:e,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:T}},error:null}:{data:null,error:_}}}}catch(h){return ne(h)?{data:null,error:h}:{data:null,error:new Ui("Unexpected error in challenge",h)}}}async _verify({challengeId:e,factorId:i,webauthn:s}){return this.client.mfa.verify({factorId:i,challengeId:e,webauthn:s})}async _authenticate({factorId:e,webauthn:{rpId:i=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},l){if(!i)return{data:null,error:new Js("rpId is required for WebAuthn authentication")};try{if(!Jm())return{data:null,error:new Ui("Browser does not support WebAuthn",null)};const{data:c,error:h}=await this.challenge({factorId:e,webauthn:{rpId:i,rpOrigins:s},signal:a},{request:l});if(!c)return{data:null,error:h};const{webauthn:g}=c;return this._verify({factorId:e,challengeId:c.challengeId,webauthn:{type:g.type,rpId:i,rpOrigins:s,credential_response:g.credential_response}})}catch(c){return ne(c)?{data:null,error:c}:{data:null,error:new Ui("Unexpected error in authenticate",c)}}}async _register({friendlyName:e,webauthn:{rpId:i=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},l){if(!i)return{data:null,error:new Js("rpId is required for WebAuthn registration")};try{if(!Jm())return{data:null,error:new Ui("Browser does not support WebAuthn",null)};const{data:c,error:h}=await this._enroll({friendlyName:e});if(!c)return await this.client.mfa.listFactors().then(v=>{var T;return(T=v.data)===null||T===void 0?void 0:T.all.find(_=>_.factor_type==="webauthn"&&_.friendly_name===e&&_.status!=="unverified")}).then(v=>v?this.client.mfa.unenroll({factorId:v?.id}):void 0),{data:null,error:h};const{data:g,error:p}=await this._challenge({factorId:c.id,friendlyName:c.friendly_name,webauthn:{rpId:i,rpOrigins:s},signal:a},{create:l});return g?this._verify({factorId:c.id,challengeId:g.challengeId,webauthn:{rpId:i,rpOrigins:s,type:g.webauthn.type,credential_response:g.webauthn.credential_response}}):{data:null,error:p}}catch(c){return ne(c)?{data:null,error:c}:{data:null,error:new Ui("Unexpected error in register",c)}}}}lE();const RE={url:AS,storageKey:wS,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:CS,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function Ym(t,e,i){return await i()}const Co={};class Ys{get jwks(){var e,i;return(i=(e=Co[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&i!==void 0?i:{keys:[]}}set jwks(e){Co[this.storageKey]=Object.assign(Object.assign({},Co[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,i;return(i=(e=Co[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&i!==void 0?i:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Co[this.storageKey]=Object.assign(Object.assign({},Co[this.storageKey]),{cachedAt:e})}constructor(e){var i,s,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const l=Object.assign(Object.assign({},RE),e);if(this.storageKey=l.storageKey,this.instanceID=(i=Ys.nextInstanceID[this.storageKey])!==null&&i!==void 0?i:0,Ys.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.instanceID>0&&ft()){const c=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(c),this.logDebugMessages&&console.trace(c)}if(this.persistSession=l.persistSession,this.autoRefreshToken=l.autoRefreshToken,this.admin=new sE({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=Vy(l.fetch),this.lock=l.lock||Ym,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,this.throwOnError=l.throwOnError,this.lockAcquireTimeout=l.lockAcquireTimeout,l.lock?this.lock=l.lock:this.persistSession&&ft()&&(!((s=globalThis?.navigator)===null||s===void 0)&&s.locks)?this.lock=aE:this.lock=Ym,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new bE(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:By()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=$m(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=$m(this.memoryStorage)),ft()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c);try{await this._notifyAllSubscribers(c.data.event,c.data.session,!1)}catch(h){this._debug("#broadcastChannel","error",h)}})}this.initialize().catch(c=>{this._debug("#initialize()","error",c)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${qy}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let i={},s="none";if(ft()&&(i=GS(window.location.href),this._isImplicitGrantCallback(i)?s="implicit":await this._isPKCECallback(i)&&(s="pkce")),ft()&&this.detectSessionInUrl&&s!=="none"){const{data:a,error:l}=await this._getSessionFromURL(i,s);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),MS(l)){const g=(e=l.details)===null||e===void 0?void 0:e.code;if(g==="identity_already_exists"||g==="identity_not_found"||g==="single_identity_not_deletable")return{error:l}}return{error:l}}const{session:c,redirectType:h}=a;return this._debug("#_initialize()","detected session in URL",c,"redirect type",h),await this._saveSession(c),setTimeout(async()=>{h==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(i){return ne(i)?this._returnResult({error:i}):this._returnResult({error:new Ui("Unexpected error during initialization",i)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var i,s,a;try{const l=await ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(i=e?.options)===null||i===void 0?void 0:i.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(a=e?.options)===null||a===void 0?void 0:a.captchaToken}},xform:jt}),{data:c,error:h}=l;if(h||!c)return this._returnResult({data:{user:null,session:null},error:h});const g=c.session,p=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:p,session:g},error:null})}catch(l){if(ne(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signUp(e){var i,s,a;try{let l;if("email"in e){const{email:v,password:T,options:_}=e;let E=null,w=null;this.flowType==="pkce"&&([E,w]=await Eo(this.storage,this.storageKey)),l=await ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:_?.emailRedirectTo,body:{email:v,password:T,data:(i=_?.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:_?.captchaToken},code_challenge:E,code_challenge_method:w},xform:jt})}else if("phone"in e){const{phone:v,password:T,options:_}=e;l=await ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:T,data:(s=_?.data)!==null&&s!==void 0?s:{},channel:(a=_?.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:_?.captchaToken}},xform:jt})}else throw new _a("You must provide either an email or phone number and a password");const{data:c,error:h}=l;if(h||!c)return await ct(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:h});const g=c.session,p=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:p,session:g},error:null})}catch(l){if(await ct(this.storage,`${this.storageKey}-code-verifier`),ne(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithPassword(e){try{let i;if("email"in e){const{email:l,password:c,options:h}=e;i=await ae(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:c,gotrue_meta_security:{captcha_token:h?.captchaToken}},xform:zm})}else if("phone"in e){const{phone:l,password:c,options:h}=e;i=await ae(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:c,gotrue_meta_security:{captcha_token:h?.captchaToken}},xform:zm})}else throw new _a("You must provide either an email or phone number and a password");const{data:s,error:a}=i;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!s||!s.session||!s.user){const l=new So;return this._returnResult({data:{user:null,session:null},error:l})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:a})}catch(i){if(ne(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithOAuth(e){var i,s,a,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(i=e.options)===null||i===void 0?void 0:i.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:i}=e;switch(i){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${i}"`)}}async signInWithEthereum(e){var i,s,a,l,c,h,g,p,v,T,_;let E,w;if("message"in e)E=e.message,w=e.signature;else{const{chain:b,wallet:R,statement:D,options:q}=e;let U;if(ft())if(typeof R=="object")U=R;else{const K=window;if("ethereum"in K&&typeof K.ethereum=="object"&&"request"in K.ethereum&&typeof K.ethereum.request=="function")U=K.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof R!="object"||!q?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");U=R}const V=new URL((i=q?.url)!==null&&i!==void 0?i:window.location.href),X=await U.request({method:"eth_requestAccounts"}).then(K=>K).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!X||X.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const P=Fy(X[0]);let J=(s=q?.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!J){const K=await U.request({method:"eth_chainId"});J=uE(K)}const Y={domain:V.host,address:P,statement:D,uri:V.href,version:"1",chainId:J,nonce:(a=q?.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(c=(l=q?.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&c!==void 0?c:new Date,expirationTime:(h=q?.signInWithEthereum)===null||h===void 0?void 0:h.expirationTime,notBefore:(g=q?.signInWithEthereum)===null||g===void 0?void 0:g.notBefore,requestId:(p=q?.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(v=q?.signInWithEthereum)===null||v===void 0?void 0:v.resources};E=fE(Y),w=await U.request({method:"personal_sign",params:[cE(E),P]})}try{const{data:b,error:R}=await ae(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:E,signature:w},!((T=e.options)===null||T===void 0)&&T.captchaToken?{gotrue_meta_security:{captcha_token:(_=e.options)===null||_===void 0?void 0:_.captchaToken}}:null),xform:jt});if(R)throw R;if(!b||!b.session||!b.user){const D=new So;return this._returnResult({data:{user:null,session:null},error:D})}return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:Object.assign({},b),error:R})}catch(b){if(ne(b))return this._returnResult({data:{user:null,session:null},error:b});throw b}}async signInWithSolana(e){var i,s,a,l,c,h,g,p,v,T,_,E;let w,b;if("message"in e)w=e.message,b=e.signature;else{const{chain:R,wallet:D,statement:q,options:U}=e;let V;if(ft())if(typeof D=="object")V=D;else{const P=window;if("solana"in P&&typeof P.solana=="object"&&("signIn"in P.solana&&typeof P.solana.signIn=="function"||"signMessage"in P.solana&&typeof P.solana.signMessage=="function"))V=P.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof D!="object"||!U?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");V=D}const X=new URL((i=U?.url)!==null&&i!==void 0?i:window.location.href);if("signIn"in V&&V.signIn){const P=await V.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},U?.signInWithSolana),{version:"1",domain:X.host,uri:X.href}),q?{statement:q}:null));let J;if(Array.isArray(P)&&P[0]&&typeof P[0]=="object")J=P[0];else if(P&&typeof P=="object"&&"signedMessage"in P&&"signature"in P)J=P;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in J&&"signature"in J&&(typeof J.signedMessage=="string"||J.signedMessage instanceof Uint8Array)&&J.signature instanceof Uint8Array)w=typeof J.signedMessage=="string"?J.signedMessage:new TextDecoder().decode(J.signedMessage),b=J.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in V)||typeof V.signMessage!="function"||!("publicKey"in V)||typeof V!="object"||!V.publicKey||!("toBase58"in V.publicKey)||typeof V.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${X.host} wants you to sign in with your Solana account:`,V.publicKey.toBase58(),...q?["",q,""]:[""],"Version: 1",`URI: ${X.href}`,`Issued At: ${(a=(s=U?.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((l=U?.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${U.signInWithSolana.notBefore}`]:[],...!((c=U?.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${U.signInWithSolana.expirationTime}`]:[],...!((h=U?.signInWithSolana)===null||h===void 0)&&h.chainId?[`Chain ID: ${U.signInWithSolana.chainId}`]:[],...!((g=U?.signInWithSolana)===null||g===void 0)&&g.nonce?[`Nonce: ${U.signInWithSolana.nonce}`]:[],...!((p=U?.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${U.signInWithSolana.requestId}`]:[],...!((T=(v=U?.signInWithSolana)===null||v===void 0?void 0:v.resources)===null||T===void 0)&&T.length?["Resources",...U.signInWithSolana.resources.map(J=>`- ${J}`)]:[]].join(`
`);const P=await V.signMessage(new TextEncoder().encode(w),"utf8");if(!P||!(P instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");b=P}}try{const{data:R,error:D}=await ae(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:xi(b)},!((_=e.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(E=e.options)===null||E===void 0?void 0:E.captchaToken}}:null),xform:jt});if(D)throw D;if(!R||!R.session||!R.user){const q=new So;return this._returnResult({data:{user:null,session:null},error:q})}return R.session&&(await this._saveSession(R.session),await this._notifyAllSubscribers("SIGNED_IN",R.session)),this._returnResult({data:Object.assign({},R),error:D})}catch(R){if(ne(R))return this._returnResult({data:{user:null,session:null},error:R});throw R}}async _exchangeCodeForSession(e){const i=await Ni(this.storage,`${this.storageKey}-code-verifier`),[s,a]=(i??"").split("/");try{if(!s&&this.flowType==="pkce")throw new DS;const{data:l,error:c}=await ae(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:jt});if(await ct(this.storage,`${this.storageKey}-code-verifier`),c)throw c;if(!l||!l.session||!l.user){const h=new So;return this._returnResult({data:{user:null,session:null,redirectType:null},error:h})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign(Object.assign({},l),{redirectType:a??null}),error:c})}catch(l){if(await ct(this.storage,`${this.storageKey}-code-verifier`),ne(l))return this._returnResult({data:{user:null,session:null,redirectType:null},error:l});throw l}}async signInWithIdToken(e){try{const{options:i,provider:s,token:a,access_token:l,nonce:c}=e,h=await ae(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:a,access_token:l,nonce:c,gotrue_meta_security:{captcha_token:i?.captchaToken}},xform:jt}),{data:g,error:p}=h;if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!g||!g.session||!g.user){const v=new So;return this._returnResult({data:{user:null,session:null},error:v})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:g,error:p})}catch(i){if(ne(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithOtp(e){var i,s,a,l,c;try{if("email"in e){const{email:h,options:g}=e;let p=null,v=null;this.flowType==="pkce"&&([p,v]=await Eo(this.storage,this.storageKey));const{error:T}=await ae(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:h,data:(i=g?.data)!==null&&i!==void 0?i:{},create_user:(s=g?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:g?.captchaToken},code_challenge:p,code_challenge_method:v},redirectTo:g?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:T})}if("phone"in e){const{phone:h,options:g}=e,{data:p,error:v}=await ae(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:h,data:(a=g?.data)!==null&&a!==void 0?a:{},create_user:(l=g?.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:g?.captchaToken},channel:(c=g?.channel)!==null&&c!==void 0?c:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:p?.message_id},error:v})}throw new _a("You must provide either an email or phone number.")}catch(h){if(await ct(this.storage,`${this.storageKey}-code-verifier`),ne(h))return this._returnResult({data:{user:null,session:null},error:h});throw h}}async verifyOtp(e){var i,s;try{let a,l;"options"in e&&(a=(i=e.options)===null||i===void 0?void 0:i.redirectTo,l=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:c,error:h}=await ae(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:a,xform:jt});if(h)throw h;if(!c)throw new Error("An error occurred on token verification.");const g=c.session,p=c.user;return g?.access_token&&(await this._saveSession(g),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",g)),this._returnResult({data:{user:p,session:g},error:null})}catch(a){if(ne(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(e){var i,s,a,l,c;try{let h=null,g=null;this.flowType==="pkce"&&([h,g]=await Eo(this.storage,this.storageKey));const p=await ae(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(i=e.options)===null||i===void 0?void 0:i.redirectTo)!==null&&s!==void 0?s:void 0}),!((a=e?.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:h,code_challenge_method:g}),headers:this.headers,xform:nE});return!((l=p.data)===null||l===void 0)&&l.url&&ft()&&!(!((c=e.options)===null||c===void 0)&&c.skipBrowserRedirect)&&window.location.assign(p.data.url),this._returnResult(p)}catch(h){if(await ct(this.storage,`${this.storageKey}-code-verifier`),ne(h))return this._returnResult({data:null,error:h});throw h}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:i},error:s}=e;if(s)throw s;if(!i)throw new Lt;const{error:a}=await ae(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:i.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(e){if(ne(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const i=`${this.url}/resend`;if("email"in e){const{email:s,type:a,options:l}=e,{error:c}=await ae(this.fetch,"POST",i,{headers:this.headers,body:{email:s,type:a,gotrue_meta_security:{captcha_token:l?.captchaToken}},redirectTo:l?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:c})}else if("phone"in e){const{phone:s,type:a,options:l}=e,{data:c,error:h}=await ae(this.fetch,"POST",i,{headers:this.headers,body:{phone:s,type:a,gotrue_meta_security:{captcha_token:l?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:c?.message_id},error:h})}throw new _a("You must provide either an email or phone number and a type")}catch(i){if(ne(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async i=>i))}async _acquireLock(e,i){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await s,await i()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=i();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const i=await this.__loadSession();return await e(i)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const i=await Ni(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",i),i!==null&&(this._isValidSession(i)?e=i:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<Sc:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const c=await Ni(this.userStorage,this.storageKey+"-user");c?.user?e.user=c.user:e.user=wc()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const c={value:this.suppressGetSessionWarning};e.user=ZS(e.user,c),c.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{session:null},error:l}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const i=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return i.data.user&&(this.suppressGetSessionWarning=!0),i}async _getUser(e){try{return e?await ae(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:si}):await this._useSession(async i=>{var s,a,l;const{data:c,error:h}=i;if(h)throw h;return!(!((s=c.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Lt}:await ae(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(a=c.session)===null||a===void 0?void 0:a.access_token)!==null&&l!==void 0?l:void 0,xform:si})})}catch(i){if(ne(i))return Ec(i)&&(await this._removeSession(),await ct(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:i});throw i}}async updateUser(e,i={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,i))}async _updateUser(e,i={}){try{return await this._useSession(async s=>{const{data:a,error:l}=s;if(l)throw l;if(!a.session)throw new Lt;const c=a.session;let h=null,g=null;this.flowType==="pkce"&&e.email!=null&&([h,g]=await Eo(this.storage,this.storageKey));const{data:p,error:v}=await ae(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:i?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:h,code_challenge_method:g}),jwt:c.access_token,xform:si});if(v)throw v;return c.user=p.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),this._returnResult({data:{user:c.user},error:null})})}catch(s){if(await ct(this.storage,`${this.storageKey}-code-verifier`),ne(s))return this._returnResult({data:{user:null},error:s});throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Lt;const i=Date.now()/1e3;let s=i,a=!0,l=null;const{payload:c}=Sa(e.access_token);if(c.exp&&(s=c.exp,a=s<=i),a){const{data:h,error:g}=await this._callRefreshToken(e.refresh_token);if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!h)return{data:{user:null,session:null},error:null};l=h}else{const{data:h,error:g}=await this._getUser(e.access_token);if(g)return this._returnResult({data:{user:null,session:null},error:g});l={access_token:e.access_token,refresh_token:e.refresh_token,user:h.user,token_type:"bearer",expires_in:s-i,expires_at:s},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return this._returnResult({data:{user:l.user,session:l},error:null})}catch(i){if(ne(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async i=>{var s;if(!e){const{data:c,error:h}=i;if(h)throw h;e=(s=c.session)!==null&&s!==void 0?s:void 0}if(!e?.refresh_token)throw new Lt;const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{user:null,session:null},error:l}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(i){if(ne(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async _getSessionFromURL(e,i){try{if(!ft())throw new Ta("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ta(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(i){case"implicit":if(this.flowType==="pkce")throw new Lm("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ta("Not a valid implicit grant flow url.");break;default:}if(i==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Lm("No code detected.");const{data:q,error:U}=await this._exchangeCodeForSession(e.code);if(U)throw U;const V=new URL(window.location.href);return V.searchParams.delete("code"),window.history.replaceState(window.history.state,"",V.toString()),{data:{session:q.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:a,access_token:l,refresh_token:c,expires_in:h,expires_at:g,token_type:p}=e;if(!l||!h||!c||!p)throw new Ta("No session defined in URL");const v=Math.round(Date.now()/1e3),T=parseInt(h);let _=v+T;g&&(_=parseInt(g));const E=_-v;E*1e3<=Ro&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${E}s, should have been closer to ${T}s`);const w=_-T;v-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,_,v):v-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,_,v);const{data:b,error:R}=await this._getUser(l);if(R)throw R;const D={provider_token:s,provider_refresh_token:a,access_token:l,expires_in:T,expires_at:_,refresh_token:c,token_type:p,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:D,redirectType:e.type},error:null})}catch(s){if(ne(s))return this._returnResult({data:{session:null,redirectType:null},error:s});throw s}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const i=await Ni(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&i)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async i=>{var s;const{data:a,error:l}=i;if(l&&!Ec(l))return this._returnResult({error:l});const c=(s=a.session)===null||s===void 0?void 0:s.access_token;if(c){const{error:h}=await this.admin.signOut(c,e);if(h&&!(IS(h)&&(h.status===404||h.status===401||h.status===403)||Ec(h)))return this._returnResult({error:h})}return e!=="others"&&(await this._removeSession(),await ct(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const i=qS(),s={id:i,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",i),this.stateChangeEmitters.delete(i)}};return this._debug("#onAuthStateChange()","registered callback with id",i),this.stateChangeEmitters.set(i,s),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(i)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async i=>{var s,a;try{const{data:{session:l},error:c}=i;if(c)throw c;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}})}async resetPasswordForEmail(e,i={}){let s=null,a=null;this.flowType==="pkce"&&([s,a]=await Eo(this.storage,this.storageKey,!0));try{return await ae(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:a,gotrue_meta_security:{captcha_token:i.captchaToken}},headers:this.headers,redirectTo:i.redirectTo})}catch(l){if(await ct(this.storage,`${this.storageKey}-code-verifier`),ne(l))return this._returnResult({data:null,error:l});throw l}}async getUserIdentities(){var e;try{const{data:i,error:s}=await this.getUser();if(s)throw s;return this._returnResult({data:{identities:(e=i.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(i){if(ne(i))return this._returnResult({data:null,error:i});throw i}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var i;try{const{data:s,error:a}=await this._useSession(async l=>{var c,h,g,p,v;const{data:T,error:_}=l;if(_)throw _;const E=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(c=e.options)===null||c===void 0?void 0:c.redirectTo,scopes:(h=e.options)===null||h===void 0?void 0:h.scopes,queryParams:(g=e.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:!0});return await ae(this.fetch,"GET",E,{headers:this.headers,jwt:(v=(p=T.session)===null||p===void 0?void 0:p.access_token)!==null&&v!==void 0?v:void 0})});if(a)throw a;return ft()&&!(!((i=e.options)===null||i===void 0)&&i.skipBrowserRedirect)&&window.location.assign(s?.url),this._returnResult({data:{provider:e.provider,url:s?.url},error:null})}catch(s){if(ne(s))return this._returnResult({data:{provider:e.provider,url:null},error:s});throw s}}async linkIdentityIdToken(e){return await this._useSession(async i=>{var s;try{const{error:a,data:{session:l}}=i;if(a)throw a;const{options:c,provider:h,token:g,access_token:p,nonce:v}=e,T=await ae(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=l?.access_token)!==null&&s!==void 0?s:void 0,body:{provider:h,id_token:g,access_token:p,nonce:v,link_identity:!0,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:jt}),{data:_,error:E}=T;return E?this._returnResult({data:{user:null,session:null},error:E}):!_||!_.session||!_.user?this._returnResult({data:{user:null,session:null},error:new So}):(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("USER_UPDATED",_.session)),this._returnResult({data:_,error:E}))}catch(a){if(await ct(this.storage,`${this.storageKey}-code-verifier`),ne(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(e){try{return await this._useSession(async i=>{var s,a;const{data:l,error:c}=i;if(c)throw c;return await ae(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0})})}catch(i){if(ne(i))return this._returnResult({data:null,error:i});throw i}}async _refreshAccessToken(e){const i=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{const s=Date.now();return await VS(async a=>(a>0&&await BS(200*Math.pow(2,a-1)),this._debug(i,"refreshing attempt",a),await ae(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:jt})),(a,l)=>{const c=200*Math.pow(2,a);return l&&Ac(l)&&Date.now()+c-s<Ro})}catch(s){if(this._debug(i,"error",s),ne(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(i,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,i){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:i.redirectTo,scopes:i.scopes,queryParams:i.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",i,"url",s),ft()&&!i.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,i;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const a=await Ni(this.storage,this.storageKey);if(a&&this.userStorage){let c=await Ni(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!c&&(c={user:a.user},await No(this.userStorage,this.storageKey+"-user",c)),a.user=(e=c?.user)!==null&&e!==void 0?e:wc()}else if(a&&!a.user&&!a.user){const c=await Ni(this.storage,this.storageKey+"-user");c&&c?.user?(a.user=c.user,await ct(this.storage,this.storageKey+"-user"),await No(this.storage,this.storageKey,a)):a.user=wc()}if(this._debug(s,"session from storage",a),!this._isValidSession(a)){this._debug(s,"session is not valid"),a!==null&&await this._removeSession();return}const l=((i=a.expires_at)!==null&&i!==void 0?i:1/0)*1e3-Date.now()<Sc;if(this._debug(s,`session has${l?"":" not"} expired with margin of ${Sc}s`),l){if(this.autoRefreshToken&&a.refresh_token){const{error:c}=await this._callRefreshToken(a.refresh_token);c&&(console.error(c),Ac(c)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",c),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:c,error:h}=await this._getUser(a.access_token);!h&&c?.user?(a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(c){console.error("Error getting user data:",c),this._debug(s,"error getting user data, skipping SIGNED_IN notification",c)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(s,"error",a),console.error(a);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var i,s;if(!e)throw new Lt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Va;const{data:l,error:c}=await this._refreshAccessToken(e);if(c)throw c;if(!l.session)throw new Lt;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const h={data:l.session,error:null};return this.refreshingDeferred.resolve(h),h}catch(l){if(this._debug(a,"error",l),ne(l)){const c={data:null,error:l};return Ac(l)||await this._removeSession(),(i=this.refreshingDeferred)===null||i===void 0||i.resolve(c),c}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(l),l}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,i,s=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",i,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:i});const l=[],c=Array.from(this.stateChangeEmitters.values()).map(async h=>{try{await h.callback(e,i)}catch(g){l.push(g)}});if(await Promise.all(c),l.length>0){for(let h=0;h<l.length;h+=1)console.error(l[h]);throw l[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await ct(this.storage,`${this.storageKey}-code-verifier`);const i=Object.assign({},e),s=i.user&&i.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&i.user&&await No(this.userStorage,this.storageKey+"-user",{user:i.user});const a=Object.assign({},i);delete a.user;const l=Bm(a);await No(this.storage,this.storageKey,l)}else{const a=Bm(i);await No(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await ct(this.storage,this.storageKey),await ct(this.storage,this.storageKey+"-code-verifier"),await ct(this.storage,this.storageKey+"-user"),this.userStorage&&await ct(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ft()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(i){console.error("removing visibilitychange callback failed",i)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ro);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const i=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=i,i&&typeof i=="object"&&typeof i.unref=="function"?i.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(i)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const i=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,i&&clearTimeout(i)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async i=>{const{data:{session:s}}=i;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((s.expires_at*1e3-e)/Ro);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Ro}ms, refresh threshold is ${Oc} ticks`),a<=Oc&&await this._callRefreshToken(s.refresh_token)})}catch(i){console.error("Auto refresh tick failed with error. This is likely a transient error.",i)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof zy)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ft()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(e){this._debug("#visibilityChangedCallback","error",e)}},window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const i=`#_onVisibilityChanged(${e})`;this._debug(i,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(i,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,i,s){const a=[`provider=${encodeURIComponent(i)}`];if(s?.redirectTo&&a.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s?.scopes&&a.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[l,c]=await Eo(this.storage,this.storageKey),h=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(c)}`});a.push(h.toString())}if(s?.queryParams){const l=new URLSearchParams(s.queryParams);a.push(l.toString())}return s?.skipBrowserRedirect&&a.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async i=>{var s;const{data:a,error:l}=i;return l?this._returnResult({data:null,error:l}):await ae(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=a?.session)===null||s===void 0?void 0:s.access_token})})}catch(i){if(ne(i))return this._returnResult({data:null,error:i});throw i}}async _enroll(e){try{return await this._useSession(async i=>{var s,a;const{data:l,error:c}=i;if(c)return this._returnResult({data:null,error:c});const h=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:g,error:p}=await ae(this.fetch,"POST",`${this.url}/factors`,{body:h,headers:this.headers,jwt:(s=l?.session)===null||s===void 0?void 0:s.access_token});return p?this._returnResult({data:null,error:p}):(e.factorType==="totp"&&g.type==="totp"&&(!((a=g?.totp)===null||a===void 0)&&a.qr_code)&&(g.totp.qr_code=`data:image/svg+xml;utf-8,${g.totp.qr_code}`),this._returnResult({data:g,error:null}))})}catch(i){if(ne(i))return this._returnResult({data:null,error:i});throw i}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async i=>{var s;const{data:a,error:l}=i;if(l)return this._returnResult({data:null,error:l});const c=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?vE(e.webauthn.credential_response):_E(e.webauthn.credential_response)})}:{code:e.code}),{data:h,error:g}=await ae(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:c,headers:this.headers,jwt:(s=a?.session)===null||s===void 0?void 0:s.access_token});return g?this._returnResult({data:null,error:g}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+h.expires_in},h)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",h),this._returnResult({data:h,error:g}))})}catch(i){if(ne(i))return this._returnResult({data:null,error:i});throw i}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async i=>{var s;const{data:a,error:l}=i;if(l)return this._returnResult({data:null,error:l});const c=await ae(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(s=a?.session)===null||s===void 0?void 0:s.access_token});if(c.error)return c;const{data:h}=c;if(h.type!=="webauthn")return{data:h,error:null};switch(h.webauthn.type){case"create":return{data:Object.assign(Object.assign({},h),{webauthn:Object.assign(Object.assign({},h.webauthn),{credential_options:Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:gE(h.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},h),{webauthn:Object.assign(Object.assign({},h.webauthn),{credential_options:Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:yE(h.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(i){if(ne(i))return this._returnResult({data:null,error:i});throw i}})}async _challengeAndVerify(e){const{data:i,error:s}=await this._challenge({factorId:e.factorId});return s?this._returnResult({data:null,error:s}):await this._verify({factorId:e.factorId,challengeId:i.id,code:e.code})}async _listFactors(){var e;const{data:{user:i},error:s}=await this.getUser();if(s)return{data:null,error:s};const a={all:[],phone:[],totp:[],webauthn:[]};for(const l of(e=i?.factors)!==null&&e!==void 0?e:[])a.all.push(l),l.status==="verified"&&a[l.factor_type].push(l);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(e){var i,s,a,l;if(e)try{const{payload:E}=Sa(e);let w=null;E.aal&&(w=E.aal);let b=w;const{data:{user:R},error:D}=await this.getUser(e);if(D)return this._returnResult({data:null,error:D});((s=(i=R?.factors)===null||i===void 0?void 0:i.filter(V=>V.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(b="aal2");const U=E.amr||[];return{data:{currentLevel:w,nextLevel:b,currentAuthenticationMethods:U},error:null}}catch(E){if(ne(E))return this._returnResult({data:null,error:E});throw E}const{data:{session:c},error:h}=await this.getSession();if(h)return this._returnResult({data:null,error:h});if(!c)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:g}=Sa(c.access_token);let p=null;g.aal&&(p=g.aal);let v=p;((l=(a=c.user.factors)===null||a===void 0?void 0:a.filter(E=>E.status==="verified"))!==null&&l!==void 0?l:[]).length>0&&(v="aal2");const _=g.amr||[];return{data:{currentLevel:p,nextLevel:v,currentAuthenticationMethods:_},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async i=>{const{data:{session:s},error:a}=i;return a?this._returnResult({data:null,error:a}):s?await ae(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:s.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new Lt})})}catch(i){if(ne(i))return this._returnResult({data:null,error:i});throw i}}async _approveAuthorization(e,i){try{return await this._useSession(async s=>{const{data:{session:a},error:l}=s;if(l)return this._returnResult({data:null,error:l});if(!a)return this._returnResult({data:null,error:new Lt});const c=await ae(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:h=>({data:h,error:null})});return c.data&&c.data.redirect_url&&ft()&&!i?.skipBrowserRedirect&&window.location.assign(c.data.redirect_url),c})}catch(s){if(ne(s))return this._returnResult({data:null,error:s});throw s}}async _denyAuthorization(e,i){try{return await this._useSession(async s=>{const{data:{session:a},error:l}=s;if(l)return this._returnResult({data:null,error:l});if(!a)return this._returnResult({data:null,error:new Lt});const c=await ae(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:h=>({data:h,error:null})});return c.data&&c.data.redirect_url&&ft()&&!i?.skipBrowserRedirect&&window.location.assign(c.data.redirect_url),c})}catch(s){if(ne(s))return this._returnResult({data:null,error:s});throw s}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:i},error:s}=e;return s?this._returnResult({data:null,error:s}):i?await ae(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new Lt})})}catch(e){if(ne(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async i=>{const{data:{session:s},error:a}=i;return a?this._returnResult({data:null,error:a}):s?(await ae(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Lt})})}catch(i){if(ne(i))return this._returnResult({data:null,error:i});throw i}}async fetchJwk(e,i={keys:[]}){let s=i.keys.find(h=>h.kid===e);if(s)return s;const a=Date.now();if(s=this.jwks.keys.find(h=>h.kid===e),s&&this.jwks_cached_at+RS>a)return s;const{data:l,error:c}=await ae(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=a,s=l.keys.find(h=>h.kid===e),!s)?null:s}async getClaims(e,i={}){try{let s=e;if(!s){const{data:E,error:w}=await this.getSession();if(w||!E.session)return this._returnResult({data:null,error:w});s=E.session.access_token}const{header:a,payload:l,signature:c,raw:{header:h,payload:g}}=Sa(s);i?.allowExpired||XS(l.exp);const p=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,i?.keys?{keys:i.keys}:i?.jwks);if(!p){const{error:E}=await this.getUser(s);if(E)throw E;return{data:{claims:l,header:a,signature:c},error:null}}const v=QS(a.alg),T=await crypto.subtle.importKey("jwk",p,v,!0,["verify"]);if(!await crypto.subtle.verify(v,T,c,LS(`${h}.${g}`)))throw new qc("Invalid JWT signature");return{data:{claims:l,header:a,signature:c},error:null}}catch(s){if(ne(s))return this._returnResult({data:null,error:s});throw s}}}Ys.nextInstanceID={};const NE=Ys,IE="2.95.3";let qs="";typeof Deno<"u"?qs="deno":typeof document<"u"?qs="web":typeof navigator<"u"&&navigator.product==="ReactNative"?qs="react-native":qs="node";const ME={"X-Client-Info":`supabase-js-${qs}/${IE}`},DE={headers:ME},UE={schema:"public"},xE={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},kE={};function Ks(t){"@babel/helpers - typeof";return Ks=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ks(t)}function OE(t,e){if(Ks(t)!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var s=i.call(t,e);if(Ks(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function LE(t){var e=OE(t,"string");return Ks(e)=="symbol"?e:e+""}function PE(t,e,i){return(e=LE(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Km(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),i.push.apply(i,s)}return i}function Fe(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?Km(Object(i),!0).forEach(function(s){PE(t,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Km(Object(i)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(i,s))})}return t}const qE=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),GE=()=>Headers,HE=(t,e,i)=>{const s=qE(i),a=GE();return async(l,c)=>{var h;const g=(h=await e())!==null&&h!==void 0?h:t;let p=new a(c?.headers);return p.has("apikey")||p.set("apikey",t),p.has("Authorization")||p.set("Authorization",`Bearer ${g}`),s(l,Fe(Fe({},c),{},{headers:p}))}};function BE(t){return t.endsWith("/")?t:t+"/"}function VE(t,e){var i,s;const{db:a,auth:l,realtime:c,global:h}=t,{db:g,auth:p,realtime:v,global:T}=e,_={db:Fe(Fe({},g),a),auth:Fe(Fe({},p),l),realtime:Fe(Fe({},v),c),storage:{},global:Fe(Fe(Fe({},T),h),{},{headers:Fe(Fe({},(i=T?.headers)!==null&&i!==void 0?i:{}),(s=h?.headers)!==null&&s!==void 0?s:{})}),accessToken:async()=>""};return t.accessToken?_.accessToken=t.accessToken:delete _.accessToken,_}function zE(t){const e=t?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(BE(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var FE=class extends NE{constructor(t){super(t)}},$E=class{constructor(t,e,i){var s,a;this.supabaseUrl=t,this.supabaseKey=e;const l=zE(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,h={db:UE,realtime:kE,auth:Fe(Fe({},xE),{},{storageKey:c}),global:DE},g=VE(i??{},h);if(this.storageKey=(s=g.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(a=g.global.headers)!==null&&a!==void 0?a:{},g.accessToken)this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(v,T)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(T)} is not possible`)}});else{var p;this.auth=this._initSupabaseAuthClient((p=g.auth)!==null&&p!==void 0?p:{},this.headers,g.global.fetch)}this.fetch=HE(e,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(Fe({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(v=>this.realtime.setAuth(v)).catch(v=>console.warn("Failed to set initial Realtime auth token:",v)),this.rest=new IT(new URL("rest/v1",l).href,{headers:this.headers,schema:g.db.schema,fetch:this.fetch,timeout:g.db.timeout,urlLengthLimit:g.db.urlLengthLimit}),this.storage=new ES(this.storageUrl.href,this.headers,this.fetch,i?.storage),g.accessToken||this._listenForAuthEvents()}get functions(){return new ST(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},i={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,i)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,i;if(t.accessToken)return await t.accessToken();const{data:s}=await t.auth.getSession();return(e=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:i,storage:s,userStorage:a,storageKey:l,flowType:c,lock:h,debug:g,throwOnError:p},v,T){const _={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new FE({url:this.authUrl.href,headers:Fe(Fe({},_),v),storageKey:l,autoRefreshToken:t,persistSession:e,detectSessionInUrl:i,storage:s,userStorage:a,flowType:c,lock:h,debug:g,throwOnError:p,fetch:T,hasCustomAuthorizationHeader:Object.keys(this.headers).some(E=>E.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new JT(this.realtimeUrl.href,Fe(Fe({},t),{},{params:Fe(Fe({},{apikey:this.supabaseKey}),t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e?.access_token)})}_handleTokenChanged(t,e,i){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==i?(this.changedAccessToken=i,this.realtime.setAuth(i)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const JE=(t,e,i)=>new $E(t,e,i);function YE(){if(typeof window<"u")return!1;const t=globalThis.process;if(!t)return!1;const e=t.version;if(e==null)return!1;const i=e.match(/^v(\d+)\./);return i?parseInt(i[1],10)<=18:!1}YE()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const KE="https://wtinjinsqmfnwiclmrzy.supabase.co",XE="sb_publishable_LtnmMFqw0J32SGdDBfX-wA_dmye2Cc3",yt=JE(KE,XE);async function QE(t){const e=t.includes("youtube.com")||t.includes("youtu.be");try{if(e){const s=await(await fetch(`https://noembed.com/embed?url=${t}`)).json();return{url:t,title:s.title||"Unknown Video",description:`Video by ${s.author_name}`,image:s.thumbnail_url||""}}else{const i=await fetch(`https://api.microlink.io?url=${encodeURIComponent(t)}`),{data:s}=await i.json();return{url:t,title:s.title||"No Title",description:s.description||"",image:s.image?.url||""}}}catch(i){return console.error("Metadata fetch failed:",i),{url:t,title:t,description:"Metadata fetch failed"}}}async function WE(t){const e=await QE(t);console.log("Metadata received:",e);const{data:i,error:s}=await yt.from("Bookmarks").insert([{url:e.url,title:e.title,description:e.description}]).select();s&&console.error("Supabase Error:",s.message)}function ZE(){return crypto.randomUUID?crypto.randomUUID():Date.now().toString()}async function Xm(t,e){const{data:i,error:s}=await yt.from("Bookmarks").select();if(s)console.error(s);else{const a=i.map(l=>({...l,customKey:ZE()}));t(a),e(a)}}async function jE(t){const{data:e,error:i}=await yt.from("Bookmarks").delete().eq("url_id",t).select();i?console.error(i):window.location.reload()}function eA({setBookmarkLinks:t}){const[e,i]=Ne.useState(""),[s,a]=Ne.useState([]),l=Ne.useRef();Ne.useEffect(()=>{Xm(a,t)},[]);function c(v){jE(v)}function h(v){i(v.target.value)}async function g(){const v=e.trim();l.disabled=!0,v!==""&&(i(""),await WE(v),await Xm(a,t),l.disabled=!1)}function p(v){v.key==="Enter"&&v.preventDefault()}return B.jsxs("div",{className:"bookmark-container",children:[B.jsxs("div",{className:"add-bookmark",children:[B.jsx("div",{className:"add-bookmark-title",children:"Add a new bookmark"}),B.jsxs("form",{action:"",onSubmit:v=>{v.preventDefault(),g()},children:[B.jsx("input",{type:"url",placeholder:"https://google.com",value:e,onChange:h,onKeyDown:p}),B.jsx("button",{type:"submit",className:"primary-button",ref:l,children:"Add bookmark"})]})]}),B.jsxs("div",{className:"existing-bookmark",children:[B.jsx("h3",{children:"Your bookmarks"}),B.jsx("ul",{className:"existing-bookmark-list",children:s.map(v=>B.jsxs("div",{className:"existing-bookmark-item",draggable:!0,onDragStart:T=>{const _=JSON.stringify({title:v.title,url:v.url});T.dataTransfer.setData("application/json",_),T.dataTransfer.effectAllowed="copy"},style:{cursor:"grab"},children:[B.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",className:"trash_icon",viewBox:"0 0 15 15 ","data-id":v.url_id,onClick:T=>{c(T.target.dataset.id)},children:[B.jsx("path",{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z"}),B.jsx("path",{d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z"})]}),B.jsxs("a",{href:v.url,target:"_blank",rel:"noreferrer",children:[v.title," "]})]},v.customKey))})]})]})}const Qm=new Date().toISOString().split("T")[0];function tA({setTaskModal:t}){const e=Ne.useRef(),i=Ne.useRef(),s=Ne.useRef(),a=Ne.useRef();async function l(h,g,p,v){const{data:T,error:_}=await yt.from("Projects").insert([{due_by:g,status:!1,project_name:h,project_details:p,priority:v}]);if(_){console.error("Supabase Error Details:",_.message,_.details,_.hint);return}}async function c(){const h=e.current.value.trim(),g=i.current.value,p=s.current.value||"",v=a.current.value;h&&(await l(h,g,p,v),t(!1))}return B.jsxs("div",{className:"task-modal-container",children:[B.jsxs("div",{className:"taskHeader",children:[B.jsx("h1",{children:"Add a New Project "}),B.jsx("button",{id:"exit",onClick:()=>{t(!1)},children:"x"})]}),B.jsxs("form",{className:"taskForm",onSubmit:h=>{h.preventDefault(),c()},children:[B.jsxs("div",{className:"inputGroup",children:[B.jsx("label",{htmlFor:"task_name",children:"Task"}),B.jsx("input",{type:"text",id:"task_name",ref:e,placeholder:"Make a ETL Pipeline",required:!0})]}),B.jsxs("div",{className:"inputGroup",children:[B.jsx("label",{htmlFor:"due_by",children:"Due by"}),B.jsx("input",{type:"date",id:"due_by",ref:i,min:Qm,defaultValue:Qm})]}),B.jsxs("div",{className:"inputGroup",children:[B.jsx("label",{htmlFor:"details",children:"Project Details"}),B.jsx("textarea",{type:"textbox",id:"details",ref:s,placeholder:"This is going to organize incoming raw json data...."})]}),B.jsxs("div",{className:"inputGroup",children:[B.jsx("label",{htmlFor:"priority",children:"Select Priority"}),B.jsxs("select",{name:"priority",ref:a,id:"priority",children:[B.jsx("option",{value:"High",children:"High"}),B.jsx("option",{value:"Medium",children:"Medium"}),B.jsx("option",{value:"Low",children:"Low"})]})]}),B.jsx("button",{type:"submit",className:"taskSubmitBtn",children:"List Project"})]})]})}function nA({content:t,contentType:e}){return B.jsx("div",{style:e==="info"?null:{backgroundColor:"#ff00002e"},className:"popup-container",children:B.jsx("h4",{children:t})})}const iA=(t,e=500)=>{const i=Ne.useRef(),s=Ne.useCallback(l=>{i.current=setTimeout(()=>{t(l)},e)},[t,e]),a=Ne.useCallback(()=>{clearTimeout(i.current)},[]);return l=>({onMouseDown:()=>s(l),onMouseUp:a,onMouseLeave:a,onTouchStart:()=>s(l),onTouchEnd:a})};function oA({setProjs:t}){const[e,i]=Ne.useState([]),[s,a]=Ne.useState(!1),[l,c]=Ne.useState(!1),[h,g]=Ne.useState(""),[p,v]=Ne.useState({High:!0,Medium:!0,Low:!0}),[T,_]=Ne.useState(""),[E,w]=Ne.useState("");async function b(){const{data:Y,error:K}=await yt.from("Projects").select();K?(console.error(K),a(!0),_("Error"),w("Please verify your internet connection.")):(console.log(Y),i(Y),t(Y))}async function R(Y){console.log("deleting",Y);const{data:K,error:oe}=await yt.from("Projects").delete().eq("proj_id",Y);oe?(console.error(oe),a(!0),_("Error"),w("Please verify your internet connection.")):(await b(),a(!0),_("info"),w("The Project was removed"))}async function D(Y,K){if(!Y){console.warn("Operation aborted: ID is missing.");return}const{data:oe,error:pe}=await yt.from("Projects").select("links").eq("proj_id",Y).single();if(pe||!oe){console.error("Fetch Error or No Data:",pe),a(!0),_("Error"),w("There was an error.");return}let Te={...oe?.links??{}};Te[K]&&delete Te[K];const Oe=Object.keys(Te).length===0?null:Te,{error:Ee}=await yt.from("Projects").update({links:Oe}).eq("proj_id",Y).select();Ee?(console.error("Delete Error:",Ee),a(!0),_("error"),w("There was an error")):(await b(),a(!0),_("info"),w("The Bookmark was removed"))}async function q(Y,K,oe){const{title:pe,url:Te}=JSON.parse(K),Oe={...oe||{},[pe]:Te},{error:Ee}=await yt.from("Projects").update({links:Oe}).eq("proj_id",Y);Ee?(console.error("Error updating links:",Ee),a(!0),_("Error"),w(Ee.message)):(await b(),a(!0),_("info"),w("The Bookmark was added"))}const U=iA(R,500);Ne.useEffect(()=>{b()},[l,s]);async function V(){c(!0)}function X(Y){return{High:"H",Medium:"M",Low:"L"}[Y]}function P(Y){return{High:"#e0575734",Medium:"#e3c24d59",Low:"#57b88b51"}[Y]}const J=Y=>{const{id:K,checked:oe}=Y.target;v(pe=>({...pe,[K]:oe}))};return B.jsxs("div",{className:"task-container",children:[B.jsxs("div",{className:"task-container-header",children:[B.jsx("div",{className:"sorter",children:Object.keys(p).map(Y=>B.jsxs("div",{className:"sorter-item",children:[B.jsx("label",{htmlFor:Y,children:B.jsx("span",{className:"priority-badge",style:{color:P(Y)},children:X(Y)})}),B.jsx("input",{type:"checkbox",className:"Sort-checkBox",name:"sorter",onChange:J,id:Y,checked:p[Y],value:Y})]},Y))}),B.jsx("button",{type:"button",className:"primary-button",id:"add-task-btn",onClick:V,children:"Add a new task"})]}),l&&B.jsx(tA,{setTaskModal:c}),B.jsxs("div",{className:"existing-tasks",children:[B.jsx("h3",{children:"Your tasks"}),B.jsx("ul",{className:"existing-tasks-list",children:e.map(Y=>p[Y.priority]==!0?B.jsxs("div",{...U(Y.proj_id),className:"existing-tasks-item",onDragOver:K=>K.preventDefault(),onDrop:K=>{K.preventDefault();const oe=K.dataTransfer.getData("application/json");oe&&q(Y.proj_id,oe,Y.links)},onClick:()=>{h!==Y.proj_id?g(Y.proj_id):g("")},style:{"--accent-bar":P(Y.priority),border:"2px dashed transparent",backgroundColor:Y.proj_id===h?P(Y.priority):"var(--card)"},children:[B.jsxs("div",{className:"task-item-header",children:[B.jsx("h3",{children:Y.project_name}),B.jsxs("div",{className:"task-item-meta",children:[B.jsx("span",{className:"priority-badge",style:{color:P(Y.priority)},children:X(Y.priority)}),B.jsx("svg",{className:`chevron-icon ${h===Y.proj_id?"chevron-open":""}`,xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:B.jsx("polyline",{points:"6 9 12 15 18 9"})})]})]}),B.jsxs("div",{className:"task-item-values",style:{maxHeight:h===Y.proj_id?"300px":"0px",opacity:h===Y.proj_id?1:0,transition:"all 0.3s ease-in-out"},children:[B.jsx("div",{className:"task-item-date",children:B.jsx("p",{children:Y.due_by})}),Y.project_details&&B.jsxs("div",{className:"task-item-details",children:["Description : ",Y.project_details]}),B.jsx("div",{children:B.jsxs("ul",{className:"task-item-links",children:["Relevant Links:",Y.links?Object.entries(Y.links).map(([K,oe])=>K&&oe?B.jsxs("li",{className:"existing-bookmark-item",children:[B.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 15 15 ",fill:"currentColor",className:"trash_icon",onClick:pe=>{pe.stopPropagation(),D(Y.proj_id,K)},children:[B.jsx("path",{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z"}),B.jsx("path",{d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z"})]}),B.jsx("a",{href:oe,target:"_blank",rel:"noopener noreferrer",children:K})]},oe):null):B.jsx("p",{children:"Drag and Drop Links Here"})]})})]})]},Y.proj_id):null)})]}),s?(setTimeout(()=>{a(!1)},3e3),B.jsx(nA,{content:E,contentType:T})):null]})}function sA({setLoading:t,setCurrentUser:e}){const[i,s]=Ne.useState(!0),a=Ne.useRef(),l=Ne.useRef(),c=Ne.useRef(),h=Ne.useRef();async function g(){if(t(!0),i){const{data:p,error:v}=await yt.auth.signUp({email:a.current.value,password:c.current.value,options:{data:{full_name:h.current.value,display_name:l.current.value}}});if(!v)return;if(v){alert(v.message),console.error(v.message),window.location.reload();return}}else{const{data:p,error:v}=await yt.auth.signInWithPassword({email:a.current.value,password:c.current.value});if(v||(t(!1),e(p.user)),v){alert(v.message),window.location.reload();return}}}return B.jsxs("div",{className:"authContainer",children:[B.jsxs("div",{className:"authHeader",children:[B.jsx("h1",{children:i?"Create Account":"Welcome Back"}),B.jsx("p",{children:i?"Join Knowledge Auditor today":"Log in to your dashboard"})]}),B.jsxs("form",{className:"authForm",onSubmit:p=>{p.preventDefault(),g()},children:[i&&B.jsxs(B.Fragment,{children:[B.jsxs("div",{className:"inputGroup",children:[B.jsx("label",{htmlFor:"full_name",children:"Full name"}),B.jsx("input",{type:"text",id:"full_name",ref:h,placeholder:"johndoe",required:!0})]}),B.jsxs("div",{className:"inputGroup",children:[B.jsx("label",{htmlFor:"username",children:"Username"}),B.jsx("input",{type:"text",id:"username",ref:l,placeholder:"johndoe2091",required:!0})]})]}),B.jsxs("div",{className:"inputGroup",children:[B.jsx("label",{htmlFor:"email",children:"Email Address"}),B.jsx("input",{type:"email",id:"email",ref:a,placeholder:"name@company.com",required:!0})]}),B.jsxs("div",{className:"inputGroup",children:[B.jsx("label",{htmlFor:"password",children:"Password"}),B.jsx("input",{type:"password",id:"password",ref:c,placeholder:"",required:!0})]}),B.jsx("button",{type:"submit",className:"authSubmitBtn",children:i?"Sign Up":"Sign In"})]}),B.jsxs("div",{className:"authFooter",children:[B.jsx("span",{children:i?"Already have an account?":"Don't have an account?"}),B.jsx("button",{className:"toggleBtn",onClick:()=>s(!i),children:i?"Log In":"Create one"})]})]})}const rA=Object.prototype.toString,aA=t=>rA.call(t)==="[object Error]",lA=new Set(["network error","Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed","fetch failed","terminated"," A network error occurred.","Network connection lost"]);function uA(t){if(!(t&&aA(t)&&t.name==="TypeError"&&typeof t.message=="string"))return!1;const{message:i,stack:s}=t;return i==="Load failed"?s===void 0||"__sentry_captured__"in t:i.startsWith("error sending request for url")?!0:lA.has(i)}function cA(t){if(typeof t=="number"){if(t<0)throw new TypeError("Expected `retries` to be a non-negative number.");if(Number.isNaN(t))throw new TypeError("Expected `retries` to be a valid number or Infinity, got NaN.")}else if(t!==void 0)throw new TypeError("Expected `retries` to be a number or Infinity.")}function Ea(t,e,{min:i=0,allowInfinity:s=!1}={}){if(e!==void 0){if(typeof e!="number"||Number.isNaN(e))throw new TypeError(`Expected \`${t}\` to be a number${s?" or Infinity":""}.`);if(!s&&!Number.isFinite(e))throw new TypeError(`Expected \`${t}\` to be a finite number.`);if(e<i)throw new TypeError(`Expected \`${t}\` to be  ${i}.`)}}class Jy extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}}function fA(t,e){const i=Math.max(1,t+1),s=e.randomize?Math.random()+1:1;let a=Math.round(s*e.minTimeout*e.factor**(i-1));return a=Math.min(a,e.maxTimeout),a}function Wm(t,e){return Number.isFinite(e)?e-(performance.now()-t):e}async function dA({error:t,attemptNumber:e,retriesConsumed:i,startTime:s,options:a}){const l=t instanceof Error?t:new TypeError(`Non-error was thrown: "${t}". You should only throw errors.`);if(l instanceof Jy)throw l.originalError;const c=Number.isFinite(a.retries)?Math.max(0,a.retries-i):a.retries,h=a.maxRetryTime??Number.POSITIVE_INFINITY,g=Object.freeze({error:l,attemptNumber:e,retriesLeft:c,retriesConsumed:i});if(await a.onFailedAttempt(g),Wm(s,h)<=0)throw l;const p=await a.shouldConsumeRetry(g),v=Wm(s,h);if(v<=0||c<=0)throw l;if(l instanceof TypeError&&!uA(l)){if(p)throw l;return a.signal?.throwIfAborted(),!1}if(!await a.shouldRetry(g))throw l;if(!p)return a.signal?.throwIfAborted(),!1;const T=fA(i,a),_=Math.min(T,v);return a.signal?.throwIfAborted(),_>0&&await new Promise((E,w)=>{const b=()=>{clearTimeout(R),a.signal?.removeEventListener("abort",b),w(a.signal.reason)},R=setTimeout(()=>{a.signal?.removeEventListener("abort",b),E()},_);a.unref&&R.unref?.(),a.signal?.addEventListener("abort",b,{once:!0})}),a.signal?.throwIfAborted(),!0}async function hA(t,e={}){if(e={...e},cA(e.retries),Object.hasOwn(e,"forever"))throw new Error("The `forever` option is no longer supported. For many use-cases, you can set `retries: Infinity` instead.");e.retries??=10,e.factor??=2,e.minTimeout??=1e3,e.maxTimeout??=Number.POSITIVE_INFINITY,e.maxRetryTime??=Number.POSITIVE_INFINITY,e.randomize??=!1,e.onFailedAttempt??=()=>{},e.shouldRetry??=()=>!0,e.shouldConsumeRetry??=()=>!0,Ea("factor",e.factor,{min:0,allowInfinity:!1}),Ea("minTimeout",e.minTimeout,{min:0,allowInfinity:!1}),Ea("maxTimeout",e.maxTimeout,{min:0,allowInfinity:!0}),Ea("maxRetryTime",e.maxRetryTime,{min:0,allowInfinity:!0}),e.factor>0||(e.factor=1),e.signal?.throwIfAborted();let i=0,s=0;const a=performance.now();for(;!Number.isFinite(e.retries)||s<=e.retries;){i++;try{e.signal?.throwIfAborted();const l=await t(i);return e.signal?.throwIfAborted(),l}catch(l){await dA({error:l,attemptNumber:i,retriesConsumed:s,startTime:a,options:e})&&s++}}throw new Error("Retry attempts exhausted without throwing an error.")}var pA={};let mA,gA;function yA(){return{geminiUrl:mA,vertexUrl:gA}}function vA(t,e,i,s){var a,l;if(!t?.baseUrl){const c=yA();return e?(a=c.vertexUrl)!==null&&a!==void 0?a:i:(l=c.geminiUrl)!==null&&l!==void 0?l:s}return t.baseUrl}class Dn{}function W(t,e){const i=/\{([^}]+)\}/g;return t.replace(i,(s,a)=>{if(Object.prototype.hasOwnProperty.call(e,a)){const l=e[a];return l!=null?String(l):""}else throw new Error(`Key '${a}' not found in valueMap.`)})}function d(t,e,i){for(let l=0;l<e.length-1;l++){const c=e[l];if(c.endsWith("[]")){const h=c.slice(0,-2);if(!(h in t))if(Array.isArray(i))t[h]=Array.from({length:i.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(t[h])){const g=t[h];if(Array.isArray(i))for(let p=0;p<g.length;p++){const v=g[p];d(v,e.slice(l+1),i[p])}else for(const p of g)d(p,e.slice(l+1),i)}return}else if(c.endsWith("[0]")){const h=c.slice(0,-3);h in t||(t[h]=[{}]);const g=t[h];d(g[0],e.slice(l+1),i);return}(!t[c]||typeof t[c]!="object")&&(t[c]={}),t=t[c]}const s=e[e.length-1],a=t[s];if(a!==void 0){if(!i||typeof i=="object"&&Object.keys(i).length===0||i===a)return;if(typeof a=="object"&&typeof i=="object"&&a!==null&&i!==null)Object.assign(a,i);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof i=="object"&&i!==null&&!Array.isArray(i)?Object.assign(t,i):t[s]=i}function f(t,e,i=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let s=0;s<e.length;s++){if(typeof t!="object"||t===null)return i;const a=e[s];if(a.endsWith("[]")){const l=a.slice(0,-2);if(l in t){const c=t[l];return Array.isArray(c)?c.map(h=>f(h,e.slice(s+1),i)):i}else return i}else t=t[a]}return t}catch(s){if(s instanceof TypeError)return i;throw s}}function _A(t,e){for(const[i,s]of Object.entries(e)){const a=i.split("."),l=s.split("."),c=new Set;let h=-1;for(let g=0;g<a.length;g++)if(a[g]==="*"){h=g;break}if(h!==-1&&l.length>h)for(let g=h;g<l.length;g++){const p=l[g];p!=="*"&&!p.endsWith("[]")&&!p.endsWith("[0]")&&c.add(p)}Gc(t,a,l,0,c)}}function Gc(t,e,i,s,a){if(s>=e.length||typeof t!="object"||t===null)return;const l=e[s];if(l.endsWith("[]")){const c=l.slice(0,-2),h=t;if(c in h&&Array.isArray(h[c]))for(const g of h[c])Gc(g,e,i,s+1,a)}else if(l==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const c=t,h=Object.keys(c).filter(p=>!p.startsWith("_")&&!a.has(p)),g={};for(const p of h)g[p]=c[p];for(const[p,v]of Object.entries(g)){const T=[];for(const _ of i.slice(s))_==="*"?T.push(p):T.push(_);d(c,T,v)}for(const p of h)delete c[p]}}else{const c=t;l in c&&Gc(c[l],e,i,s+1,a)}}function of(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}function TA(t){const e={},i=f(t,["operationName"]);i!=null&&d(e,["operationName"],i);const s=f(t,["resourceName"]);return s!=null&&d(e,["_url","resourceName"],s),e}function SA(t){const e={},i=f(t,["name"]);i!=null&&d(e,["name"],i);const s=f(t,["metadata"]);s!=null&&d(e,["metadata"],s);const a=f(t,["done"]);a!=null&&d(e,["done"],a);const l=f(t,["error"]);l!=null&&d(e,["error"],l);const c=f(t,["response","generateVideoResponse"]);return c!=null&&d(e,["response"],AA(c)),e}function EA(t){const e={},i=f(t,["name"]);i!=null&&d(e,["name"],i);const s=f(t,["metadata"]);s!=null&&d(e,["metadata"],s);const a=f(t,["done"]);a!=null&&d(e,["done"],a);const l=f(t,["error"]);l!=null&&d(e,["error"],l);const c=f(t,["response"]);return c!=null&&d(e,["response"],wA(c)),e}function AA(t){const e={},i=f(t,["generatedSamples"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>CA(c))),d(e,["generatedVideos"],l)}const s=f(t,["raiMediaFilteredCount"]);s!=null&&d(e,["raiMediaFilteredCount"],s);const a=f(t,["raiMediaFilteredReasons"]);return a!=null&&d(e,["raiMediaFilteredReasons"],a),e}function wA(t){const e={},i=f(t,["videos"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>bA(c))),d(e,["generatedVideos"],l)}const s=f(t,["raiMediaFilteredCount"]);s!=null&&d(e,["raiMediaFilteredCount"],s);const a=f(t,["raiMediaFilteredReasons"]);return a!=null&&d(e,["raiMediaFilteredReasons"],a),e}function CA(t){const e={},i=f(t,["video"]);return i!=null&&d(e,["video"],UA(i)),e}function bA(t){const e={},i=f(t,["_self"]);return i!=null&&d(e,["video"],xA(i)),e}function RA(t){const e={},i=f(t,["operationName"]);return i!=null&&d(e,["_url","operationName"],i),e}function NA(t){const e={},i=f(t,["operationName"]);return i!=null&&d(e,["_url","operationName"],i),e}function IA(t){const e={},i=f(t,["name"]);i!=null&&d(e,["name"],i);const s=f(t,["metadata"]);s!=null&&d(e,["metadata"],s);const a=f(t,["done"]);a!=null&&d(e,["done"],a);const l=f(t,["error"]);l!=null&&d(e,["error"],l);const c=f(t,["response"]);return c!=null&&d(e,["response"],MA(c)),e}function MA(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&d(e,["sdkHttpResponse"],i);const s=f(t,["parent"]);s!=null&&d(e,["parent"],s);const a=f(t,["documentName"]);return a!=null&&d(e,["documentName"],a),e}function Yy(t){const e={},i=f(t,["name"]);i!=null&&d(e,["name"],i);const s=f(t,["metadata"]);s!=null&&d(e,["metadata"],s);const a=f(t,["done"]);a!=null&&d(e,["done"],a);const l=f(t,["error"]);l!=null&&d(e,["error"],l);const c=f(t,["response"]);return c!=null&&d(e,["response"],DA(c)),e}function DA(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&d(e,["sdkHttpResponse"],i);const s=f(t,["parent"]);s!=null&&d(e,["parent"],s);const a=f(t,["documentName"]);return a!=null&&d(e,["documentName"],a),e}function UA(t){const e={},i=f(t,["uri"]);i!=null&&d(e,["uri"],i);const s=f(t,["encodedVideo"]);s!=null&&d(e,["videoBytes"],of(s));const a=f(t,["encoding"]);return a!=null&&d(e,["mimeType"],a),e}function xA(t){const e={},i=f(t,["gcsUri"]);i!=null&&d(e,["uri"],i);const s=f(t,["bytesBase64Encoded"]);s!=null&&d(e,["videoBytes"],of(s));const a=f(t,["mimeType"]);return a!=null&&d(e,["mimeType"],a),e}var Zm;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Zm||(Zm={}));var jm;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(jm||(jm={}));var eg;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(eg||(eg={}));var ri;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(ri||(ri={}));var tg;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(tg||(tg={}));var ng;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(ng||(ng={}));var ig;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(ig||(ig={}));var og;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(og||(og={}));var sg;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(sg||(sg={}));var rg;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(rg||(rg={}));var ag;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(ag||(ag={}));var lg;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(lg||(lg={}));var ug;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(ug||(ug={}));var cg;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(cg||(cg={}));var fg;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(fg||(fg={}));var dg;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(dg||(dg={}));var hg;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(hg||(hg={}));var pg;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(pg||(pg={}));var mg;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(mg||(mg={}));var gg;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(gg||(gg={}));var yg;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(yg||(yg={}));var xa;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(xa||(xa={}));var vg;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(vg||(vg={}));var _g;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(_g||(_g={}));var Tg;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Tg||(Tg={}));var Hc;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Hc||(Hc={}));var Sg;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Sg||(Sg={}));var Eg;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(Eg||(Eg={}));var Bc;(function(t){t.COLLECTION="COLLECTION"})(Bc||(Bc={}));var Ag;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(Ag||(Ag={}));var wg;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(wg||(wg={}));var Cg;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Cg||(Cg={}));var bg;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(bg||(bg={}));var Rg;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(Rg||(Rg={}));var Ng;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Ng||(Ng={}));var Ig;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Ig||(Ig={}));var Mg;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Mg||(Mg={}));var Dg;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Dg||(Dg={}));var Ug;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(Ug||(Ug={}));var xg;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(xg||(xg={}));var kg;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(kg||(kg={}));var Og;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(Og||(Og={}));var Lg;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING",t.DISTILLATION="DISTILLATION"})(Lg||(Lg={}));var Pg;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(Pg||(Pg={}));var qg;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(qg||(qg={}));var Gg;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(Gg||(Gg={}));var Hg;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Hg||(Hg={}));var Bg;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(Bg||(Bg={}));var Vg;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(Vg||(Vg={}));var zg;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.ACTIVITY_START="ACTIVITY_START",t.ACTIVITY_END="ACTIVITY_END"})(zg||(zg={}));var Fg;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Fg||(Fg={}));var $g;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})($g||($g={}));var Jg;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(Jg||(Jg={}));var Yg;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Yg||(Yg={}));var Kg;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Kg||(Kg={}));var Xg;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(Xg||(Xg={}));var Do;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Do||(Do={}));class Vc{constructor(e){const i={};for(const s of e.headers.entries())i[s[0]]=s[1];this.headers=i,this.responseInternal=e}json(){return this.responseInternal.json()}}class Ls{get text(){var e,i,s,a,l,c,h,g;if(((a=(s=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let p="",v=!1;const T=[];for(const _ of(g=(h=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)!==null&&g!==void 0?g:[]){for(const[E,w]of Object.entries(_))E!=="text"&&E!=="thought"&&E!=="thoughtSignature"&&(w!==null||w!==void 0)&&T.push(E);if(typeof _.text=="string"){if(typeof _.thought=="boolean"&&_.thought)continue;v=!0,p+=_.text}}return T.length>0&&console.warn(`there are non-text parts ${T} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?p:void 0}get data(){var e,i,s,a,l,c,h,g;if(((a=(s=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let p="";const v=[];for(const T of(g=(h=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)!==null&&g!==void 0?g:[]){for(const[_,E]of Object.entries(T))_!=="inlineData"&&(E!==null||E!==void 0)&&v.push(_);T.inlineData&&typeof T.inlineData.data=="string"&&(p+=atob(T.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),p.length>0?btoa(p):void 0}get functionCalls(){var e,i,s,a,l,c,h,g;if(((a=(s=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const p=(g=(h=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if(p?.length!==0)return p}get executableCode(){var e,i,s,a,l,c,h,g,p;if(((a=(s=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(g=(h=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(T=>T.executableCode).map(T=>T.executableCode).filter(T=>T!==void 0);if(v?.length!==0)return(p=v?.[0])===null||p===void 0?void 0:p.code}get codeExecutionResult(){var e,i,s,a,l,c,h,g,p;if(((a=(s=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||s===void 0?void 0:s.parts)===null||a===void 0?void 0:a.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(g=(h=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(T=>T.codeExecutionResult).map(T=>T.codeExecutionResult).filter(T=>T!==void 0);if(v?.length!==0)return(p=v?.[0])===null||p===void 0?void 0:p.output}}class Qg{}class Wg{}class kA{}class OA{}class LA{}class PA{}class Zg{}class jg{}class ey{}class qA{}class ka{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const s=new ka;let a;const l=e;return i?a=EA(l):a=SA(l),Object.assign(s,a),s}}class ty{}class ny{}class iy{}class oy{}class GA{}class HA{}class BA{}class sf{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const s=new sf,l=IA(e);return Object.assign(s,l),s}}class VA{}class zA{}class FA{}class $A{}class sy{}class JA{get text(){var e,i,s;let a="",l=!1;const c=[];for(const h of(s=(i=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||i===void 0?void 0:i.parts)!==null&&s!==void 0?s:[]){for(const[g,p]of Object.entries(h))g!=="text"&&g!=="thought"&&p!==null&&c.push(g);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;l=!0,a+=h.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?a:void 0}get data(){var e,i,s;let a="";const l=[];for(const c of(s=(i=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||i===void 0?void 0:i.parts)!==null&&s!==void 0?s:[]){for(const[h,g]of Object.entries(c))h!=="inlineData"&&g!==null&&l.push(h);c.inlineData&&typeof c.inlineData.data=="string"&&(a+=atob(c.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),a.length>0?btoa(a):void 0}}class YA{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class rf{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const s=new rf,l=Yy(e);return Object.assign(s,l),s}}function be(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const i=e.split("/",2);return`publishers/${i[0]}/models/${i[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Ky(t,e){const i=be(t,e);return i?i.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${i}`:i.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${i}`:i:""}function Xy(t){return Array.isArray(t)?t.map(e=>Oa(e)):[Oa(t)]}function Oa(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function Qy(t){const e=Oa(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Wy(t){const e=Oa(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function ry(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function Zy(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>ry(e)):[ry(t)]}function zc(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function ay(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function ly(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function ht(t){if(t==null)throw new Error("ContentUnion is required");return zc(t)?t:{role:"user",parts:Zy(t)}}function af(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(i=>{const s=ht(i);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(t.isVertexAI()){const i=ht(e);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]}return Array.isArray(e)?e.map(i=>ht(i)):[ht(e)]}function Kt(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(ay(t)||ly(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[ht(t)]}const e=[],i=[],s=zc(t[0]);for(const a of t){const l=zc(a);if(l!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(a);else{if(ay(a)||ly(a))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");i.push(a)}}return s||e.push({role:"user",parts:Zy(i)}),e}function KA(t,e){t.includes("null")&&(e.nullable=!0);const i=t.filter(s=>s!=="null");if(i.length===1)e.type=Object.values(ri).includes(i[0].toUpperCase())?i[0].toUpperCase():ri.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of i)e.anyOf.push({type:Object.values(ri).includes(s.toUpperCase())?s.toUpperCase():ri.TYPE_UNSPECIFIED})}}function ko(t){const e={},i=["items"],s=["anyOf"],a=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=t.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,t=l[1]):l[1].type==="null"&&(e.nullable=!0,t=l[0])),t.type instanceof Array&&KA(t.type,e);for(const[c,h]of Object.entries(t))if(h!=null)if(c=="type"){if(h==="null")throw new Error("type: null can not be the only possible type for the field.");if(h instanceof Array)continue;e.type=Object.values(ri).includes(h.toUpperCase())?h.toUpperCase():ri.TYPE_UNSPECIFIED}else if(i.includes(c))e[c]=ko(h);else if(s.includes(c)){const g=[];for(const p of h){if(p.type=="null"){e.nullable=!0;continue}g.push(ko(p))}e[c]=g}else if(a.includes(c)){const g={};for(const[p,v]of Object.entries(h))g[p]=ko(v);e[c]=g}else{if(c==="additionalProperties")continue;e[c]=h}return e}function lf(t){return ko(t)}function uf(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function cf(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Po(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=ko(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=ko(e.response));return t}function qo(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const i of t)e.push(i);return e}function XA(t,e,i,s=1){const a=!e.startsWith(`${i}/`)&&e.split("/").length===s;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${i}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:a?`projects/${t.getProject()}/locations/${t.getLocation()}/${i}/${e}`:e:a?`${i}/${e}`:e}function Un(t,e){if(typeof e!="string")throw new Error("name must be a string");return XA(t,e,"cachedContents")}function jy(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function ai(t){return of(t)}function QA(t){return t!=null&&typeof t=="object"&&"name"in t}function WA(t){return t!=null&&typeof t=="object"&&"video"in t}function ZA(t){return t!=null&&typeof t=="object"&&"uri"in t}function ev(t){var e;let i;if(QA(t)&&(i=t.name),!(ZA(t)&&(i=t.uri,i===void 0))&&!(WA(t)&&(i=(e=t.video)===null||e===void 0?void 0:e.uri,i===void 0))){if(typeof t=="string"&&(i=t),i===void 0)throw new Error("Could not extract file name from the provided input.");if(i.startsWith("https://")){const a=i.split("files/")[1].match(/[a-z0-9]+/);if(a===null)throw new Error(`Could not extract file name from URI ${i}`);i=a[0]}else i.startsWith("files/")&&(i=i.split("files/")[1]);return i}}function tv(t,e){let i;return t.isVertexAI()?i=e?"publishers/google/models":"models":i=e?"models":"tunedModels",i}function nv(t){for(const e of["models","tunedModels","publisherModels"])if(jA(t,e))return t[e];return[]}function jA(t,e){return t!==null&&typeof t=="object"&&e in t}function ew(t,e={}){const i=t,s={name:i.name,description:i.description,parametersJsonSchema:i.inputSchema};return i.outputSchema&&(s.responseJsonSchema=i.outputSchema),e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function tw(t,e={}){const i=[],s=new Set;for(const a of t){const l=a.name;if(s.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);s.add(l);const c=ew(a,e);c.functionDeclarations&&i.push(...c.functionDeclarations)}return{functionDeclarations:i}}function iv(t,e){let i;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))i={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))i={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))i={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");i={inlinedRequests:e}}else i=e;const s=[i.gcsUri,i.bigqueryUri].filter(Boolean).length,a=[i.inlinedRequests,i.fileName].filter(Boolean).length;if(t.isVertexAI()){if(a>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||a!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return i}function nw(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function ov(t){if(typeof t!="object"||t===null)return{};const e=t,i=e.inlinedResponses;if(typeof i!="object"||i===null)return t;const a=i.inlinedResponses;if(!Array.isArray(a)||a.length===0)return t;let l=!1;for(const c of a){if(typeof c!="object"||c===null)continue;const g=c.response;if(typeof g!="object"||g===null)continue;if(g.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Go(t,e){const i=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(i))return i.split("/").pop();throw new Error(`Invalid batch job name: ${i}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(i))return i.split("/").pop();if(/^\d+$/.test(i))return i;throw new Error(`Invalid batch job name: ${i}.`)}function sv(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}function iw(t){const e={},i=f(t,["responsesFile"]);i!=null&&d(e,["fileName"],i);const s=f(t,["inlinedResponses","inlinedResponses"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>Pw(c))),d(e,["inlinedResponses"],l)}const a=f(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>c)),d(e,["inlinedEmbedContentResponses"],l)}return e}function ow(t){const e={},i=f(t,["predictionsFormat"]);i!=null&&d(e,["format"],i);const s=f(t,["gcsDestination","outputUriPrefix"]);s!=null&&d(e,["gcsUri"],s);const a=f(t,["bigqueryDestination","outputUri"]);return a!=null&&d(e,["bigqueryUri"],a),e}function sw(t){const e={},i=f(t,["format"]);i!=null&&d(e,["predictionsFormat"],i);const s=f(t,["gcsUri"]);s!=null&&d(e,["gcsDestination","outputUriPrefix"],s);const a=f(t,["bigqueryUri"]);if(a!=null&&d(e,["bigqueryDestination","outputUri"],a),f(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Na(t){const e={},i=f(t,["name"]);i!=null&&d(e,["name"],i);const s=f(t,["metadata","displayName"]);s!=null&&d(e,["displayName"],s);const a=f(t,["metadata","state"]);a!=null&&d(e,["state"],sv(a));const l=f(t,["metadata","createTime"]);l!=null&&d(e,["createTime"],l);const c=f(t,["metadata","endTime"]);c!=null&&d(e,["endTime"],c);const h=f(t,["metadata","updateTime"]);h!=null&&d(e,["updateTime"],h);const g=f(t,["metadata","model"]);g!=null&&d(e,["model"],g);const p=f(t,["metadata","output"]);return p!=null&&d(e,["dest"],iw(ov(p))),e}function Fc(t){const e={},i=f(t,["name"]);i!=null&&d(e,["name"],i);const s=f(t,["displayName"]);s!=null&&d(e,["displayName"],s);const a=f(t,["state"]);a!=null&&d(e,["state"],sv(a));const l=f(t,["error"]);l!=null&&d(e,["error"],l);const c=f(t,["createTime"]);c!=null&&d(e,["createTime"],c);const h=f(t,["startTime"]);h!=null&&d(e,["startTime"],h);const g=f(t,["endTime"]);g!=null&&d(e,["endTime"],g);const p=f(t,["updateTime"]);p!=null&&d(e,["updateTime"],p);const v=f(t,["model"]);v!=null&&d(e,["model"],v);const T=f(t,["inputConfig"]);T!=null&&d(e,["src"],rw(T));const _=f(t,["outputConfig"]);_!=null&&d(e,["dest"],ow(ov(_)));const E=f(t,["completionStats"]);return E!=null&&d(e,["completionStats"],E),e}function rw(t){const e={},i=f(t,["instancesFormat"]);i!=null&&d(e,["format"],i);const s=f(t,["gcsSource","uris"]);s!=null&&d(e,["gcsUri"],s);const a=f(t,["bigquerySource","inputUri"]);return a!=null&&d(e,["bigqueryUri"],a),e}function aw(t,e){const i={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=f(e,["fileName"]);s!=null&&d(i,["fileName"],s);const a=f(e,["inlinedRequests"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>Lw(t,c))),d(i,["requests","requests"],l)}return i}function lw(t){const e={},i=f(t,["format"]);i!=null&&d(e,["instancesFormat"],i);const s=f(t,["gcsUri"]);s!=null&&d(e,["gcsSource","uris"],s);const a=f(t,["bigqueryUri"]);if(a!=null&&d(e,["bigquerySource","inputUri"],a),f(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function uw(t){const e={},i=f(t,["data"]);if(i!=null&&d(e,["data"],i),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(t,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function cw(t,e){const i={},s=f(e,["name"]);return s!=null&&d(i,["_url","name"],Go(t,s)),i}function fw(t,e){const i={},s=f(e,["name"]);return s!=null&&d(i,["_url","name"],Go(t,s)),i}function dw(t){const e={},i=f(t,["content"]);i!=null&&d(e,["content"],i);const s=f(t,["citationMetadata"]);s!=null&&d(e,["citationMetadata"],hw(s));const a=f(t,["tokenCount"]);a!=null&&d(e,["tokenCount"],a);const l=f(t,["finishReason"]);l!=null&&d(e,["finishReason"],l);const c=f(t,["avgLogprobs"]);c!=null&&d(e,["avgLogprobs"],c);const h=f(t,["groundingMetadata"]);h!=null&&d(e,["groundingMetadata"],h);const g=f(t,["index"]);g!=null&&d(e,["index"],g);const p=f(t,["logprobsResult"]);p!=null&&d(e,["logprobsResult"],p);const v=f(t,["safetyRatings"]);if(v!=null){let _=v;Array.isArray(_)&&(_=_.map(E=>E)),d(e,["safetyRatings"],_)}const T=f(t,["urlContextMetadata"]);return T!=null&&d(e,["urlContextMetadata"],T),e}function hw(t){const e={},i=f(t,["citationSources"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),d(e,["citations"],s)}return e}function rv(t){const e={},i=f(t,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>Fw(l))),d(e,["parts"],a)}const s=f(t,["role"]);return s!=null&&d(e,["role"],s),e}function pw(t,e){const i={},s=f(t,["displayName"]);if(e!==void 0&&s!=null&&d(e,["batch","displayName"],s),f(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return i}function mw(t,e){const i={},s=f(t,["displayName"]);e!==void 0&&s!=null&&d(e,["displayName"],s);const a=f(t,["dest"]);return e!==void 0&&a!=null&&d(e,["outputConfig"],sw(nw(a))),i}function uy(t,e){const i={},s=f(e,["model"]);s!=null&&d(i,["_url","model"],be(t,s));const a=f(e,["src"]);a!=null&&d(i,["batch","inputConfig"],aw(t,iv(t,a)));const l=f(e,["config"]);return l!=null&&pw(l,i),i}function gw(t,e){const i={},s=f(e,["model"]);s!=null&&d(i,["model"],be(t,s));const a=f(e,["src"]);a!=null&&d(i,["inputConfig"],lw(iv(t,a)));const l=f(e,["config"]);return l!=null&&mw(l,i),i}function yw(t,e){const i={},s=f(t,["displayName"]);return e!==void 0&&s!=null&&d(e,["batch","displayName"],s),i}function vw(t,e){const i={},s=f(e,["model"]);s!=null&&d(i,["_url","model"],be(t,s));const a=f(e,["src"]);a!=null&&d(i,["batch","inputConfig"],Cw(t,a));const l=f(e,["config"]);return l!=null&&yw(l,i),i}function _w(t,e){const i={},s=f(e,["name"]);return s!=null&&d(i,["_url","name"],Go(t,s)),i}function Tw(t,e){const i={},s=f(e,["name"]);return s!=null&&d(i,["_url","name"],Go(t,s)),i}function Sw(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&d(e,["sdkHttpResponse"],i);const s=f(t,["name"]);s!=null&&d(e,["name"],s);const a=f(t,["done"]);a!=null&&d(e,["done"],a);const l=f(t,["error"]);return l!=null&&d(e,["error"],l),e}function Ew(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&d(e,["sdkHttpResponse"],i);const s=f(t,["name"]);s!=null&&d(e,["name"],s);const a=f(t,["done"]);a!=null&&d(e,["done"],a);const l=f(t,["error"]);return l!=null&&d(e,["error"],l),e}function Aw(t,e){const i={},s=f(e,["contents"]);if(s!=null){let l=af(t,s);Array.isArray(l)&&(l=l.map(c=>c)),d(i,["requests[]","request","content"],l)}const a=f(e,["config"]);return a!=null&&(d(i,["_self"],ww(a,i)),_A(i,{"requests[].*":"requests[].request.*"})),i}function ww(t,e){const i={},s=f(t,["taskType"]);e!==void 0&&s!=null&&d(e,["requests[]","taskType"],s);const a=f(t,["title"]);e!==void 0&&a!=null&&d(e,["requests[]","title"],a);const l=f(t,["outputDimensionality"]);if(e!==void 0&&l!=null&&d(e,["requests[]","outputDimensionality"],l),f(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function Cw(t,e){const i={},s=f(e,["fileName"]);s!=null&&d(i,["file_name"],s);const a=f(e,["inlinedRequests"]);return a!=null&&d(i,["requests"],Aw(t,a)),i}function bw(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(t,["fileUri"]);i!=null&&d(e,["fileUri"],i);const s=f(t,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function Rw(t){const e={},i=f(t,["id"]);i!=null&&d(e,["id"],i);const s=f(t,["args"]);s!=null&&d(e,["args"],s);const a=f(t,["name"]);if(a!=null&&d(e,["name"],a),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Nw(t){const e={},i=f(t,["allowedFunctionNames"]);i!=null&&d(e,["allowedFunctionNames"],i);const s=f(t,["mode"]);if(s!=null&&d(e,["mode"],s),f(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Iw(t,e,i){const s={},a=f(e,["systemInstruction"]);i!==void 0&&a!=null&&d(i,["systemInstruction"],rv(ht(a)));const l=f(e,["temperature"]);l!=null&&d(s,["temperature"],l);const c=f(e,["topP"]);c!=null&&d(s,["topP"],c);const h=f(e,["topK"]);h!=null&&d(s,["topK"],h);const g=f(e,["candidateCount"]);g!=null&&d(s,["candidateCount"],g);const p=f(e,["maxOutputTokens"]);p!=null&&d(s,["maxOutputTokens"],p);const v=f(e,["stopSequences"]);v!=null&&d(s,["stopSequences"],v);const T=f(e,["responseLogprobs"]);T!=null&&d(s,["responseLogprobs"],T);const _=f(e,["logprobs"]);_!=null&&d(s,["logprobs"],_);const E=f(e,["presencePenalty"]);E!=null&&d(s,["presencePenalty"],E);const w=f(e,["frequencyPenalty"]);w!=null&&d(s,["frequencyPenalty"],w);const b=f(e,["seed"]);b!=null&&d(s,["seed"],b);const R=f(e,["responseMimeType"]);R!=null&&d(s,["responseMimeType"],R);const D=f(e,["responseSchema"]);D!=null&&d(s,["responseSchema"],lf(D));const q=f(e,["responseJsonSchema"]);if(q!=null&&d(s,["responseJsonSchema"],q),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const U=f(e,["safetySettings"]);if(i!==void 0&&U!=null){let Oe=U;Array.isArray(Oe)&&(Oe=Oe.map(Ee=>$w(Ee))),d(i,["safetySettings"],Oe)}const V=f(e,["tools"]);if(i!==void 0&&V!=null){let Oe=qo(V);Array.isArray(Oe)&&(Oe=Oe.map(Ee=>Yw(Po(Ee)))),d(i,["tools"],Oe)}const X=f(e,["toolConfig"]);if(i!==void 0&&X!=null&&d(i,["toolConfig"],Jw(X)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const P=f(e,["cachedContent"]);i!==void 0&&P!=null&&d(i,["cachedContent"],Un(t,P));const J=f(e,["responseModalities"]);J!=null&&d(s,["responseModalities"],J);const Y=f(e,["mediaResolution"]);Y!=null&&d(s,["mediaResolution"],Y);const K=f(e,["speechConfig"]);if(K!=null&&d(s,["speechConfig"],uf(K)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const oe=f(e,["thinkingConfig"]);oe!=null&&d(s,["thinkingConfig"],oe);const pe=f(e,["imageConfig"]);pe!=null&&d(s,["imageConfig"],Ow(pe));const Te=f(e,["enableEnhancedCivicAnswers"]);if(Te!=null&&d(s,["enableEnhancedCivicAnswers"],Te),f(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return s}function Mw(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&d(e,["sdkHttpResponse"],i);const s=f(t,["candidates"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(p=>dw(p))),d(e,["candidates"],g)}const a=f(t,["modelVersion"]);a!=null&&d(e,["modelVersion"],a);const l=f(t,["promptFeedback"]);l!=null&&d(e,["promptFeedback"],l);const c=f(t,["responseId"]);c!=null&&d(e,["responseId"],c);const h=f(t,["usageMetadata"]);return h!=null&&d(e,["usageMetadata"],h),e}function Dw(t,e){const i={},s=f(e,["name"]);return s!=null&&d(i,["_url","name"],Go(t,s)),i}function Uw(t,e){const i={},s=f(e,["name"]);return s!=null&&d(i,["_url","name"],Go(t,s)),i}function xw(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=f(t,["enableWidget"]);return i!=null&&d(e,["enableWidget"],i),e}function kw(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=f(t,["timeRangeFilter"]);return i!=null&&d(e,["timeRangeFilter"],i),e}function Ow(t){const e={},i=f(t,["aspectRatio"]);i!=null&&d(e,["aspectRatio"],i);const s=f(t,["imageSize"]);if(s!=null&&d(e,["imageSize"],s),f(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(f(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function Lw(t,e){const i={},s=f(e,["model"]);s!=null&&d(i,["request","model"],be(t,s));const a=f(e,["contents"]);if(a!=null){let h=Kt(a);Array.isArray(h)&&(h=h.map(g=>rv(g))),d(i,["request","contents"],h)}const l=f(e,["metadata"]);l!=null&&d(i,["metadata"],l);const c=f(e,["config"]);return c!=null&&d(i,["request","generationConfig"],Iw(t,c,f(i,["request"],{}))),i}function Pw(t){const e={},i=f(t,["response"]);i!=null&&d(e,["response"],Mw(i));const s=f(t,["metadata"]);s!=null&&d(e,["metadata"],s);const a=f(t,["error"]);return a!=null&&d(e,["error"],a),e}function qw(t,e){const i={},s=f(t,["pageSize"]);e!==void 0&&s!=null&&d(e,["_query","pageSize"],s);const a=f(t,["pageToken"]);if(e!==void 0&&a!=null&&d(e,["_query","pageToken"],a),f(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return i}function Gw(t,e){const i={},s=f(t,["pageSize"]);e!==void 0&&s!=null&&d(e,["_query","pageSize"],s);const a=f(t,["pageToken"]);e!==void 0&&a!=null&&d(e,["_query","pageToken"],a);const l=f(t,["filter"]);return e!==void 0&&l!=null&&d(e,["_query","filter"],l),i}function Hw(t){const e={},i=f(t,["config"]);return i!=null&&qw(i,e),e}function Bw(t){const e={},i=f(t,["config"]);return i!=null&&Gw(i,e),e}function Vw(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&d(e,["sdkHttpResponse"],i);const s=f(t,["nextPageToken"]);s!=null&&d(e,["nextPageToken"],s);const a=f(t,["operations"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>Na(c))),d(e,["batchJobs"],l)}return e}function zw(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&d(e,["sdkHttpResponse"],i);const s=f(t,["nextPageToken"]);s!=null&&d(e,["nextPageToken"],s);const a=f(t,["batchPredictionJobs"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>Fc(c))),d(e,["batchJobs"],l)}return e}function Fw(t){const e={},i=f(t,["mediaResolution"]);i!=null&&d(e,["mediaResolution"],i);const s=f(t,["codeExecutionResult"]);s!=null&&d(e,["codeExecutionResult"],s);const a=f(t,["executableCode"]);a!=null&&d(e,["executableCode"],a);const l=f(t,["fileData"]);l!=null&&d(e,["fileData"],bw(l));const c=f(t,["functionCall"]);c!=null&&d(e,["functionCall"],Rw(c));const h=f(t,["functionResponse"]);h!=null&&d(e,["functionResponse"],h);const g=f(t,["inlineData"]);g!=null&&d(e,["inlineData"],uw(g));const p=f(t,["text"]);p!=null&&d(e,["text"],p);const v=f(t,["thought"]);v!=null&&d(e,["thought"],v);const T=f(t,["thoughtSignature"]);T!=null&&d(e,["thoughtSignature"],T);const _=f(t,["videoMetadata"]);return _!=null&&d(e,["videoMetadata"],_),e}function $w(t){const e={},i=f(t,["category"]);if(i!=null&&d(e,["category"],i),f(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=f(t,["threshold"]);return s!=null&&d(e,["threshold"],s),e}function Jw(t){const e={},i=f(t,["retrievalConfig"]);i!=null&&d(e,["retrievalConfig"],i);const s=f(t,["functionCallingConfig"]);return s!=null&&d(e,["functionCallingConfig"],Nw(s)),e}function Yw(t){const e={};if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(t,["computerUse"]);i!=null&&d(e,["computerUse"],i);const s=f(t,["fileSearch"]);s!=null&&d(e,["fileSearch"],s);const a=f(t,["codeExecution"]);if(a!=null&&d(e,["codeExecution"],a),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(t,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(T=>T)),d(e,["functionDeclarations"],v)}const c=f(t,["googleMaps"]);c!=null&&d(e,["googleMaps"],xw(c));const h=f(t,["googleSearch"]);h!=null&&d(e,["googleSearch"],kw(h));const g=f(t,["googleSearchRetrieval"]);g!=null&&d(e,["googleSearchRetrieval"],g);const p=f(t,["urlContext"]);return p!=null&&d(e,["urlContext"],p),e}var In;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(In||(In={}));class ki{constructor(e,i,s,a){this.pageInternal=[],this.paramsInternal={},this.requestInternal=i,this.init(e,s,a)}init(e,i,s){var a,l;this.nameInternal=e,this.pageInternal=i[this.nameInternal]||[],this.sdkHttpResponseInternal=i?.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!s||Object.keys(s).length===0?c={config:{}}:typeof s=="object"?c=Object.assign({},s):c=s,c.config&&(c.config.pageToken=i.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(l=(a=c.config)===null||a===void 0?void 0:a.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}class Kw extends Dn{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new ki(In.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(i),i),this.create=async i=>(this.apiClient.isVertexAI()&&(i.config=this.formatDestination(i.src,i.config)),this.createInternal(i)),this.createEmbeddings=async i=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(i)}}createInlinedGenerateContentRequest(e){const i=uy(this.apiClient,e),s=i._url,a=W("{model}:batchGenerateContent",s),h=i.batch.inputConfig.requests,g=h.requests,p=[];for(const v of g){const T=Object.assign({},v);if(T.systemInstruction){const _=T.systemInstruction;delete T.systemInstruction;const E=T.request;E.systemInstruction=_,T.request=E}p.push(T)}return h.requests=p,delete i.config,delete i._url,delete i._query,{path:a,body:i}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,i){const s=i?Object.assign({},i):{},a=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${a}`),s.dest===void 0){const l=this.getGcsUri(e),c=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?s.dest=`${l.slice(0,-6)}/dest`:s.dest=`${l}_dest_${a}`;else if(c)s.dest=`${c}_dest_${a}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(e){var i,s,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=gw(this.apiClient,e);return h=W("batchPredictionJobs",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>Fc(v))}else{const p=uy(this.apiClient,e);return h=W("{model}:batchGenerateContent",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>Na(v))}}async createEmbeddingsInternal(e){var i,s;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=vw(this.apiClient,e);return l=W("{model}:asyncBatchEmbedContent",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),a.then(g=>Na(g))}}async get(e){var i,s,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=Uw(this.apiClient,e);return h=W("batchPredictionJobs/{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>Fc(v))}else{const p=Dw(this.apiClient,e);return h=W("batches/{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>Na(v))}}async cancel(e){var i,s,a,l;let c="",h={};if(this.apiClient.isVertexAI()){const g=fw(this.apiClient,e);c=W("batchPredictionJobs/{name}:cancel",g._url),h=g._query,delete g._url,delete g._query,await this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const g=cw(this.apiClient,e);c=W("batches/{name}:cancel",g._url),h=g._query,delete g._url,delete g._query,await this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var i,s,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=Bw(e);return h=W("batchPredictionJobs",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const _=T;return _.sdkHttpResponse={headers:v.headers},_})),c.then(v=>{const T=zw(v),_=new sy;return Object.assign(_,T),_})}else{const p=Hw(e);return h=W("batches",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const _=T;return _.sdkHttpResponse={headers:v.headers},_})),c.then(v=>{const T=Vw(v),_=new sy;return Object.assign(_,T),_})}}async delete(e){var i,s,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=Tw(this.apiClient,e);return h=W("batchPredictionJobs/{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const _=T;return _.sdkHttpResponse={headers:v.headers},_})),c.then(v=>Ew(v))}else{const p=_w(this.apiClient,e);return h=W("batches/{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const _=T;return _.sdkHttpResponse={headers:v.headers},_})),c.then(v=>Sw(v))}}}function Xw(t){const e={},i=f(t,["data"]);if(i!=null&&d(e,["data"],i),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(t,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function cy(t){const e={},i=f(t,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>vC(l))),d(e,["parts"],a)}const s=f(t,["role"]);return s!=null&&d(e,["role"],s),e}function Qw(t,e){const i={},s=f(t,["ttl"]);e!==void 0&&s!=null&&d(e,["ttl"],s);const a=f(t,["expireTime"]);e!==void 0&&a!=null&&d(e,["expireTime"],a);const l=f(t,["displayName"]);e!==void 0&&l!=null&&d(e,["displayName"],l);const c=f(t,["contents"]);if(e!==void 0&&c!=null){let v=Kt(c);Array.isArray(v)&&(v=v.map(T=>cy(T))),d(e,["contents"],v)}const h=f(t,["systemInstruction"]);e!==void 0&&h!=null&&d(e,["systemInstruction"],cy(ht(h)));const g=f(t,["tools"]);if(e!==void 0&&g!=null){let v=g;Array.isArray(v)&&(v=v.map(T=>TC(T))),d(e,["tools"],v)}const p=f(t,["toolConfig"]);if(e!==void 0&&p!=null&&d(e,["toolConfig"],_C(p)),f(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return i}function Ww(t,e){const i={},s=f(t,["ttl"]);e!==void 0&&s!=null&&d(e,["ttl"],s);const a=f(t,["expireTime"]);e!==void 0&&a!=null&&d(e,["expireTime"],a);const l=f(t,["displayName"]);e!==void 0&&l!=null&&d(e,["displayName"],l);const c=f(t,["contents"]);if(e!==void 0&&c!=null){let T=Kt(c);Array.isArray(T)&&(T=T.map(_=>_)),d(e,["contents"],T)}const h=f(t,["systemInstruction"]);e!==void 0&&h!=null&&d(e,["systemInstruction"],ht(h));const g=f(t,["tools"]);if(e!==void 0&&g!=null){let T=g;Array.isArray(T)&&(T=T.map(_=>SC(_))),d(e,["tools"],T)}const p=f(t,["toolConfig"]);e!==void 0&&p!=null&&d(e,["toolConfig"],p);const v=f(t,["kmsKeyName"]);return e!==void 0&&v!=null&&d(e,["encryption_spec","kmsKeyName"],v),i}function Zw(t,e){const i={},s=f(e,["model"]);s!=null&&d(i,["model"],Ky(t,s));const a=f(e,["config"]);return a!=null&&Qw(a,i),i}function jw(t,e){const i={},s=f(e,["model"]);s!=null&&d(i,["model"],Ky(t,s));const a=f(e,["config"]);return a!=null&&Ww(a,i),i}function eC(t,e){const i={},s=f(e,["name"]);return s!=null&&d(i,["_url","name"],Un(t,s)),i}function tC(t,e){const i={},s=f(e,["name"]);return s!=null&&d(i,["_url","name"],Un(t,s)),i}function nC(t){const e={},i=f(t,["sdkHttpResponse"]);return i!=null&&d(e,["sdkHttpResponse"],i),e}function iC(t){const e={},i=f(t,["sdkHttpResponse"]);return i!=null&&d(e,["sdkHttpResponse"],i),e}function oC(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(t,["fileUri"]);i!=null&&d(e,["fileUri"],i);const s=f(t,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function sC(t){const e={},i=f(t,["id"]);i!=null&&d(e,["id"],i);const s=f(t,["args"]);s!=null&&d(e,["args"],s);const a=f(t,["name"]);if(a!=null&&d(e,["name"],a),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function rC(t){const e={},i=f(t,["allowedFunctionNames"]);i!=null&&d(e,["allowedFunctionNames"],i);const s=f(t,["mode"]);if(s!=null&&d(e,["mode"],s),f(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function aC(t){const e={},i=f(t,["description"]);i!=null&&d(e,["description"],i);const s=f(t,["name"]);s!=null&&d(e,["name"],s);const a=f(t,["parameters"]);a!=null&&d(e,["parameters"],a);const l=f(t,["parametersJsonSchema"]);l!=null&&d(e,["parametersJsonSchema"],l);const c=f(t,["response"]);c!=null&&d(e,["response"],c);const h=f(t,["responseJsonSchema"]);if(h!=null&&d(e,["responseJsonSchema"],h),f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function lC(t,e){const i={},s=f(e,["name"]);return s!=null&&d(i,["_url","name"],Un(t,s)),i}function uC(t,e){const i={},s=f(e,["name"]);return s!=null&&d(i,["_url","name"],Un(t,s)),i}function cC(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=f(t,["enableWidget"]);return i!=null&&d(e,["enableWidget"],i),e}function fC(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=f(t,["timeRangeFilter"]);return i!=null&&d(e,["timeRangeFilter"],i),e}function dC(t,e){const i={},s=f(t,["pageSize"]);e!==void 0&&s!=null&&d(e,["_query","pageSize"],s);const a=f(t,["pageToken"]);return e!==void 0&&a!=null&&d(e,["_query","pageToken"],a),i}function hC(t,e){const i={},s=f(t,["pageSize"]);e!==void 0&&s!=null&&d(e,["_query","pageSize"],s);const a=f(t,["pageToken"]);return e!==void 0&&a!=null&&d(e,["_query","pageToken"],a),i}function pC(t){const e={},i=f(t,["config"]);return i!=null&&dC(i,e),e}function mC(t){const e={},i=f(t,["config"]);return i!=null&&hC(i,e),e}function gC(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&d(e,["sdkHttpResponse"],i);const s=f(t,["nextPageToken"]);s!=null&&d(e,["nextPageToken"],s);const a=f(t,["cachedContents"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>c)),d(e,["cachedContents"],l)}return e}function yC(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&d(e,["sdkHttpResponse"],i);const s=f(t,["nextPageToken"]);s!=null&&d(e,["nextPageToken"],s);const a=f(t,["cachedContents"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>c)),d(e,["cachedContents"],l)}return e}function vC(t){const e={},i=f(t,["mediaResolution"]);i!=null&&d(e,["mediaResolution"],i);const s=f(t,["codeExecutionResult"]);s!=null&&d(e,["codeExecutionResult"],s);const a=f(t,["executableCode"]);a!=null&&d(e,["executableCode"],a);const l=f(t,["fileData"]);l!=null&&d(e,["fileData"],oC(l));const c=f(t,["functionCall"]);c!=null&&d(e,["functionCall"],sC(c));const h=f(t,["functionResponse"]);h!=null&&d(e,["functionResponse"],h);const g=f(t,["inlineData"]);g!=null&&d(e,["inlineData"],Xw(g));const p=f(t,["text"]);p!=null&&d(e,["text"],p);const v=f(t,["thought"]);v!=null&&d(e,["thought"],v);const T=f(t,["thoughtSignature"]);T!=null&&d(e,["thoughtSignature"],T);const _=f(t,["videoMetadata"]);return _!=null&&d(e,["videoMetadata"],_),e}function _C(t){const e={},i=f(t,["retrievalConfig"]);i!=null&&d(e,["retrievalConfig"],i);const s=f(t,["functionCallingConfig"]);return s!=null&&d(e,["functionCallingConfig"],rC(s)),e}function TC(t){const e={};if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(t,["computerUse"]);i!=null&&d(e,["computerUse"],i);const s=f(t,["fileSearch"]);s!=null&&d(e,["fileSearch"],s);const a=f(t,["codeExecution"]);if(a!=null&&d(e,["codeExecution"],a),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(t,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(T=>T)),d(e,["functionDeclarations"],v)}const c=f(t,["googleMaps"]);c!=null&&d(e,["googleMaps"],cC(c));const h=f(t,["googleSearch"]);h!=null&&d(e,["googleSearch"],fC(h));const g=f(t,["googleSearchRetrieval"]);g!=null&&d(e,["googleSearchRetrieval"],g);const p=f(t,["urlContext"]);return p!=null&&d(e,["urlContext"],p),e}function SC(t){const e={},i=f(t,["retrieval"]);i!=null&&d(e,["retrieval"],i);const s=f(t,["computerUse"]);if(s!=null&&d(e,["computerUse"],s),f(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=f(t,["codeExecution"]);a!=null&&d(e,["codeExecution"],a);const l=f(t,["enterpriseWebSearch"]);l!=null&&d(e,["enterpriseWebSearch"],l);const c=f(t,["functionDeclarations"]);if(c!=null){let T=c;Array.isArray(T)&&(T=T.map(_=>aC(_))),d(e,["functionDeclarations"],T)}const h=f(t,["googleMaps"]);h!=null&&d(e,["googleMaps"],h);const g=f(t,["googleSearch"]);g!=null&&d(e,["googleSearch"],g);const p=f(t,["googleSearchRetrieval"]);p!=null&&d(e,["googleSearchRetrieval"],p);const v=f(t,["urlContext"]);return v!=null&&d(e,["urlContext"],v),e}function EC(t,e){const i={},s=f(t,["ttl"]);e!==void 0&&s!=null&&d(e,["ttl"],s);const a=f(t,["expireTime"]);return e!==void 0&&a!=null&&d(e,["expireTime"],a),i}function AC(t,e){const i={},s=f(t,["ttl"]);e!==void 0&&s!=null&&d(e,["ttl"],s);const a=f(t,["expireTime"]);return e!==void 0&&a!=null&&d(e,["expireTime"],a),i}function wC(t,e){const i={},s=f(e,["name"]);s!=null&&d(i,["_url","name"],Un(t,s));const a=f(e,["config"]);return a!=null&&EC(a,i),i}function CC(t,e){const i={},s=f(e,["name"]);s!=null&&d(i,["_url","name"],Un(t,s));const a=f(e,["config"]);return a!=null&&AC(a,i),i}class bC extends Dn{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new ki(In.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(i),i)}async create(e){var i,s,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=jw(this.apiClient,e);return h=W("cachedContents",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const p=Zw(this.apiClient,e);return h=W("cachedContents",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async get(e){var i,s,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=uC(this.apiClient,e);return h=W("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const p=lC(this.apiClient,e);return h=W("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async delete(e){var i,s,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=tC(this.apiClient,e);return h=W("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const _=T;return _.sdkHttpResponse={headers:v.headers},_})),c.then(v=>{const T=iC(v),_=new iy;return Object.assign(_,T),_})}else{const p=eC(this.apiClient,e);return h=W("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const _=T;return _.sdkHttpResponse={headers:v.headers},_})),c.then(v=>{const T=nC(v),_=new iy;return Object.assign(_,T),_})}}async update(e){var i,s,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=CC(this.apiClient,e);return h=W("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const p=wC(this.apiClient,e);return h=W("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async listInternal(e){var i,s,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=mC(e);return h=W("cachedContents",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const _=T;return _.sdkHttpResponse={headers:v.headers},_})),c.then(v=>{const T=yC(v),_=new oy;return Object.assign(_,T),_})}else{const p=pC(e);return h=W("cachedContents",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const _=T;return _.sdkHttpResponse={headers:v.headers},_})),c.then(v=>{const T=gC(v),_=new oy;return Object.assign(_,T),_})}}}function La(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(i[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(t);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(t,s[a])&&(i[s[a]]=t[s[a]]);return i}function fy(t){var e=typeof Symbol=="function"&&Symbol.iterator,i=e&&t[e],s=0;if(i)return i.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ue(t){return this instanceof ue?(this.v=t,this):new ue(t)}function nn(t,e,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=i.apply(t,e||[]),a,l=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",c),a[Symbol.asyncIterator]=function(){return this},a;function c(E){return function(w){return Promise.resolve(w).then(E,T)}}function h(E,w){s[E]&&(a[E]=function(b){return new Promise(function(R,D){l.push([E,b,R,D])>1||g(E,b)})},w&&(a[E]=w(a[E])))}function g(E,w){try{p(s[E](w))}catch(b){_(l[0][3],b)}}function p(E){E.value instanceof ue?Promise.resolve(E.value.v).then(v,T):_(l[0][2],E)}function v(E){g("next",E)}function T(E){g("throw",E)}function _(E,w){E(w),l.shift(),l.length&&g(l[0][0],l[0][1])}}function on(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],i;return e?e.call(t):(t=typeof fy=="function"?fy(t):t[Symbol.iterator](),i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i);function s(l){i[l]=t[l]&&function(c){return new Promise(function(h,g){c=t[l](c),a(h,g,c.done,c.value)})}}function a(l,c,h,g){Promise.resolve(g).then(function(p){l({value:p,done:h})},c)}}function RC(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const i=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return i===void 0?!1:av(i)}function av(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function NC(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function dy(t){if(t===void 0||t.length===0)return[];const e=[],i=t.length;let s=0;for(;s<i;)if(t[s].role==="user")e.push(t[s]),s++;else{const a=[];let l=!0;for(;s<i&&t[s].role==="model";)a.push(t[s]),l&&!av(t[s])&&(l=!1),s++;l?e.push(...a):e.pop()}return e}class IC{constructor(e,i){this.modelsModule=e,this.apiClient=i}create(e){return new MC(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class MC{constructor(e,i,s,a={},l=[]){this.apiClient=e,this.modelsModule=i,this.model=s,this.config=a,this.history=l,this.sendPromise=Promise.resolve(),NC(l)}async sendMessage(e){var i;await this.sendPromise;const s=ht(e.message),a=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(i=e.config)!==null&&i!==void 0?i:this.config});return this.sendPromise=(async()=>{var l,c,h;const g=await a,p=(c=(l=g.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content,v=g.automaticFunctionCallingHistory,T=this.getHistory(!0).length;let _=[];v!=null&&(_=(h=v.slice(T))!==null&&h!==void 0?h:[]);const E=p?[p]:[];this.recordHistory(s,E,_)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),a}async sendMessageStream(e){var i;await this.sendPromise;const s=ht(e.message),a=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(i=e.config)!==null&&i!==void 0?i:this.config});this.sendPromise=a.then(()=>{}).catch(()=>{});const l=await a;return this.processStreamResponse(l,s)}getHistory(e=!1){const i=e?dy(this.history):this.history;return structuredClone(i)}processStreamResponse(e,i){return nn(this,arguments,function*(){var a,l,c,h,g,p;const v=[];try{for(var T=!0,_=on(e),E;E=yield ue(_.next()),a=E.done,!a;T=!0){h=E.value,T=!1;const w=h;if(RC(w)){const b=(p=(g=w.candidates)===null||g===void 0?void 0:g[0])===null||p===void 0?void 0:p.content;b!==void 0&&v.push(b)}yield yield ue(w)}}catch(w){l={error:w}}finally{try{!T&&!a&&(c=_.return)&&(yield ue(c.call(_)))}finally{if(l)throw l.error}}this.recordHistory(i,v)})}recordHistory(e,i,s){let a=[];i.length>0&&i.every(l=>l.role!==void 0)?a=i:a.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...dy(s)):this.history.push(e),this.history.push(...a)}}class Xs extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Xs.prototype)}}function DC(t){const e={},i=f(t,["file"]);return i!=null&&d(e,["file"],i),e}function UC(t){const e={},i=f(t,["sdkHttpResponse"]);return i!=null&&d(e,["sdkHttpResponse"],i),e}function xC(t){const e={},i=f(t,["name"]);return i!=null&&d(e,["_url","file"],ev(i)),e}function kC(t){const e={},i=f(t,["sdkHttpResponse"]);return i!=null&&d(e,["sdkHttpResponse"],i),e}function OC(t){const e={},i=f(t,["name"]);return i!=null&&d(e,["_url","file"],ev(i)),e}function LC(t){const e={},i=f(t,["uris"]);return i!=null&&d(e,["uris"],i),e}function PC(t,e){const i={},s=f(t,["pageSize"]);e!==void 0&&s!=null&&d(e,["_query","pageSize"],s);const a=f(t,["pageToken"]);return e!==void 0&&a!=null&&d(e,["_query","pageToken"],a),i}function qC(t){const e={},i=f(t,["config"]);return i!=null&&PC(i,e),e}function GC(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&d(e,["sdkHttpResponse"],i);const s=f(t,["nextPageToken"]);s!=null&&d(e,["nextPageToken"],s);const a=f(t,["files"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>c)),d(e,["files"],l)}return e}function HC(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&d(e,["sdkHttpResponse"],i);const s=f(t,["files"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),d(e,["files"],a)}return e}class BC extends Dn{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new ki(In.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(i),i)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(i=>i)}async download(e){await this.apiClient.downloadFile(e)}async registerFiles(e){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(e){return this.registerFilesInternal(e)}async listInternal(e){var i,s;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=qC(e);return l=W("files",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const p=GC(g),v=new VA;return Object.assign(v,p),v})}}async createInternal(e){var i,s;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=DC(e);return l=W("upload/v1beta/files",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),a.then(g=>{const p=UC(g),v=new zA;return Object.assign(v,p),v})}}async get(e){var i,s;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=OC(e);return l=W("files/{file}",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),a.then(g=>g)}}async delete(e){var i,s;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=xC(e);return l=W("files/{file}",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const p=kC(g),v=new FA;return Object.assign(v,p),v})}}async registerFilesInternal(e){var i,s;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=LC(e);return l=W("files:register",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),a.then(g=>{const p=HC(g),v=new $A;return Object.assign(v,p),v})}}}function Ia(t){const e={},i=f(t,["data"]);if(i!=null&&d(e,["data"],i),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(t,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function VC(t){const e={},i=f(t,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>ob(l))),d(e,["parts"],a)}const s=f(t,["role"]);return s!=null&&d(e,["role"],s),e}function zC(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(t,["fileUri"]);i!=null&&d(e,["fileUri"],i);const s=f(t,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function FC(t){const e={},i=f(t,["id"]);i!=null&&d(e,["id"],i);const s=f(t,["args"]);s!=null&&d(e,["args"],s);const a=f(t,["name"]);if(a!=null&&d(e,["name"],a),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function $C(t){const e={},i=f(t,["description"]);i!=null&&d(e,["description"],i);const s=f(t,["name"]);s!=null&&d(e,["name"],s);const a=f(t,["parameters"]);a!=null&&d(e,["parameters"],a);const l=f(t,["parametersJsonSchema"]);l!=null&&d(e,["parametersJsonSchema"],l);const c=f(t,["response"]);c!=null&&d(e,["response"],c);const h=f(t,["responseJsonSchema"]);if(h!=null&&d(e,["responseJsonSchema"],h),f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function JC(t){const e={},i=f(t,["modelSelectionConfig"]);i!=null&&d(e,["modelConfig"],i);const s=f(t,["responseJsonSchema"]);s!=null&&d(e,["responseJsonSchema"],s);const a=f(t,["audioTimestamp"]);a!=null&&d(e,["audioTimestamp"],a);const l=f(t,["candidateCount"]);l!=null&&d(e,["candidateCount"],l);const c=f(t,["enableAffectiveDialog"]);c!=null&&d(e,["enableAffectiveDialog"],c);const h=f(t,["frequencyPenalty"]);h!=null&&d(e,["frequencyPenalty"],h);const g=f(t,["logprobs"]);g!=null&&d(e,["logprobs"],g);const p=f(t,["maxOutputTokens"]);p!=null&&d(e,["maxOutputTokens"],p);const v=f(t,["mediaResolution"]);v!=null&&d(e,["mediaResolution"],v);const T=f(t,["presencePenalty"]);T!=null&&d(e,["presencePenalty"],T);const _=f(t,["responseLogprobs"]);_!=null&&d(e,["responseLogprobs"],_);const E=f(t,["responseMimeType"]);E!=null&&d(e,["responseMimeType"],E);const w=f(t,["responseModalities"]);w!=null&&d(e,["responseModalities"],w);const b=f(t,["responseSchema"]);b!=null&&d(e,["responseSchema"],b);const R=f(t,["routingConfig"]);R!=null&&d(e,["routingConfig"],R);const D=f(t,["seed"]);D!=null&&d(e,["seed"],D);const q=f(t,["speechConfig"]);q!=null&&d(e,["speechConfig"],q);const U=f(t,["stopSequences"]);U!=null&&d(e,["stopSequences"],U);const V=f(t,["temperature"]);V!=null&&d(e,["temperature"],V);const X=f(t,["thinkingConfig"]);X!=null&&d(e,["thinkingConfig"],X);const P=f(t,["topK"]);P!=null&&d(e,["topK"],P);const J=f(t,["topP"]);if(J!=null&&d(e,["topP"],J),f(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function YC(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=f(t,["enableWidget"]);return i!=null&&d(e,["enableWidget"],i),e}function KC(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=f(t,["timeRangeFilter"]);return i!=null&&d(e,["timeRangeFilter"],i),e}function XC(t,e){const i={},s=f(t,["generationConfig"]);e!==void 0&&s!=null&&d(e,["setup","generationConfig"],s);const a=f(t,["responseModalities"]);e!==void 0&&a!=null&&d(e,["setup","generationConfig","responseModalities"],a);const l=f(t,["temperature"]);e!==void 0&&l!=null&&d(e,["setup","generationConfig","temperature"],l);const c=f(t,["topP"]);e!==void 0&&c!=null&&d(e,["setup","generationConfig","topP"],c);const h=f(t,["topK"]);e!==void 0&&h!=null&&d(e,["setup","generationConfig","topK"],h);const g=f(t,["maxOutputTokens"]);e!==void 0&&g!=null&&d(e,["setup","generationConfig","maxOutputTokens"],g);const p=f(t,["mediaResolution"]);e!==void 0&&p!=null&&d(e,["setup","generationConfig","mediaResolution"],p);const v=f(t,["seed"]);e!==void 0&&v!=null&&d(e,["setup","generationConfig","seed"],v);const T=f(t,["speechConfig"]);e!==void 0&&T!=null&&d(e,["setup","generationConfig","speechConfig"],cf(T));const _=f(t,["thinkingConfig"]);e!==void 0&&_!=null&&d(e,["setup","generationConfig","thinkingConfig"],_);const E=f(t,["enableAffectiveDialog"]);e!==void 0&&E!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],E);const w=f(t,["systemInstruction"]);e!==void 0&&w!=null&&d(e,["setup","systemInstruction"],VC(ht(w)));const b=f(t,["tools"]);if(e!==void 0&&b!=null){let P=qo(b);Array.isArray(P)&&(P=P.map(J=>rb(Po(J)))),d(e,["setup","tools"],P)}const R=f(t,["sessionResumption"]);e!==void 0&&R!=null&&d(e,["setup","sessionResumption"],sb(R));const D=f(t,["inputAudioTranscription"]);e!==void 0&&D!=null&&d(e,["setup","inputAudioTranscription"],D);const q=f(t,["outputAudioTranscription"]);e!==void 0&&q!=null&&d(e,["setup","outputAudioTranscription"],q);const U=f(t,["realtimeInputConfig"]);e!==void 0&&U!=null&&d(e,["setup","realtimeInputConfig"],U);const V=f(t,["contextWindowCompression"]);e!==void 0&&V!=null&&d(e,["setup","contextWindowCompression"],V);const X=f(t,["proactivity"]);if(e!==void 0&&X!=null&&d(e,["setup","proactivity"],X),f(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return i}function QC(t,e){const i={},s=f(t,["generationConfig"]);e!==void 0&&s!=null&&d(e,["setup","generationConfig"],JC(s));const a=f(t,["responseModalities"]);e!==void 0&&a!=null&&d(e,["setup","generationConfig","responseModalities"],a);const l=f(t,["temperature"]);e!==void 0&&l!=null&&d(e,["setup","generationConfig","temperature"],l);const c=f(t,["topP"]);e!==void 0&&c!=null&&d(e,["setup","generationConfig","topP"],c);const h=f(t,["topK"]);e!==void 0&&h!=null&&d(e,["setup","generationConfig","topK"],h);const g=f(t,["maxOutputTokens"]);e!==void 0&&g!=null&&d(e,["setup","generationConfig","maxOutputTokens"],g);const p=f(t,["mediaResolution"]);e!==void 0&&p!=null&&d(e,["setup","generationConfig","mediaResolution"],p);const v=f(t,["seed"]);e!==void 0&&v!=null&&d(e,["setup","generationConfig","seed"],v);const T=f(t,["speechConfig"]);e!==void 0&&T!=null&&d(e,["setup","generationConfig","speechConfig"],cf(T));const _=f(t,["thinkingConfig"]);e!==void 0&&_!=null&&d(e,["setup","generationConfig","thinkingConfig"],_);const E=f(t,["enableAffectiveDialog"]);e!==void 0&&E!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],E);const w=f(t,["systemInstruction"]);e!==void 0&&w!=null&&d(e,["setup","systemInstruction"],ht(w));const b=f(t,["tools"]);if(e!==void 0&&b!=null){let J=qo(b);Array.isArray(J)&&(J=J.map(Y=>ab(Po(Y)))),d(e,["setup","tools"],J)}const R=f(t,["sessionResumption"]);e!==void 0&&R!=null&&d(e,["setup","sessionResumption"],R);const D=f(t,["inputAudioTranscription"]);e!==void 0&&D!=null&&d(e,["setup","inputAudioTranscription"],D);const q=f(t,["outputAudioTranscription"]);e!==void 0&&q!=null&&d(e,["setup","outputAudioTranscription"],q);const U=f(t,["realtimeInputConfig"]);e!==void 0&&U!=null&&d(e,["setup","realtimeInputConfig"],U);const V=f(t,["contextWindowCompression"]);e!==void 0&&V!=null&&d(e,["setup","contextWindowCompression"],V);const X=f(t,["proactivity"]);e!==void 0&&X!=null&&d(e,["setup","proactivity"],X);const P=f(t,["explicitVadSignal"]);return e!==void 0&&P!=null&&d(e,["setup","explicitVadSignal"],P),i}function WC(t,e){const i={},s=f(e,["model"]);s!=null&&d(i,["setup","model"],be(t,s));const a=f(e,["config"]);return a!=null&&d(i,["config"],XC(a,i)),i}function ZC(t,e){const i={},s=f(e,["model"]);s!=null&&d(i,["setup","model"],be(t,s));const a=f(e,["config"]);return a!=null&&d(i,["config"],QC(a,i)),i}function jC(t){const e={},i=f(t,["musicGenerationConfig"]);return i!=null&&d(e,["musicGenerationConfig"],i),e}function eb(t){const e={},i=f(t,["weightedPrompts"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),d(e,["weightedPrompts"],s)}return e}function tb(t){const e={},i=f(t,["media"]);if(i!=null){let p=Xy(i);Array.isArray(p)&&(p=p.map(v=>Ia(v))),d(e,["mediaChunks"],p)}const s=f(t,["audio"]);s!=null&&d(e,["audio"],Ia(Wy(s)));const a=f(t,["audioStreamEnd"]);a!=null&&d(e,["audioStreamEnd"],a);const l=f(t,["video"]);l!=null&&d(e,["video"],Ia(Qy(l)));const c=f(t,["text"]);c!=null&&d(e,["text"],c);const h=f(t,["activityStart"]);h!=null&&d(e,["activityStart"],h);const g=f(t,["activityEnd"]);return g!=null&&d(e,["activityEnd"],g),e}function nb(t){const e={},i=f(t,["media"]);if(i!=null){let p=Xy(i);Array.isArray(p)&&(p=p.map(v=>v)),d(e,["mediaChunks"],p)}const s=f(t,["audio"]);s!=null&&d(e,["audio"],Wy(s));const a=f(t,["audioStreamEnd"]);a!=null&&d(e,["audioStreamEnd"],a);const l=f(t,["video"]);l!=null&&d(e,["video"],Qy(l));const c=f(t,["text"]);c!=null&&d(e,["text"],c);const h=f(t,["activityStart"]);h!=null&&d(e,["activityStart"],h);const g=f(t,["activityEnd"]);return g!=null&&d(e,["activityEnd"],g),e}function ib(t){const e={},i=f(t,["setupComplete"]);i!=null&&d(e,["setupComplete"],i);const s=f(t,["serverContent"]);s!=null&&d(e,["serverContent"],s);const a=f(t,["toolCall"]);a!=null&&d(e,["toolCall"],a);const l=f(t,["toolCallCancellation"]);l!=null&&d(e,["toolCallCancellation"],l);const c=f(t,["usageMetadata"]);c!=null&&d(e,["usageMetadata"],lb(c));const h=f(t,["goAway"]);h!=null&&d(e,["goAway"],h);const g=f(t,["sessionResumptionUpdate"]);g!=null&&d(e,["sessionResumptionUpdate"],g);const p=f(t,["voiceActivityDetectionSignal"]);p!=null&&d(e,["voiceActivityDetectionSignal"],p);const v=f(t,["voiceActivity"]);return v!=null&&d(e,["voiceActivity"],ub(v)),e}function ob(t){const e={},i=f(t,["mediaResolution"]);i!=null&&d(e,["mediaResolution"],i);const s=f(t,["codeExecutionResult"]);s!=null&&d(e,["codeExecutionResult"],s);const a=f(t,["executableCode"]);a!=null&&d(e,["executableCode"],a);const l=f(t,["fileData"]);l!=null&&d(e,["fileData"],zC(l));const c=f(t,["functionCall"]);c!=null&&d(e,["functionCall"],FC(c));const h=f(t,["functionResponse"]);h!=null&&d(e,["functionResponse"],h);const g=f(t,["inlineData"]);g!=null&&d(e,["inlineData"],Ia(g));const p=f(t,["text"]);p!=null&&d(e,["text"],p);const v=f(t,["thought"]);v!=null&&d(e,["thought"],v);const T=f(t,["thoughtSignature"]);T!=null&&d(e,["thoughtSignature"],T);const _=f(t,["videoMetadata"]);return _!=null&&d(e,["videoMetadata"],_),e}function sb(t){const e={},i=f(t,["handle"]);if(i!=null&&d(e,["handle"],i),f(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function rb(t){const e={};if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(t,["computerUse"]);i!=null&&d(e,["computerUse"],i);const s=f(t,["fileSearch"]);s!=null&&d(e,["fileSearch"],s);const a=f(t,["codeExecution"]);if(a!=null&&d(e,["codeExecution"],a),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(t,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(T=>T)),d(e,["functionDeclarations"],v)}const c=f(t,["googleMaps"]);c!=null&&d(e,["googleMaps"],YC(c));const h=f(t,["googleSearch"]);h!=null&&d(e,["googleSearch"],KC(h));const g=f(t,["googleSearchRetrieval"]);g!=null&&d(e,["googleSearchRetrieval"],g);const p=f(t,["urlContext"]);return p!=null&&d(e,["urlContext"],p),e}function ab(t){const e={},i=f(t,["retrieval"]);i!=null&&d(e,["retrieval"],i);const s=f(t,["computerUse"]);if(s!=null&&d(e,["computerUse"],s),f(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=f(t,["codeExecution"]);a!=null&&d(e,["codeExecution"],a);const l=f(t,["enterpriseWebSearch"]);l!=null&&d(e,["enterpriseWebSearch"],l);const c=f(t,["functionDeclarations"]);if(c!=null){let T=c;Array.isArray(T)&&(T=T.map(_=>$C(_))),d(e,["functionDeclarations"],T)}const h=f(t,["googleMaps"]);h!=null&&d(e,["googleMaps"],h);const g=f(t,["googleSearch"]);g!=null&&d(e,["googleSearch"],g);const p=f(t,["googleSearchRetrieval"]);p!=null&&d(e,["googleSearchRetrieval"],p);const v=f(t,["urlContext"]);return v!=null&&d(e,["urlContext"],v),e}function lb(t){const e={},i=f(t,["promptTokenCount"]);i!=null&&d(e,["promptTokenCount"],i);const s=f(t,["cachedContentTokenCount"]);s!=null&&d(e,["cachedContentTokenCount"],s);const a=f(t,["candidatesTokenCount"]);a!=null&&d(e,["responseTokenCount"],a);const l=f(t,["toolUsePromptTokenCount"]);l!=null&&d(e,["toolUsePromptTokenCount"],l);const c=f(t,["thoughtsTokenCount"]);c!=null&&d(e,["thoughtsTokenCount"],c);const h=f(t,["totalTokenCount"]);h!=null&&d(e,["totalTokenCount"],h);const g=f(t,["promptTokensDetails"]);if(g!=null){let E=g;Array.isArray(E)&&(E=E.map(w=>w)),d(e,["promptTokensDetails"],E)}const p=f(t,["cacheTokensDetails"]);if(p!=null){let E=p;Array.isArray(E)&&(E=E.map(w=>w)),d(e,["cacheTokensDetails"],E)}const v=f(t,["candidatesTokensDetails"]);if(v!=null){let E=v;Array.isArray(E)&&(E=E.map(w=>w)),d(e,["responseTokensDetails"],E)}const T=f(t,["toolUsePromptTokensDetails"]);if(T!=null){let E=T;Array.isArray(E)&&(E=E.map(w=>w)),d(e,["toolUsePromptTokensDetails"],E)}const _=f(t,["trafficType"]);return _!=null&&d(e,["trafficType"],_),e}function ub(t){const e={},i=f(t,["type"]);return i!=null&&d(e,["voiceActivityType"],i),e}function cb(t,e){const i={},s=f(t,["data"]);if(s!=null&&d(i,["data"],s),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=f(t,["mimeType"]);return a!=null&&d(i,["mimeType"],a),i}function fb(t,e){const i={},s=f(t,["content"]);s!=null&&d(i,["content"],s);const a=f(t,["citationMetadata"]);a!=null&&d(i,["citationMetadata"],db(a));const l=f(t,["tokenCount"]);l!=null&&d(i,["tokenCount"],l);const c=f(t,["finishReason"]);c!=null&&d(i,["finishReason"],c);const h=f(t,["avgLogprobs"]);h!=null&&d(i,["avgLogprobs"],h);const g=f(t,["groundingMetadata"]);g!=null&&d(i,["groundingMetadata"],g);const p=f(t,["index"]);p!=null&&d(i,["index"],p);const v=f(t,["logprobsResult"]);v!=null&&d(i,["logprobsResult"],v);const T=f(t,["safetyRatings"]);if(T!=null){let E=T;Array.isArray(E)&&(E=E.map(w=>w)),d(i,["safetyRatings"],E)}const _=f(t,["urlContextMetadata"]);return _!=null&&d(i,["urlContextMetadata"],_),i}function db(t,e){const i={},s=f(t,["citationSources"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),d(i,["citations"],a)}return i}function hb(t,e,i){const s={},a=f(e,["model"]);a!=null&&d(s,["_url","model"],be(t,a));const l=f(e,["contents"]);if(l!=null){let c=Kt(l);Array.isArray(c)&&(c=c.map(h=>h)),d(s,["contents"],c)}return s}function pb(t,e){const i={},s=f(t,["sdkHttpResponse"]);s!=null&&d(i,["sdkHttpResponse"],s);const a=f(t,["tokensInfo"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>c)),d(i,["tokensInfo"],l)}return i}function mb(t,e){const i={},s=f(t,["values"]);s!=null&&d(i,["values"],s);const a=f(t,["statistics"]);return a!=null&&d(i,["statistics"],gb(a)),i}function gb(t,e){const i={},s=f(t,["truncated"]);s!=null&&d(i,["truncated"],s);const a=f(t,["token_count"]);return a!=null&&d(i,["tokenCount"],a),i}function za(t,e){const i={},s=f(t,["parts"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>CR(c))),d(i,["parts"],l)}const a=f(t,["role"]);return a!=null&&d(i,["role"],a),i}function yb(t,e){const i={},s=f(t,["controlType"]);s!=null&&d(i,["controlType"],s);const a=f(t,["enableControlImageComputation"]);return a!=null&&d(i,["computeControl"],a),i}function vb(t,e){const i={};if(f(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return i}function _b(t,e,i){const s={},a=f(t,["systemInstruction"]);e!==void 0&&a!=null&&d(e,["systemInstruction"],ht(a));const l=f(t,["tools"]);if(e!==void 0&&l!=null){let h=l;Array.isArray(h)&&(h=h.map(g=>fv(g))),d(e,["tools"],h)}const c=f(t,["generationConfig"]);return e!==void 0&&c!=null&&d(e,["generationConfig"],cR(c)),s}function Tb(t,e,i){const s={},a=f(e,["model"]);a!=null&&d(s,["_url","model"],be(t,a));const l=f(e,["contents"]);if(l!=null){let h=Kt(l);Array.isArray(h)&&(h=h.map(g=>za(g))),d(s,["contents"],h)}const c=f(e,["config"]);return c!=null&&vb(c),s}function Sb(t,e,i){const s={},a=f(e,["model"]);a!=null&&d(s,["_url","model"],be(t,a));const l=f(e,["contents"]);if(l!=null){let h=Kt(l);Array.isArray(h)&&(h=h.map(g=>g)),d(s,["contents"],h)}const c=f(e,["config"]);return c!=null&&_b(c,s),s}function Eb(t,e){const i={},s=f(t,["sdkHttpResponse"]);s!=null&&d(i,["sdkHttpResponse"],s);const a=f(t,["totalTokens"]);a!=null&&d(i,["totalTokens"],a);const l=f(t,["cachedContentTokenCount"]);return l!=null&&d(i,["cachedContentTokenCount"],l),i}function Ab(t,e){const i={},s=f(t,["sdkHttpResponse"]);s!=null&&d(i,["sdkHttpResponse"],s);const a=f(t,["totalTokens"]);return a!=null&&d(i,["totalTokens"],a),i}function wb(t,e,i){const s={},a=f(e,["model"]);return a!=null&&d(s,["_url","name"],be(t,a)),s}function Cb(t,e,i){const s={},a=f(e,["model"]);return a!=null&&d(s,["_url","name"],be(t,a)),s}function bb(t,e){const i={},s=f(t,["sdkHttpResponse"]);return s!=null&&d(i,["sdkHttpResponse"],s),i}function Rb(t,e){const i={},s=f(t,["sdkHttpResponse"]);return s!=null&&d(i,["sdkHttpResponse"],s),i}function Nb(t,e,i){const s={},a=f(t,["outputGcsUri"]);e!==void 0&&a!=null&&d(e,["parameters","storageUri"],a);const l=f(t,["negativePrompt"]);e!==void 0&&l!=null&&d(e,["parameters","negativePrompt"],l);const c=f(t,["numberOfImages"]);e!==void 0&&c!=null&&d(e,["parameters","sampleCount"],c);const h=f(t,["aspectRatio"]);e!==void 0&&h!=null&&d(e,["parameters","aspectRatio"],h);const g=f(t,["guidanceScale"]);e!==void 0&&g!=null&&d(e,["parameters","guidanceScale"],g);const p=f(t,["seed"]);e!==void 0&&p!=null&&d(e,["parameters","seed"],p);const v=f(t,["safetyFilterLevel"]);e!==void 0&&v!=null&&d(e,["parameters","safetySetting"],v);const T=f(t,["personGeneration"]);e!==void 0&&T!=null&&d(e,["parameters","personGeneration"],T);const _=f(t,["includeSafetyAttributes"]);e!==void 0&&_!=null&&d(e,["parameters","includeSafetyAttributes"],_);const E=f(t,["includeRaiReason"]);e!==void 0&&E!=null&&d(e,["parameters","includeRaiReason"],E);const w=f(t,["language"]);e!==void 0&&w!=null&&d(e,["parameters","language"],w);const b=f(t,["outputMimeType"]);e!==void 0&&b!=null&&d(e,["parameters","outputOptions","mimeType"],b);const R=f(t,["outputCompressionQuality"]);e!==void 0&&R!=null&&d(e,["parameters","outputOptions","compressionQuality"],R);const D=f(t,["addWatermark"]);e!==void 0&&D!=null&&d(e,["parameters","addWatermark"],D);const q=f(t,["labels"]);e!==void 0&&q!=null&&d(e,["labels"],q);const U=f(t,["editMode"]);e!==void 0&&U!=null&&d(e,["parameters","editMode"],U);const V=f(t,["baseSteps"]);return e!==void 0&&V!=null&&d(e,["parameters","editConfig","baseSteps"],V),s}function Ib(t,e,i){const s={},a=f(e,["model"]);a!=null&&d(s,["_url","model"],be(t,a));const l=f(e,["prompt"]);l!=null&&d(s,["instances[0]","prompt"],l);const c=f(e,["referenceImages"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(p=>DR(p))),d(s,["instances[0]","referenceImages"],g)}const h=f(e,["config"]);return h!=null&&Nb(h,s),s}function Mb(t,e){const i={},s=f(t,["sdkHttpResponse"]);s!=null&&d(i,["sdkHttpResponse"],s);const a=f(t,["predictions"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>Fa(c))),d(i,["generatedImages"],l)}return i}function Db(t,e,i){const s={},a=f(t,["taskType"]);e!==void 0&&a!=null&&d(e,["requests[]","taskType"],a);const l=f(t,["title"]);e!==void 0&&l!=null&&d(e,["requests[]","title"],l);const c=f(t,["outputDimensionality"]);if(e!==void 0&&c!=null&&d(e,["requests[]","outputDimensionality"],c),f(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return s}function Ub(t,e,i){const s={},a=f(t,["taskType"]);e!==void 0&&a!=null&&d(e,["instances[]","task_type"],a);const l=f(t,["title"]);e!==void 0&&l!=null&&d(e,["instances[]","title"],l);const c=f(t,["outputDimensionality"]);e!==void 0&&c!=null&&d(e,["parameters","outputDimensionality"],c);const h=f(t,["mimeType"]);e!==void 0&&h!=null&&d(e,["instances[]","mimeType"],h);const g=f(t,["autoTruncate"]);return e!==void 0&&g!=null&&d(e,["parameters","autoTruncate"],g),s}function xb(t,e,i){const s={},a=f(e,["model"]);a!=null&&d(s,["_url","model"],be(t,a));const l=f(e,["contents"]);if(l!=null){let g=af(t,l);Array.isArray(g)&&(g=g.map(p=>p)),d(s,["requests[]","content"],g)}const c=f(e,["config"]);c!=null&&Db(c,s);const h=f(e,["model"]);return h!==void 0&&d(s,["requests[]","model"],be(t,h)),s}function kb(t,e,i){const s={},a=f(e,["model"]);a!=null&&d(s,["_url","model"],be(t,a));const l=f(e,["contents"]);if(l!=null){let h=af(t,l);Array.isArray(h)&&(h=h.map(g=>g)),d(s,["instances[]","content"],h)}const c=f(e,["config"]);return c!=null&&Ub(c,s),s}function Ob(t,e){const i={},s=f(t,["sdkHttpResponse"]);s!=null&&d(i,["sdkHttpResponse"],s);const a=f(t,["embeddings"]);if(a!=null){let c=a;Array.isArray(c)&&(c=c.map(h=>h)),d(i,["embeddings"],c)}const l=f(t,["metadata"]);return l!=null&&d(i,["metadata"],l),i}function Lb(t,e){const i={},s=f(t,["sdkHttpResponse"]);s!=null&&d(i,["sdkHttpResponse"],s);const a=f(t,["predictions[]","embeddings"]);if(a!=null){let c=a;Array.isArray(c)&&(c=c.map(h=>mb(h))),d(i,["embeddings"],c)}const l=f(t,["metadata"]);return l!=null&&d(i,["metadata"],l),i}function Pb(t,e){const i={},s=f(t,["endpoint"]);s!=null&&d(i,["name"],s);const a=f(t,["deployedModelId"]);return a!=null&&d(i,["deployedModelId"],a),i}function qb(t,e){const i={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(t,["fileUri"]);s!=null&&d(i,["fileUri"],s);const a=f(t,["mimeType"]);return a!=null&&d(i,["mimeType"],a),i}function Gb(t,e){const i={},s=f(t,["id"]);s!=null&&d(i,["id"],s);const a=f(t,["args"]);a!=null&&d(i,["args"],a);const l=f(t,["name"]);if(l!=null&&d(i,["name"],l),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return i}function Hb(t,e){const i={},s=f(t,["allowedFunctionNames"]);s!=null&&d(i,["allowedFunctionNames"],s);const a=f(t,["mode"]);if(a!=null&&d(i,["mode"],a),f(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return i}function Bb(t,e){const i={},s=f(t,["description"]);s!=null&&d(i,["description"],s);const a=f(t,["name"]);a!=null&&d(i,["name"],a);const l=f(t,["parameters"]);l!=null&&d(i,["parameters"],l);const c=f(t,["parametersJsonSchema"]);c!=null&&d(i,["parametersJsonSchema"],c);const h=f(t,["response"]);h!=null&&d(i,["response"],h);const g=f(t,["responseJsonSchema"]);if(g!=null&&d(i,["responseJsonSchema"],g),f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return i}function Vb(t,e,i,s){const a={},l=f(e,["systemInstruction"]);i!==void 0&&l!=null&&d(i,["systemInstruction"],za(ht(l)));const c=f(e,["temperature"]);c!=null&&d(a,["temperature"],c);const h=f(e,["topP"]);h!=null&&d(a,["topP"],h);const g=f(e,["topK"]);g!=null&&d(a,["topK"],g);const p=f(e,["candidateCount"]);p!=null&&d(a,["candidateCount"],p);const v=f(e,["maxOutputTokens"]);v!=null&&d(a,["maxOutputTokens"],v);const T=f(e,["stopSequences"]);T!=null&&d(a,["stopSequences"],T);const _=f(e,["responseLogprobs"]);_!=null&&d(a,["responseLogprobs"],_);const E=f(e,["logprobs"]);E!=null&&d(a,["logprobs"],E);const w=f(e,["presencePenalty"]);w!=null&&d(a,["presencePenalty"],w);const b=f(e,["frequencyPenalty"]);b!=null&&d(a,["frequencyPenalty"],b);const R=f(e,["seed"]);R!=null&&d(a,["seed"],R);const D=f(e,["responseMimeType"]);D!=null&&d(a,["responseMimeType"],D);const q=f(e,["responseSchema"]);q!=null&&d(a,["responseSchema"],lf(q));const U=f(e,["responseJsonSchema"]);if(U!=null&&d(a,["responseJsonSchema"],U),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const V=f(e,["safetySettings"]);if(i!==void 0&&V!=null){let Ee=V;Array.isArray(Ee)&&(Ee=Ee.map(tt=>UR(tt))),d(i,["safetySettings"],Ee)}const X=f(e,["tools"]);if(i!==void 0&&X!=null){let Ee=qo(X);Array.isArray(Ee)&&(Ee=Ee.map(tt=>GR(Po(tt)))),d(i,["tools"],Ee)}const P=f(e,["toolConfig"]);if(i!==void 0&&P!=null&&d(i,["toolConfig"],qR(P)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const J=f(e,["cachedContent"]);i!==void 0&&J!=null&&d(i,["cachedContent"],Un(t,J));const Y=f(e,["responseModalities"]);Y!=null&&d(a,["responseModalities"],Y);const K=f(e,["mediaResolution"]);K!=null&&d(a,["mediaResolution"],K);const oe=f(e,["speechConfig"]);if(oe!=null&&d(a,["speechConfig"],uf(oe)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const pe=f(e,["thinkingConfig"]);pe!=null&&d(a,["thinkingConfig"],pe);const Te=f(e,["imageConfig"]);Te!=null&&d(a,["imageConfig"],mR(Te));const Oe=f(e,["enableEnhancedCivicAnswers"]);if(Oe!=null&&d(a,["enableEnhancedCivicAnswers"],Oe),f(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return a}function zb(t,e,i,s){const a={},l=f(e,["systemInstruction"]);i!==void 0&&l!=null&&d(i,["systemInstruction"],ht(l));const c=f(e,["temperature"]);c!=null&&d(a,["temperature"],c);const h=f(e,["topP"]);h!=null&&d(a,["topP"],h);const g=f(e,["topK"]);g!=null&&d(a,["topK"],g);const p=f(e,["candidateCount"]);p!=null&&d(a,["candidateCount"],p);const v=f(e,["maxOutputTokens"]);v!=null&&d(a,["maxOutputTokens"],v);const T=f(e,["stopSequences"]);T!=null&&d(a,["stopSequences"],T);const _=f(e,["responseLogprobs"]);_!=null&&d(a,["responseLogprobs"],_);const E=f(e,["logprobs"]);E!=null&&d(a,["logprobs"],E);const w=f(e,["presencePenalty"]);w!=null&&d(a,["presencePenalty"],w);const b=f(e,["frequencyPenalty"]);b!=null&&d(a,["frequencyPenalty"],b);const R=f(e,["seed"]);R!=null&&d(a,["seed"],R);const D=f(e,["responseMimeType"]);D!=null&&d(a,["responseMimeType"],D);const q=f(e,["responseSchema"]);q!=null&&d(a,["responseSchema"],lf(q));const U=f(e,["responseJsonSchema"]);U!=null&&d(a,["responseJsonSchema"],U);const V=f(e,["routingConfig"]);V!=null&&d(a,["routingConfig"],V);const X=f(e,["modelSelectionConfig"]);X!=null&&d(a,["modelConfig"],X);const P=f(e,["safetySettings"]);if(i!==void 0&&P!=null){let ie=P;Array.isArray(ie)&&(ie=ie.map(Ae=>Ae)),d(i,["safetySettings"],ie)}const J=f(e,["tools"]);if(i!==void 0&&J!=null){let ie=qo(J);Array.isArray(ie)&&(ie=ie.map(Ae=>fv(Po(Ae)))),d(i,["tools"],ie)}const Y=f(e,["toolConfig"]);i!==void 0&&Y!=null&&d(i,["toolConfig"],Y);const K=f(e,["labels"]);i!==void 0&&K!=null&&d(i,["labels"],K);const oe=f(e,["cachedContent"]);i!==void 0&&oe!=null&&d(i,["cachedContent"],Un(t,oe));const pe=f(e,["responseModalities"]);pe!=null&&d(a,["responseModalities"],pe);const Te=f(e,["mediaResolution"]);Te!=null&&d(a,["mediaResolution"],Te);const Oe=f(e,["speechConfig"]);Oe!=null&&d(a,["speechConfig"],uf(Oe));const Ee=f(e,["audioTimestamp"]);Ee!=null&&d(a,["audioTimestamp"],Ee);const tt=f(e,["thinkingConfig"]);tt!=null&&d(a,["thinkingConfig"],tt);const H=f(e,["imageConfig"]);if(H!=null&&d(a,["imageConfig"],gR(H)),f(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const Q=f(e,["modelArmorConfig"]);return i!==void 0&&Q!=null&&d(i,["modelArmorConfig"],Q),a}function hy(t,e,i){const s={},a=f(e,["model"]);a!=null&&d(s,["_url","model"],be(t,a));const l=f(e,["contents"]);if(l!=null){let h=Kt(l);Array.isArray(h)&&(h=h.map(g=>za(g))),d(s,["contents"],h)}const c=f(e,["config"]);return c!=null&&d(s,["generationConfig"],Vb(t,c,s)),s}function py(t,e,i){const s={},a=f(e,["model"]);a!=null&&d(s,["_url","model"],be(t,a));const l=f(e,["contents"]);if(l!=null){let h=Kt(l);Array.isArray(h)&&(h=h.map(g=>g)),d(s,["contents"],h)}const c=f(e,["config"]);return c!=null&&d(s,["generationConfig"],zb(t,c,s)),s}function my(t,e){const i={},s=f(t,["sdkHttpResponse"]);s!=null&&d(i,["sdkHttpResponse"],s);const a=f(t,["candidates"]);if(a!=null){let p=a;Array.isArray(p)&&(p=p.map(v=>fb(v))),d(i,["candidates"],p)}const l=f(t,["modelVersion"]);l!=null&&d(i,["modelVersion"],l);const c=f(t,["promptFeedback"]);c!=null&&d(i,["promptFeedback"],c);const h=f(t,["responseId"]);h!=null&&d(i,["responseId"],h);const g=f(t,["usageMetadata"]);return g!=null&&d(i,["usageMetadata"],g),i}function gy(t,e){const i={},s=f(t,["sdkHttpResponse"]);s!=null&&d(i,["sdkHttpResponse"],s);const a=f(t,["candidates"]);if(a!=null){let v=a;Array.isArray(v)&&(v=v.map(T=>T)),d(i,["candidates"],v)}const l=f(t,["createTime"]);l!=null&&d(i,["createTime"],l);const c=f(t,["modelVersion"]);c!=null&&d(i,["modelVersion"],c);const h=f(t,["promptFeedback"]);h!=null&&d(i,["promptFeedback"],h);const g=f(t,["responseId"]);g!=null&&d(i,["responseId"],g);const p=f(t,["usageMetadata"]);return p!=null&&d(i,["usageMetadata"],p),i}function Fb(t,e,i){const s={};if(f(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const a=f(t,["numberOfImages"]);e!==void 0&&a!=null&&d(e,["parameters","sampleCount"],a);const l=f(t,["aspectRatio"]);e!==void 0&&l!=null&&d(e,["parameters","aspectRatio"],l);const c=f(t,["guidanceScale"]);if(e!==void 0&&c!=null&&d(e,["parameters","guidanceScale"],c),f(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const h=f(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&d(e,["parameters","safetySetting"],h);const g=f(t,["personGeneration"]);e!==void 0&&g!=null&&d(e,["parameters","personGeneration"],g);const p=f(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&d(e,["parameters","includeSafetyAttributes"],p);const v=f(t,["includeRaiReason"]);e!==void 0&&v!=null&&d(e,["parameters","includeRaiReason"],v);const T=f(t,["language"]);e!==void 0&&T!=null&&d(e,["parameters","language"],T);const _=f(t,["outputMimeType"]);e!==void 0&&_!=null&&d(e,["parameters","outputOptions","mimeType"],_);const E=f(t,["outputCompressionQuality"]);if(e!==void 0&&E!=null&&d(e,["parameters","outputOptions","compressionQuality"],E),f(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const w=f(t,["imageSize"]);if(e!==void 0&&w!=null&&d(e,["parameters","sampleImageSize"],w),f(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return s}function $b(t,e,i){const s={},a=f(t,["outputGcsUri"]);e!==void 0&&a!=null&&d(e,["parameters","storageUri"],a);const l=f(t,["negativePrompt"]);e!==void 0&&l!=null&&d(e,["parameters","negativePrompt"],l);const c=f(t,["numberOfImages"]);e!==void 0&&c!=null&&d(e,["parameters","sampleCount"],c);const h=f(t,["aspectRatio"]);e!==void 0&&h!=null&&d(e,["parameters","aspectRatio"],h);const g=f(t,["guidanceScale"]);e!==void 0&&g!=null&&d(e,["parameters","guidanceScale"],g);const p=f(t,["seed"]);e!==void 0&&p!=null&&d(e,["parameters","seed"],p);const v=f(t,["safetyFilterLevel"]);e!==void 0&&v!=null&&d(e,["parameters","safetySetting"],v);const T=f(t,["personGeneration"]);e!==void 0&&T!=null&&d(e,["parameters","personGeneration"],T);const _=f(t,["includeSafetyAttributes"]);e!==void 0&&_!=null&&d(e,["parameters","includeSafetyAttributes"],_);const E=f(t,["includeRaiReason"]);e!==void 0&&E!=null&&d(e,["parameters","includeRaiReason"],E);const w=f(t,["language"]);e!==void 0&&w!=null&&d(e,["parameters","language"],w);const b=f(t,["outputMimeType"]);e!==void 0&&b!=null&&d(e,["parameters","outputOptions","mimeType"],b);const R=f(t,["outputCompressionQuality"]);e!==void 0&&R!=null&&d(e,["parameters","outputOptions","compressionQuality"],R);const D=f(t,["addWatermark"]);e!==void 0&&D!=null&&d(e,["parameters","addWatermark"],D);const q=f(t,["labels"]);e!==void 0&&q!=null&&d(e,["labels"],q);const U=f(t,["imageSize"]);e!==void 0&&U!=null&&d(e,["parameters","sampleImageSize"],U);const V=f(t,["enhancePrompt"]);return e!==void 0&&V!=null&&d(e,["parameters","enhancePrompt"],V),s}function Jb(t,e,i){const s={},a=f(e,["model"]);a!=null&&d(s,["_url","model"],be(t,a));const l=f(e,["prompt"]);l!=null&&d(s,["instances[0]","prompt"],l);const c=f(e,["config"]);return c!=null&&Fb(c,s),s}function Yb(t,e,i){const s={},a=f(e,["model"]);a!=null&&d(s,["_url","model"],be(t,a));const l=f(e,["prompt"]);l!=null&&d(s,["instances[0]","prompt"],l);const c=f(e,["config"]);return c!=null&&$b(c,s),s}function Kb(t,e){const i={},s=f(t,["sdkHttpResponse"]);s!=null&&d(i,["sdkHttpResponse"],s);const a=f(t,["predictions"]);if(a!=null){let c=a;Array.isArray(c)&&(c=c.map(h=>rR(h))),d(i,["generatedImages"],c)}const l=f(t,["positivePromptSafetyAttributes"]);return l!=null&&d(i,["positivePromptSafetyAttributes"],uv(l)),i}function Xb(t,e){const i={},s=f(t,["sdkHttpResponse"]);s!=null&&d(i,["sdkHttpResponse"],s);const a=f(t,["predictions"]);if(a!=null){let c=a;Array.isArray(c)&&(c=c.map(h=>Fa(h))),d(i,["generatedImages"],c)}const l=f(t,["positivePromptSafetyAttributes"]);return l!=null&&d(i,["positivePromptSafetyAttributes"],cv(l)),i}function Qb(t,e,i){const s={},a=f(t,["numberOfVideos"]);if(e!==void 0&&a!=null&&d(e,["parameters","sampleCount"],a),f(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const l=f(t,["durationSeconds"]);if(e!==void 0&&l!=null&&d(e,["parameters","durationSeconds"],l),f(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=f(t,["aspectRatio"]);e!==void 0&&c!=null&&d(e,["parameters","aspectRatio"],c);const h=f(t,["resolution"]);e!==void 0&&h!=null&&d(e,["parameters","resolution"],h);const g=f(t,["personGeneration"]);if(e!==void 0&&g!=null&&d(e,["parameters","personGeneration"],g),f(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const p=f(t,["negativePrompt"]);e!==void 0&&p!=null&&d(e,["parameters","negativePrompt"],p);const v=f(t,["enhancePrompt"]);if(e!==void 0&&v!=null&&d(e,["parameters","enhancePrompt"],v),f(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const T=f(t,["lastFrame"]);e!==void 0&&T!=null&&d(e,["instances[0]","lastFrame"],$a(T));const _=f(t,["referenceImages"]);if(e!==void 0&&_!=null){let E=_;Array.isArray(E)&&(E=E.map(w=>ZR(w))),d(e,["instances[0]","referenceImages"],E)}if(f(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return s}function Wb(t,e,i){const s={},a=f(t,["numberOfVideos"]);e!==void 0&&a!=null&&d(e,["parameters","sampleCount"],a);const l=f(t,["outputGcsUri"]);e!==void 0&&l!=null&&d(e,["parameters","storageUri"],l);const c=f(t,["fps"]);e!==void 0&&c!=null&&d(e,["parameters","fps"],c);const h=f(t,["durationSeconds"]);e!==void 0&&h!=null&&d(e,["parameters","durationSeconds"],h);const g=f(t,["seed"]);e!==void 0&&g!=null&&d(e,["parameters","seed"],g);const p=f(t,["aspectRatio"]);e!==void 0&&p!=null&&d(e,["parameters","aspectRatio"],p);const v=f(t,["resolution"]);e!==void 0&&v!=null&&d(e,["parameters","resolution"],v);const T=f(t,["personGeneration"]);e!==void 0&&T!=null&&d(e,["parameters","personGeneration"],T);const _=f(t,["pubsubTopic"]);e!==void 0&&_!=null&&d(e,["parameters","pubsubTopic"],_);const E=f(t,["negativePrompt"]);e!==void 0&&E!=null&&d(e,["parameters","negativePrompt"],E);const w=f(t,["enhancePrompt"]);e!==void 0&&w!=null&&d(e,["parameters","enhancePrompt"],w);const b=f(t,["generateAudio"]);e!==void 0&&b!=null&&d(e,["parameters","generateAudio"],b);const R=f(t,["lastFrame"]);e!==void 0&&R!=null&&d(e,["instances[0]","lastFrame"],sn(R));const D=f(t,["referenceImages"]);if(e!==void 0&&D!=null){let V=D;Array.isArray(V)&&(V=V.map(X=>jR(X))),d(e,["instances[0]","referenceImages"],V)}const q=f(t,["mask"]);e!==void 0&&q!=null&&d(e,["instances[0]","mask"],WR(q));const U=f(t,["compressionQuality"]);return e!==void 0&&U!=null&&d(e,["parameters","compressionQuality"],U),s}function Zb(t,e){const i={},s=f(t,["name"]);s!=null&&d(i,["name"],s);const a=f(t,["metadata"]);a!=null&&d(i,["metadata"],a);const l=f(t,["done"]);l!=null&&d(i,["done"],l);const c=f(t,["error"]);c!=null&&d(i,["error"],c);const h=f(t,["response","generateVideoResponse"]);return h!=null&&d(i,["response"],nR(h)),i}function jb(t,e){const i={},s=f(t,["name"]);s!=null&&d(i,["name"],s);const a=f(t,["metadata"]);a!=null&&d(i,["metadata"],a);const l=f(t,["done"]);l!=null&&d(i,["done"],l);const c=f(t,["error"]);c!=null&&d(i,["error"],c);const h=f(t,["response"]);return h!=null&&d(i,["response"],iR(h)),i}function eR(t,e,i){const s={},a=f(e,["model"]);a!=null&&d(s,["_url","model"],be(t,a));const l=f(e,["prompt"]);l!=null&&d(s,["instances[0]","prompt"],l);const c=f(e,["image"]);c!=null&&d(s,["instances[0]","image"],$a(c));const h=f(e,["video"]);h!=null&&d(s,["instances[0]","video"],dv(h));const g=f(e,["source"]);g!=null&&oR(g,s);const p=f(e,["config"]);return p!=null&&Qb(p,s),s}function tR(t,e,i){const s={},a=f(e,["model"]);a!=null&&d(s,["_url","model"],be(t,a));const l=f(e,["prompt"]);l!=null&&d(s,["instances[0]","prompt"],l);const c=f(e,["image"]);c!=null&&d(s,["instances[0]","image"],sn(c));const h=f(e,["video"]);h!=null&&d(s,["instances[0]","video"],hv(h));const g=f(e,["source"]);g!=null&&sR(g,s);const p=f(e,["config"]);return p!=null&&Wb(p,s),s}function nR(t,e){const i={},s=f(t,["generatedSamples"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(h=>lR(h))),d(i,["generatedVideos"],c)}const a=f(t,["raiMediaFilteredCount"]);a!=null&&d(i,["raiMediaFilteredCount"],a);const l=f(t,["raiMediaFilteredReasons"]);return l!=null&&d(i,["raiMediaFilteredReasons"],l),i}function iR(t,e){const i={},s=f(t,["videos"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(h=>uR(h))),d(i,["generatedVideos"],c)}const a=f(t,["raiMediaFilteredCount"]);a!=null&&d(i,["raiMediaFilteredCount"],a);const l=f(t,["raiMediaFilteredReasons"]);return l!=null&&d(i,["raiMediaFilteredReasons"],l),i}function oR(t,e,i){const s={},a=f(t,["prompt"]);e!==void 0&&a!=null&&d(e,["instances[0]","prompt"],a);const l=f(t,["image"]);e!==void 0&&l!=null&&d(e,["instances[0]","image"],$a(l));const c=f(t,["video"]);return e!==void 0&&c!=null&&d(e,["instances[0]","video"],dv(c)),s}function sR(t,e,i){const s={},a=f(t,["prompt"]);e!==void 0&&a!=null&&d(e,["instances[0]","prompt"],a);const l=f(t,["image"]);e!==void 0&&l!=null&&d(e,["instances[0]","image"],sn(l));const c=f(t,["video"]);return e!==void 0&&c!=null&&d(e,["instances[0]","video"],hv(c)),s}function rR(t,e){const i={},s=f(t,["_self"]);s!=null&&d(i,["image"],yR(s));const a=f(t,["raiFilteredReason"]);a!=null&&d(i,["raiFilteredReason"],a);const l=f(t,["_self"]);return l!=null&&d(i,["safetyAttributes"],uv(l)),i}function Fa(t,e){const i={},s=f(t,["_self"]);s!=null&&d(i,["image"],lv(s));const a=f(t,["raiFilteredReason"]);a!=null&&d(i,["raiFilteredReason"],a);const l=f(t,["_self"]);l!=null&&d(i,["safetyAttributes"],cv(l));const c=f(t,["prompt"]);return c!=null&&d(i,["enhancedPrompt"],c),i}function aR(t,e){const i={},s=f(t,["_self"]);s!=null&&d(i,["mask"],lv(s));const a=f(t,["labels"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>c)),d(i,["labels"],l)}return i}function lR(t,e){const i={},s=f(t,["video"]);return s!=null&&d(i,["video"],XR(s)),i}function uR(t,e){const i={},s=f(t,["_self"]);return s!=null&&d(i,["video"],QR(s)),i}function cR(t,e){const i={},s=f(t,["modelSelectionConfig"]);s!=null&&d(i,["modelConfig"],s);const a=f(t,["responseJsonSchema"]);a!=null&&d(i,["responseJsonSchema"],a);const l=f(t,["audioTimestamp"]);l!=null&&d(i,["audioTimestamp"],l);const c=f(t,["candidateCount"]);c!=null&&d(i,["candidateCount"],c);const h=f(t,["enableAffectiveDialog"]);h!=null&&d(i,["enableAffectiveDialog"],h);const g=f(t,["frequencyPenalty"]);g!=null&&d(i,["frequencyPenalty"],g);const p=f(t,["logprobs"]);p!=null&&d(i,["logprobs"],p);const v=f(t,["maxOutputTokens"]);v!=null&&d(i,["maxOutputTokens"],v);const T=f(t,["mediaResolution"]);T!=null&&d(i,["mediaResolution"],T);const _=f(t,["presencePenalty"]);_!=null&&d(i,["presencePenalty"],_);const E=f(t,["responseLogprobs"]);E!=null&&d(i,["responseLogprobs"],E);const w=f(t,["responseMimeType"]);w!=null&&d(i,["responseMimeType"],w);const b=f(t,["responseModalities"]);b!=null&&d(i,["responseModalities"],b);const R=f(t,["responseSchema"]);R!=null&&d(i,["responseSchema"],R);const D=f(t,["routingConfig"]);D!=null&&d(i,["routingConfig"],D);const q=f(t,["seed"]);q!=null&&d(i,["seed"],q);const U=f(t,["speechConfig"]);U!=null&&d(i,["speechConfig"],U);const V=f(t,["stopSequences"]);V!=null&&d(i,["stopSequences"],V);const X=f(t,["temperature"]);X!=null&&d(i,["temperature"],X);const P=f(t,["thinkingConfig"]);P!=null&&d(i,["thinkingConfig"],P);const J=f(t,["topK"]);J!=null&&d(i,["topK"],J);const Y=f(t,["topP"]);if(Y!=null&&d(i,["topP"],Y),f(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return i}function fR(t,e,i){const s={},a=f(e,["model"]);return a!=null&&d(s,["_url","name"],be(t,a)),s}function dR(t,e,i){const s={},a=f(e,["model"]);return a!=null&&d(s,["_url","name"],be(t,a)),s}function hR(t,e){const i={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const s=f(t,["enableWidget"]);return s!=null&&d(i,["enableWidget"],s),i}function pR(t,e){const i={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const s=f(t,["timeRangeFilter"]);return s!=null&&d(i,["timeRangeFilter"],s),i}function mR(t,e){const i={},s=f(t,["aspectRatio"]);s!=null&&d(i,["aspectRatio"],s);const a=f(t,["imageSize"]);if(a!=null&&d(i,["imageSize"],a),f(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(f(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return i}function gR(t,e){const i={},s=f(t,["aspectRatio"]);s!=null&&d(i,["aspectRatio"],s);const a=f(t,["imageSize"]);a!=null&&d(i,["imageSize"],a);const l=f(t,["personGeneration"]);l!=null&&d(i,["personGeneration"],l);const c=f(t,["outputMimeType"]);c!=null&&d(i,["imageOutputOptions","mimeType"],c);const h=f(t,["outputCompressionQuality"]);return h!=null&&d(i,["imageOutputOptions","compressionQuality"],h),i}function yR(t,e){const i={},s=f(t,["bytesBase64Encoded"]);s!=null&&d(i,["imageBytes"],ai(s));const a=f(t,["mimeType"]);return a!=null&&d(i,["mimeType"],a),i}function lv(t,e){const i={},s=f(t,["gcsUri"]);s!=null&&d(i,["gcsUri"],s);const a=f(t,["bytesBase64Encoded"]);a!=null&&d(i,["imageBytes"],ai(a));const l=f(t,["mimeType"]);return l!=null&&d(i,["mimeType"],l),i}function $a(t,e){const i={};if(f(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const s=f(t,["imageBytes"]);s!=null&&d(i,["bytesBase64Encoded"],ai(s));const a=f(t,["mimeType"]);return a!=null&&d(i,["mimeType"],a),i}function sn(t,e){const i={},s=f(t,["gcsUri"]);s!=null&&d(i,["gcsUri"],s);const a=f(t,["imageBytes"]);a!=null&&d(i,["bytesBase64Encoded"],ai(a));const l=f(t,["mimeType"]);return l!=null&&d(i,["mimeType"],l),i}function vR(t,e,i,s){const a={},l=f(e,["pageSize"]);i!==void 0&&l!=null&&d(i,["_query","pageSize"],l);const c=f(e,["pageToken"]);i!==void 0&&c!=null&&d(i,["_query","pageToken"],c);const h=f(e,["filter"]);i!==void 0&&h!=null&&d(i,["_query","filter"],h);const g=f(e,["queryBase"]);return i!==void 0&&g!=null&&d(i,["_url","models_url"],tv(t,g)),a}function _R(t,e,i,s){const a={},l=f(e,["pageSize"]);i!==void 0&&l!=null&&d(i,["_query","pageSize"],l);const c=f(e,["pageToken"]);i!==void 0&&c!=null&&d(i,["_query","pageToken"],c);const h=f(e,["filter"]);i!==void 0&&h!=null&&d(i,["_query","filter"],h);const g=f(e,["queryBase"]);return i!==void 0&&g!=null&&d(i,["_url","models_url"],tv(t,g)),a}function TR(t,e,i){const s={},a=f(e,["config"]);return a!=null&&vR(t,a,s),s}function SR(t,e,i){const s={},a=f(e,["config"]);return a!=null&&_R(t,a,s),s}function ER(t,e){const i={},s=f(t,["sdkHttpResponse"]);s!=null&&d(i,["sdkHttpResponse"],s);const a=f(t,["nextPageToken"]);a!=null&&d(i,["nextPageToken"],a);const l=f(t,["_self"]);if(l!=null){let c=nv(l);Array.isArray(c)&&(c=c.map(h=>$c(h))),d(i,["models"],c)}return i}function AR(t,e){const i={},s=f(t,["sdkHttpResponse"]);s!=null&&d(i,["sdkHttpResponse"],s);const a=f(t,["nextPageToken"]);a!=null&&d(i,["nextPageToken"],a);const l=f(t,["_self"]);if(l!=null){let c=nv(l);Array.isArray(c)&&(c=c.map(h=>Jc(h))),d(i,["models"],c)}return i}function wR(t,e){const i={},s=f(t,["maskMode"]);s!=null&&d(i,["maskMode"],s);const a=f(t,["segmentationClasses"]);a!=null&&d(i,["maskClasses"],a);const l=f(t,["maskDilation"]);return l!=null&&d(i,["dilation"],l),i}function $c(t,e){const i={},s=f(t,["name"]);s!=null&&d(i,["name"],s);const a=f(t,["displayName"]);a!=null&&d(i,["displayName"],a);const l=f(t,["description"]);l!=null&&d(i,["description"],l);const c=f(t,["version"]);c!=null&&d(i,["version"],c);const h=f(t,["_self"]);h!=null&&d(i,["tunedModelInfo"],HR(h));const g=f(t,["inputTokenLimit"]);g!=null&&d(i,["inputTokenLimit"],g);const p=f(t,["outputTokenLimit"]);p!=null&&d(i,["outputTokenLimit"],p);const v=f(t,["supportedGenerationMethods"]);v!=null&&d(i,["supportedActions"],v);const T=f(t,["temperature"]);T!=null&&d(i,["temperature"],T);const _=f(t,["maxTemperature"]);_!=null&&d(i,["maxTemperature"],_);const E=f(t,["topP"]);E!=null&&d(i,["topP"],E);const w=f(t,["topK"]);w!=null&&d(i,["topK"],w);const b=f(t,["thinking"]);return b!=null&&d(i,["thinking"],b),i}function Jc(t,e){const i={},s=f(t,["name"]);s!=null&&d(i,["name"],s);const a=f(t,["displayName"]);a!=null&&d(i,["displayName"],a);const l=f(t,["description"]);l!=null&&d(i,["description"],l);const c=f(t,["versionId"]);c!=null&&d(i,["version"],c);const h=f(t,["deployedModels"]);if(h!=null){let _=h;Array.isArray(_)&&(_=_.map(E=>Pb(E))),d(i,["endpoints"],_)}const g=f(t,["labels"]);g!=null&&d(i,["labels"],g);const p=f(t,["_self"]);p!=null&&d(i,["tunedModelInfo"],BR(p));const v=f(t,["defaultCheckpointId"]);v!=null&&d(i,["defaultCheckpointId"],v);const T=f(t,["checkpoints"]);if(T!=null){let _=T;Array.isArray(_)&&(_=_.map(E=>E)),d(i,["checkpoints"],_)}return i}function CR(t,e){const i={},s=f(t,["mediaResolution"]);s!=null&&d(i,["mediaResolution"],s);const a=f(t,["codeExecutionResult"]);a!=null&&d(i,["codeExecutionResult"],a);const l=f(t,["executableCode"]);l!=null&&d(i,["executableCode"],l);const c=f(t,["fileData"]);c!=null&&d(i,["fileData"],qb(c));const h=f(t,["functionCall"]);h!=null&&d(i,["functionCall"],Gb(h));const g=f(t,["functionResponse"]);g!=null&&d(i,["functionResponse"],g);const p=f(t,["inlineData"]);p!=null&&d(i,["inlineData"],cb(p));const v=f(t,["text"]);v!=null&&d(i,["text"],v);const T=f(t,["thought"]);T!=null&&d(i,["thought"],T);const _=f(t,["thoughtSignature"]);_!=null&&d(i,["thoughtSignature"],_);const E=f(t,["videoMetadata"]);return E!=null&&d(i,["videoMetadata"],E),i}function bR(t,e){const i={},s=f(t,["productImage"]);return s!=null&&d(i,["image"],sn(s)),i}function RR(t,e,i){const s={},a=f(t,["numberOfImages"]);e!==void 0&&a!=null&&d(e,["parameters","sampleCount"],a);const l=f(t,["baseSteps"]);e!==void 0&&l!=null&&d(e,["parameters","baseSteps"],l);const c=f(t,["outputGcsUri"]);e!==void 0&&c!=null&&d(e,["parameters","storageUri"],c);const h=f(t,["seed"]);e!==void 0&&h!=null&&d(e,["parameters","seed"],h);const g=f(t,["safetyFilterLevel"]);e!==void 0&&g!=null&&d(e,["parameters","safetySetting"],g);const p=f(t,["personGeneration"]);e!==void 0&&p!=null&&d(e,["parameters","personGeneration"],p);const v=f(t,["addWatermark"]);e!==void 0&&v!=null&&d(e,["parameters","addWatermark"],v);const T=f(t,["outputMimeType"]);e!==void 0&&T!=null&&d(e,["parameters","outputOptions","mimeType"],T);const _=f(t,["outputCompressionQuality"]);e!==void 0&&_!=null&&d(e,["parameters","outputOptions","compressionQuality"],_);const E=f(t,["enhancePrompt"]);e!==void 0&&E!=null&&d(e,["parameters","enhancePrompt"],E);const w=f(t,["labels"]);return e!==void 0&&w!=null&&d(e,["labels"],w),s}function NR(t,e,i){const s={},a=f(e,["model"]);a!=null&&d(s,["_url","model"],be(t,a));const l=f(e,["source"]);l!=null&&MR(l,s);const c=f(e,["config"]);return c!=null&&RR(c,s),s}function IR(t,e){const i={},s=f(t,["predictions"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>Fa(l))),d(i,["generatedImages"],a)}return i}function MR(t,e,i){const s={},a=f(t,["prompt"]);e!==void 0&&a!=null&&d(e,["instances[0]","prompt"],a);const l=f(t,["personImage"]);e!==void 0&&l!=null&&d(e,["instances[0]","personImage","image"],sn(l));const c=f(t,["productImages"]);if(e!==void 0&&c!=null){let h=c;Array.isArray(h)&&(h=h.map(g=>bR(g))),d(e,["instances[0]","productImages"],h)}return s}function DR(t,e){const i={},s=f(t,["referenceImage"]);s!=null&&d(i,["referenceImage"],sn(s));const a=f(t,["referenceId"]);a!=null&&d(i,["referenceId"],a);const l=f(t,["referenceType"]);l!=null&&d(i,["referenceType"],l);const c=f(t,["maskImageConfig"]);c!=null&&d(i,["maskImageConfig"],wR(c));const h=f(t,["controlImageConfig"]);h!=null&&d(i,["controlImageConfig"],yb(h));const g=f(t,["styleImageConfig"]);g!=null&&d(i,["styleImageConfig"],g);const p=f(t,["subjectImageConfig"]);return p!=null&&d(i,["subjectImageConfig"],p),i}function uv(t,e){const i={},s=f(t,["safetyAttributes","categories"]);s!=null&&d(i,["categories"],s);const a=f(t,["safetyAttributes","scores"]);a!=null&&d(i,["scores"],a);const l=f(t,["contentType"]);return l!=null&&d(i,["contentType"],l),i}function cv(t,e){const i={},s=f(t,["safetyAttributes","categories"]);s!=null&&d(i,["categories"],s);const a=f(t,["safetyAttributes","scores"]);a!=null&&d(i,["scores"],a);const l=f(t,["contentType"]);return l!=null&&d(i,["contentType"],l),i}function UR(t,e){const i={},s=f(t,["category"]);if(s!=null&&d(i,["category"],s),f(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const a=f(t,["threshold"]);return a!=null&&d(i,["threshold"],a),i}function xR(t,e){const i={},s=f(t,["image"]);return s!=null&&d(i,["image"],sn(s)),i}function kR(t,e,i){const s={},a=f(t,["mode"]);e!==void 0&&a!=null&&d(e,["parameters","mode"],a);const l=f(t,["maxPredictions"]);e!==void 0&&l!=null&&d(e,["parameters","maxPredictions"],l);const c=f(t,["confidenceThreshold"]);e!==void 0&&c!=null&&d(e,["parameters","confidenceThreshold"],c);const h=f(t,["maskDilation"]);e!==void 0&&h!=null&&d(e,["parameters","maskDilation"],h);const g=f(t,["binaryColorThreshold"]);e!==void 0&&g!=null&&d(e,["parameters","binaryColorThreshold"],g);const p=f(t,["labels"]);return e!==void 0&&p!=null&&d(e,["labels"],p),s}function OR(t,e,i){const s={},a=f(e,["model"]);a!=null&&d(s,["_url","model"],be(t,a));const l=f(e,["source"]);l!=null&&PR(l,s);const c=f(e,["config"]);return c!=null&&kR(c,s),s}function LR(t,e){const i={},s=f(t,["predictions"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>aR(l))),d(i,["generatedMasks"],a)}return i}function PR(t,e,i){const s={},a=f(t,["prompt"]);e!==void 0&&a!=null&&d(e,["instances[0]","prompt"],a);const l=f(t,["image"]);e!==void 0&&l!=null&&d(e,["instances[0]","image"],sn(l));const c=f(t,["scribbleImage"]);return e!==void 0&&c!=null&&d(e,["instances[0]","scribble"],xR(c)),s}function qR(t,e){const i={},s=f(t,["retrievalConfig"]);s!=null&&d(i,["retrievalConfig"],s);const a=f(t,["functionCallingConfig"]);return a!=null&&d(i,["functionCallingConfig"],Hb(a)),i}function GR(t,e){const i={};if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=f(t,["computerUse"]);s!=null&&d(i,["computerUse"],s);const a=f(t,["fileSearch"]);a!=null&&d(i,["fileSearch"],a);const l=f(t,["codeExecution"]);if(l!=null&&d(i,["codeExecution"],l),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=f(t,["functionDeclarations"]);if(c!=null){let T=c;Array.isArray(T)&&(T=T.map(_=>_)),d(i,["functionDeclarations"],T)}const h=f(t,["googleMaps"]);h!=null&&d(i,["googleMaps"],hR(h));const g=f(t,["googleSearch"]);g!=null&&d(i,["googleSearch"],pR(g));const p=f(t,["googleSearchRetrieval"]);p!=null&&d(i,["googleSearchRetrieval"],p);const v=f(t,["urlContext"]);return v!=null&&d(i,["urlContext"],v),i}function fv(t,e){const i={},s=f(t,["retrieval"]);s!=null&&d(i,["retrieval"],s);const a=f(t,["computerUse"]);if(a!=null&&d(i,["computerUse"],a),f(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=f(t,["codeExecution"]);l!=null&&d(i,["codeExecution"],l);const c=f(t,["enterpriseWebSearch"]);c!=null&&d(i,["enterpriseWebSearch"],c);const h=f(t,["functionDeclarations"]);if(h!=null){let _=h;Array.isArray(_)&&(_=_.map(E=>Bb(E))),d(i,["functionDeclarations"],_)}const g=f(t,["googleMaps"]);g!=null&&d(i,["googleMaps"],g);const p=f(t,["googleSearch"]);p!=null&&d(i,["googleSearch"],p);const v=f(t,["googleSearchRetrieval"]);v!=null&&d(i,["googleSearchRetrieval"],v);const T=f(t,["urlContext"]);return T!=null&&d(i,["urlContext"],T),i}function HR(t,e){const i={},s=f(t,["baseModel"]);s!=null&&d(i,["baseModel"],s);const a=f(t,["createTime"]);a!=null&&d(i,["createTime"],a);const l=f(t,["updateTime"]);return l!=null&&d(i,["updateTime"],l),i}function BR(t,e){const i={},s=f(t,["labels","google-vertex-llm-tuning-base-model-id"]);s!=null&&d(i,["baseModel"],s);const a=f(t,["createTime"]);a!=null&&d(i,["createTime"],a);const l=f(t,["updateTime"]);return l!=null&&d(i,["updateTime"],l),i}function VR(t,e,i){const s={},a=f(t,["displayName"]);e!==void 0&&a!=null&&d(e,["displayName"],a);const l=f(t,["description"]);e!==void 0&&l!=null&&d(e,["description"],l);const c=f(t,["defaultCheckpointId"]);return e!==void 0&&c!=null&&d(e,["defaultCheckpointId"],c),s}function zR(t,e,i){const s={},a=f(t,["displayName"]);e!==void 0&&a!=null&&d(e,["displayName"],a);const l=f(t,["description"]);e!==void 0&&l!=null&&d(e,["description"],l);const c=f(t,["defaultCheckpointId"]);return e!==void 0&&c!=null&&d(e,["defaultCheckpointId"],c),s}function FR(t,e,i){const s={},a=f(e,["model"]);a!=null&&d(s,["_url","name"],be(t,a));const l=f(e,["config"]);return l!=null&&VR(l,s),s}function $R(t,e,i){const s={},a=f(e,["model"]);a!=null&&d(s,["_url","model"],be(t,a));const l=f(e,["config"]);return l!=null&&zR(l,s),s}function JR(t,e,i){const s={},a=f(t,["outputGcsUri"]);e!==void 0&&a!=null&&d(e,["parameters","storageUri"],a);const l=f(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&d(e,["parameters","safetySetting"],l);const c=f(t,["personGeneration"]);e!==void 0&&c!=null&&d(e,["parameters","personGeneration"],c);const h=f(t,["includeRaiReason"]);e!==void 0&&h!=null&&d(e,["parameters","includeRaiReason"],h);const g=f(t,["outputMimeType"]);e!==void 0&&g!=null&&d(e,["parameters","outputOptions","mimeType"],g);const p=f(t,["outputCompressionQuality"]);e!==void 0&&p!=null&&d(e,["parameters","outputOptions","compressionQuality"],p);const v=f(t,["enhanceInputImage"]);e!==void 0&&v!=null&&d(e,["parameters","upscaleConfig","enhanceInputImage"],v);const T=f(t,["imagePreservationFactor"]);e!==void 0&&T!=null&&d(e,["parameters","upscaleConfig","imagePreservationFactor"],T);const _=f(t,["labels"]);e!==void 0&&_!=null&&d(e,["labels"],_);const E=f(t,["numberOfImages"]);e!==void 0&&E!=null&&d(e,["parameters","sampleCount"],E);const w=f(t,["mode"]);return e!==void 0&&w!=null&&d(e,["parameters","mode"],w),s}function YR(t,e,i){const s={},a=f(e,["model"]);a!=null&&d(s,["_url","model"],be(t,a));const l=f(e,["image"]);l!=null&&d(s,["instances[0]","image"],sn(l));const c=f(e,["upscaleFactor"]);c!=null&&d(s,["parameters","upscaleConfig","upscaleFactor"],c);const h=f(e,["config"]);return h!=null&&JR(h,s),s}function KR(t,e){const i={},s=f(t,["sdkHttpResponse"]);s!=null&&d(i,["sdkHttpResponse"],s);const a=f(t,["predictions"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>Fa(c))),d(i,["generatedImages"],l)}return i}function XR(t,e){const i={},s=f(t,["uri"]);s!=null&&d(i,["uri"],s);const a=f(t,["encodedVideo"]);a!=null&&d(i,["videoBytes"],ai(a));const l=f(t,["encoding"]);return l!=null&&d(i,["mimeType"],l),i}function QR(t,e){const i={},s=f(t,["gcsUri"]);s!=null&&d(i,["uri"],s);const a=f(t,["bytesBase64Encoded"]);a!=null&&d(i,["videoBytes"],ai(a));const l=f(t,["mimeType"]);return l!=null&&d(i,["mimeType"],l),i}function WR(t,e){const i={},s=f(t,["image"]);s!=null&&d(i,["_self"],sn(s));const a=f(t,["maskMode"]);return a!=null&&d(i,["maskMode"],a),i}function ZR(t,e){const i={},s=f(t,["image"]);s!=null&&d(i,["image"],$a(s));const a=f(t,["referenceType"]);return a!=null&&d(i,["referenceType"],a),i}function jR(t,e){const i={},s=f(t,["image"]);s!=null&&d(i,["image"],sn(s));const a=f(t,["referenceType"]);return a!=null&&d(i,["referenceType"],a),i}function dv(t,e){const i={},s=f(t,["uri"]);s!=null&&d(i,["uri"],s);const a=f(t,["videoBytes"]);a!=null&&d(i,["encodedVideo"],ai(a));const l=f(t,["mimeType"]);return l!=null&&d(i,["encoding"],l),i}function hv(t,e){const i={},s=f(t,["uri"]);s!=null&&d(i,["gcsUri"],s);const a=f(t,["videoBytes"]);a!=null&&d(i,["bytesBase64Encoded"],ai(a));const l=f(t,["mimeType"]);return l!=null&&d(i,["mimeType"],l),i}function eN(t,e){const i={},s=f(t,["displayName"]);return e!==void 0&&s!=null&&d(e,["displayName"],s),i}function tN(t){const e={},i=f(t,["config"]);return i!=null&&eN(i,e),e}function nN(t,e){const i={},s=f(t,["force"]);return e!==void 0&&s!=null&&d(e,["_query","force"],s),i}function iN(t){const e={},i=f(t,["name"]);i!=null&&d(e,["_url","name"],i);const s=f(t,["config"]);return s!=null&&nN(s,e),e}function oN(t){const e={},i=f(t,["name"]);return i!=null&&d(e,["_url","name"],i),e}function sN(t,e){const i={},s=f(t,["customMetadata"]);if(e!==void 0&&s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>c)),d(e,["customMetadata"],l)}const a=f(t,["chunkingConfig"]);return e!==void 0&&a!=null&&d(e,["chunkingConfig"],a),i}function rN(t){const e={},i=f(t,["name"]);i!=null&&d(e,["name"],i);const s=f(t,["metadata"]);s!=null&&d(e,["metadata"],s);const a=f(t,["done"]);a!=null&&d(e,["done"],a);const l=f(t,["error"]);l!=null&&d(e,["error"],l);const c=f(t,["response"]);return c!=null&&d(e,["response"],lN(c)),e}function aN(t){const e={},i=f(t,["fileSearchStoreName"]);i!=null&&d(e,["_url","file_search_store_name"],i);const s=f(t,["fileName"]);s!=null&&d(e,["fileName"],s);const a=f(t,["config"]);return a!=null&&sN(a,e),e}function lN(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&d(e,["sdkHttpResponse"],i);const s=f(t,["parent"]);s!=null&&d(e,["parent"],s);const a=f(t,["documentName"]);return a!=null&&d(e,["documentName"],a),e}function uN(t,e){const i={},s=f(t,["pageSize"]);e!==void 0&&s!=null&&d(e,["_query","pageSize"],s);const a=f(t,["pageToken"]);return e!==void 0&&a!=null&&d(e,["_query","pageToken"],a),i}function cN(t){const e={},i=f(t,["config"]);return i!=null&&uN(i,e),e}function fN(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&d(e,["sdkHttpResponse"],i);const s=f(t,["nextPageToken"]);s!=null&&d(e,["nextPageToken"],s);const a=f(t,["fileSearchStores"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>c)),d(e,["fileSearchStores"],l)}return e}function pv(t,e){const i={},s=f(t,["mimeType"]);e!==void 0&&s!=null&&d(e,["mimeType"],s);const a=f(t,["displayName"]);e!==void 0&&a!=null&&d(e,["displayName"],a);const l=f(t,["customMetadata"]);if(e!==void 0&&l!=null){let h=l;Array.isArray(h)&&(h=h.map(g=>g)),d(e,["customMetadata"],h)}const c=f(t,["chunkingConfig"]);return e!==void 0&&c!=null&&d(e,["chunkingConfig"],c),i}function dN(t){const e={},i=f(t,["fileSearchStoreName"]);i!=null&&d(e,["_url","file_search_store_name"],i);const s=f(t,["config"]);return s!=null&&pv(s,e),e}function hN(t){const e={},i=f(t,["sdkHttpResponse"]);return i!=null&&d(e,["sdkHttpResponse"],i),e}const pN="Content-Type",mN="X-Server-Timeout",gN="User-Agent",Yc="x-goog-api-client",yN="1.41.0",vN=`google-genai-sdk/${yN}`,_N="v1beta1",TN="v1beta",SN=5,EN=[408,429,500,502,503,504];class AN{constructor(e){var i,s,a;this.clientOptions=Object.assign({},e),this.customBaseUrl=(i=e.httpOptions)===null||i===void 0?void 0:i.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const l={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const h=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!h?(l.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?l.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(l.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),l.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:_N}else{if(!this.clientOptions.apiKey)throw new Xs({message:"API key must be set when using the Gemini API.",status:403});l.apiVersion=(a=this.clientOptions.apiVersion)!==null&&a!==void 0?a:TN,l.baseUrl="https://generativelanguage.googleapis.com/"}l.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=l,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(l,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),i=new URL(e);return i.protocol=i.protocol=="http:"?"ws":"wss",i.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,i,s){const a=[this.getRequestUrlInternal(i)];return s&&a.push(this.getBaseResourcePath()),e!==""&&a.push(e),new URL(`${a.join("/")}`)}shouldPrependVertexProjectPath(e,i){return!(i.baseUrl&&i.baseUrlResourceScope===Bc.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let i=this.clientOptions.httpOptions;e.httpOptions&&(i=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e,i),a=this.constructUrl(e.path,i,s);if(e.queryParams)for(const[c,h]of Object.entries(e.queryParams))a.searchParams.append(c,String(h));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,i,a.toString(),e.abortSignal),this.unaryApiCall(a,l,e.httpMethod)}patchHttpOptions(e,i){const s=JSON.parse(JSON.stringify(e));for(const[a,l]of Object.entries(i))typeof l=="object"?s[a]=Object.assign(Object.assign({},s[a]),l):l!==void 0&&(s[a]=l);return s}async requestStream(e){let i=this.clientOptions.httpOptions;e.httpOptions&&(i=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e,i),a=this.constructUrl(e.path,i,s);(!a.searchParams.has("alt")||a.searchParams.get("alt")!=="sse")&&a.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,i,a.toString(),e.abortSignal),this.streamApiCall(a,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,i,s,a){if(i&&i.timeout||a){const l=new AbortController,c=l.signal;if(i.timeout&&i?.timeout>0){const h=setTimeout(()=>l.abort(),i.timeout);h&&typeof h.unref=="function"&&h.unref()}a&&a.addEventListener("abort",()=>{l.abort()}),e.signal=c}return i&&i.extraBody!==null&&wN(e,i.extraBody),e.headers=await this.getHeadersInternal(i,s),e}async unaryApiCall(e,i,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},i),{method:s})).then(async a=>(await yy(a),new Vc(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}async streamApiCall(e,i,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},i),{method:s})).then(async a=>(await yy(a),this.processStreamResponse(a))).catch(a=>{throw a instanceof Error?a:new Error(JSON.stringify(a))})}processStreamResponse(e){return nn(this,arguments,function*(){var s;const a=(s=e?.body)===null||s===void 0?void 0:s.getReader(),l=new TextDecoder("utf-8");if(!a)throw new Error("Response body is empty");try{let c="";const h="data:",g=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:p,value:v}=yield ue(a.read());if(p){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const T=l.decode(v,{stream:!0});try{const w=JSON.parse(T);if("error"in w){const b=JSON.parse(JSON.stringify(w.error)),R=b.status,D=b.code,q=`got status: ${R}. ${JSON.stringify(w)}`;if(D>=400&&D<600)throw new Xs({message:q,status:D})}}catch(w){if(w.name==="ApiError")throw w}c+=T;let _=-1,E=0;for(;;){_=-1,E=0;for(const R of g){const D=c.indexOf(R);D!==-1&&(_===-1||D<_)&&(_=D,E=R.length)}if(_===-1)break;const w=c.substring(0,_);c=c.substring(_+E);const b=w.trim();if(b.startsWith(h)){const R=b.substring(h.length).trim();try{const D=new Response(R,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield ue(new Vc(D))}catch(D){throw new Error(`exception parsing stream chunk ${R}. ${D}`)}}}}}finally{a.releaseLock()}})}async apiCall(e,i){var s;if(!this.clientOptions.httpOptions||!this.clientOptions.httpOptions.retryOptions)return fetch(e,i);const a=this.clientOptions.httpOptions.retryOptions;return hA(async()=>{const c=await fetch(e,i);if(c.ok)return c;throw EN.includes(c.status)?new Error(`Retryable HTTP Error: ${c.statusText}`):new Jy(`Non-retryable exception ${c.statusText} sending request`)},{retries:((s=a.attempts)!==null&&s!==void 0?s:SN)-1})}getDefaultHeaders(){const e={},i=vN+" "+this.clientOptions.userAgentExtra;return e[gN]=i,e[Yc]=i,e[pN]="application/json",e}async getHeadersInternal(e,i){const s=new Headers;if(e&&e.headers){for(const[a,l]of Object.entries(e.headers))s.append(a,l);e.timeout&&e.timeout>0&&s.append(mN,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s,i),s}getFileName(e){var i;let s="";return typeof e=="string"&&(s=e.replace(/[/\\]+$/,""),s=(i=s.split(/[/\\]/).pop())!==null&&i!==void 0?i:""),s}async uploadFile(e,i){var s;const a={};i!=null&&(a.mimeType=i.mimeType,a.name=i.name,a.displayName=i.displayName),a.name&&!a.name.startsWith("files/")&&(a.name=`files/${a.name}`);const l=this.clientOptions.uploader,c=await l.stat(e);a.sizeBytes=String(c.size);const h=(s=i?.mimeType)!==null&&s!==void 0?s:c.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");a.mimeType=h;const g={file:a},p=this.getFileName(e),v=W("upload/v1beta/files",g._url),T=await this.fetchUploadUrl(v,a.sizeBytes,a.mimeType,p,g,i?.httpOptions);return l.upload(e,T,this)}async uploadFileToFileSearchStore(e,i,s){var a;const l=this.clientOptions.uploader,c=await l.stat(i),h=String(c.size),g=(a=s?.mimeType)!==null&&a!==void 0?a:c.type;if(g===void 0||g==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const p=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(i),T={};s!=null&&pv(s,T);const _=await this.fetchUploadUrl(p,h,g,v,T,s?.httpOptions);return l.uploadToFileSearchStore(i,_,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,i,s,a,l,c){var h;let g={};c?g=c:g={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i}`,"X-Goog-Upload-Header-Content-Type":`${s}`},a?{"X-Goog-Upload-File-Name":a}:{})};const p=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:g});if(!p||!p?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(h=p?.headers)===null||h===void 0?void 0:h["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function yy(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const i=t.status;let s;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await t.json():s={error:{message:await t.text(),code:t.status,status:t.statusText}};const a=JSON.stringify(s);throw i>=400&&i<600?new Xs({message:a,status:i}):new Error(a)}}function wN(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let i={};if(typeof t.body=="string"&&t.body.length>0)try{const l=JSON.parse(t.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))i=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(l,c){const h=Object.assign({},l);for(const g in c)if(Object.prototype.hasOwnProperty.call(c,g)){const p=c[g],v=h[g];p&&typeof p=="object"&&!Array.isArray(p)&&v&&typeof v=="object"&&!Array.isArray(v)?h[g]=s(v,p):(v&&p&&typeof v!=typeof p&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${g}". Original type: ${typeof v}, New type: ${typeof p}. Overwriting.`),h[g]=p)}return h}const a=s(i,e);t.body=JSON.stringify(a)}const CN="mcp_used/unknown";let bN=!1;function mv(t){for(const e of t)if(RN(e)||typeof e=="object"&&"inputSchema"in e)return!0;return bN}function gv(t){var e;const i=(e=t[Yc])!==null&&e!==void 0?e:"";t[Yc]=(i+` ${CN}`).trimStart()}function RN(t){return t!==null&&typeof t=="object"&&t instanceof ff}function NN(t){return nn(this,arguments,function*(i,s=100){let a,l=0;for(;l<s;){const c=yield ue(i.listTools({cursor:a}));for(const h of c.tools)yield yield ue(h),l++;if(!c.nextCursor)break;a=c.nextCursor}})}class ff{constructor(e=[],i){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=i}static create(e,i){return new ff(e,i)}async initialize(){var e,i,s,a;if(this.mcpTools.length>0)return;const l={},c=[];for(const v of this.mcpClients)try{for(var h=!0,g=(i=void 0,on(NN(v))),p;p=await g.next(),e=p.done,!e;h=!0){a=p.value,h=!1;const T=a;c.push(T);const _=T.name;if(l[_])throw new Error(`Duplicate function name ${_} found in MCP tools. Please ensure function names are unique.`);l[_]=v}}catch(T){i={error:T}}finally{try{!h&&!e&&(s=g.return)&&await s.call(g)}finally{if(i)throw i.error}}this.mcpTools=c,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),tw(this.mcpTools,this.config)}async callTool(e){await this.initialize();const i=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const a=this.functionNameToMcpClient[s.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const c=await a.callTool({name:s.name,arguments:s.args},void 0,l);i.push({functionResponse:{name:s.name,response:c.isError?{error:c}:c}})}return i}}async function IN(t,e,i){const s=new YA;let a;i.data instanceof Blob?a=JSON.parse(await i.data.text()):a=JSON.parse(i.data),Object.assign(s,a),e(s)}class MN{constructor(e,i,s){this.apiClient=e,this.auth=i,this.webSocketFactory=s}async connect(e){var i,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const a=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),c=xN(this.apiClient.getDefaultHeaders()),h=this.apiClient.getApiKey(),g=`${a}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${h}`;let p=()=>{};const v=new Promise(U=>{p=U}),T=e.callbacks,_=function(){p({})},E=this.apiClient,w={onopen:_,onmessage:U=>{IN(E,T.onmessage,U)},onerror:(i=T?.onerror)!==null&&i!==void 0?i:function(U){},onclose:(s=T?.onclose)!==null&&s!==void 0?s:function(U){}},b=this.webSocketFactory.create(g,UN(c),w);b.connect(),await v;const q={setup:{model:be(this.apiClient,e.model)}};return b.send(JSON.stringify(q)),new DN(b,this.apiClient)}}class DN{constructor(e,i){this.conn=e,this.apiClient=i}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const i=eb(e);this.conn.send(JSON.stringify({clientContent:i}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const i=jC(e);this.conn.send(JSON.stringify(i))}sendPlaybackControl(e){const i={playbackControl:e};this.conn.send(JSON.stringify(i))}play(){this.sendPlaybackControl(Do.PLAY)}pause(){this.sendPlaybackControl(Do.PAUSE)}stop(){this.sendPlaybackControl(Do.STOP)}resetContext(){this.sendPlaybackControl(Do.RESET_CONTEXT)}close(){this.conn.close()}}function UN(t){const e={};return t.forEach((i,s)=>{e[s]=i}),e}function xN(t){const e=new Headers;for(const[i,s]of Object.entries(t))e.append(i,s);return e}const kN="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function ON(t,e,i){const s=new JA;let a;i.data instanceof Blob?a=await i.data.text():i.data instanceof ArrayBuffer?a=new TextDecoder().decode(i.data):a=i.data;const l=JSON.parse(a);if(t.isVertexAI()){const c=ib(l);Object.assign(s,c)}else Object.assign(s,l);e(s)}class LN{constructor(e,i,s){this.apiClient=e,this.auth=i,this.webSocketFactory=s,this.music=new MN(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var i,s,a,l,c,h;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const g=this.apiClient.getWebsocketBaseUrl(),p=this.apiClient.getApiVersion();let v;const T=this.apiClient.getHeaders();e.config&&e.config.tools&&mv(e.config.tools)&&gv(T);const _=HN(T);if(this.apiClient.isVertexAI()){const K=this.apiClient.getProject(),oe=this.apiClient.getLocation(),pe=this.apiClient.getApiKey(),Te=!!K&&!!oe||!!pe;this.apiClient.getCustomBaseUrl()&&!Te?v=g:(v=`${g}/ws/google.cloud.aiplatform.${p}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(_,v))}else{const K=this.apiClient.getApiKey();let oe="BidiGenerateContent",pe="key";K?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),p!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),oe="BidiGenerateContentConstrained",pe="access_token"),v=`${g}/ws/google.ai.generativelanguage.${p}.GenerativeService.${oe}?${pe}=${K}`}let E=()=>{};const w=new Promise(K=>{E=K}),b=e.callbacks,R=function(){var K;(K=b?.onopen)===null||K===void 0||K.call(b),E({})},D=this.apiClient,q={onopen:R,onmessage:K=>{ON(D,b.onmessage,K)},onerror:(i=b?.onerror)!==null&&i!==void 0?i:function(K){},onclose:(s=b?.onclose)!==null&&s!==void 0?s:function(K){}},U=this.webSocketFactory.create(v,GN(_),q);U.connect(),await w;let V=be(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&V.startsWith("publishers/")){const K=this.apiClient.getProject(),oe=this.apiClient.getLocation();K&&oe&&(V=`projects/${K}/locations/${oe}/`+V)}let X={};this.apiClient.isVertexAI()&&((a=e.config)===null||a===void 0?void 0:a.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[xa.AUDIO]}:e.config.responseModalities=[xa.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const P=(h=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&h!==void 0?h:[],J=[];for(const K of P)if(this.isCallableTool(K)){const oe=K;J.push(await oe.tool())}else J.push(K);J.length>0&&(e.config.tools=J);const Y={model:V,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?X=ZC(this.apiClient,Y):X=WC(this.apiClient,Y),delete X.config,U.send(JSON.stringify(X)),new qN(U,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const PN={turnComplete:!0};class qN{constructor(e,i){this.conn=e,this.apiClient=i}tLiveClientContent(e,i){if(i.turns!==null&&i.turns!==void 0){let s=[];try{s=Kt(i.turns),e.isVertexAI()||(s=s.map(a=>za(a)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof i.turns}'`)}return{clientContent:{turns:s,turnComplete:i.turnComplete}}}return{clientContent:{turnComplete:i.turnComplete}}}tLiveClienttToolResponse(e,i){let s=[];if(i.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(i.functionResponses)?s=i.functionResponses:s=[i.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const l of s){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(kN)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},PN),e);const i=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(i))}sendRealtimeInput(e){let i={};this.apiClient.isVertexAI()?i={realtimeInput:nb(e)}:i={realtimeInput:tb(e)},this.conn.send(JSON.stringify(i))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const i=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(i))}close(){this.conn.close()}}function GN(t){const e={};return t.forEach((i,s)=>{e[s]=i}),e}function HN(t){const e=new Headers;for(const[i,s]of Object.entries(t))e.append(i,s);return e}const vy=10;function _y(t){var e,i,s;if(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let a=!1;for(const c of(i=t?.tools)!==null&&i!==void 0?i:[])if(Oo(c)){a=!0;break}if(!a)return!0;const l=(s=t?.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function Oo(t){return"callTool"in t&&typeof t.callTool=="function"}function BN(t){var e,i,s;return(s=(i=(e=t.config)===null||e===void 0?void 0:e.tools)===null||i===void 0?void 0:i.some(a=>Oo(a)))!==null&&s!==void 0?s:!1}function Ty(t){var e;const i=[];return!((e=t?.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((s,a)=>{if(Oo(s))return;const l=s;l.functionDeclarations&&l.functionDeclarations.length>0&&i.push(a)}),i}function Sy(t){var e;return!(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}class VN extends Dn{constructor(e){super(),this.apiClient=e,this.generateContent=async i=>{var s,a,l,c,h;const g=await this.processParamsMaybeAddMcpUsage(i);if(this.maybeMoveToResponseJsonSchem(i),!BN(i)||_y(i.config))return await this.generateContentInternal(g);const p=Ty(i);if(p.length>0){const b=p.map(R=>`tools[${R}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${b}.`)}let v,T;const _=Kt(g.contents),E=(l=(a=(s=g.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls)!==null&&l!==void 0?l:vy;let w=0;for(;w<E&&(v=await this.generateContentInternal(g),!(!v.functionCalls||v.functionCalls.length===0));){const b=v.candidates[0].content,R=[];for(const D of(h=(c=i.config)===null||c===void 0?void 0:c.tools)!==null&&h!==void 0?h:[])if(Oo(D)){const U=await D.callTool(v.functionCalls);R.push(...U)}w++,T={role:"user",parts:R},g.contents=Kt(g.contents),g.contents.push(b),g.contents.push(T),Sy(g.config)&&(_.push(b),_.push(T))}return Sy(g.config)&&(v.automaticFunctionCallingHistory=_),v},this.generateContentStream=async i=>{var s,a,l,c,h;if(this.maybeMoveToResponseJsonSchem(i),_y(i.config)){const T=await this.processParamsMaybeAddMcpUsage(i);return await this.generateContentStreamInternal(T)}const g=Ty(i);if(g.length>0){const T=g.map(_=>`tools[${_}]`).join(", ");throw new Error(`Incompatible tools found at ${T}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const p=(l=(a=(s=i?.config)===null||s===void 0?void 0:s.toolConfig)===null||a===void 0?void 0:a.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,v=(h=(c=i?.config)===null||c===void 0?void 0:c.automaticFunctionCalling)===null||h===void 0?void 0:h.disable;if(p&&!v)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(i)},this.generateImages=async i=>await this.generateImagesInternal(i).then(s=>{var a;let l;const c=[];if(s?.generatedImages)for(const g of s.generatedImages)g&&g?.safetyAttributes&&((a=g?.safetyAttributes)===null||a===void 0?void 0:a.contentType)==="Positive Prompt"?l=g?.safetyAttributes:c.push(g);let h;return l?h={generatedImages:c,positivePromptSafetyAttributes:l,sdkHttpResponse:s.sdkHttpResponse}:h={generatedImages:c,sdkHttpResponse:s.sdkHttpResponse},h}),this.list=async i=>{var s;const c={config:Object.assign(Object.assign({},{queryBase:!0}),i?.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((s=c.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new ki(In.PAGED_ITEM_MODELS,h=>this.listInternal(h),await this.listInternal(c),c)},this.editImage=async i=>{const s={model:i.model,prompt:i.prompt,referenceImages:[],config:i.config};return i.referenceImages&&i.referenceImages&&(s.referenceImages=i.referenceImages.map(a=>a.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async i=>{let s={numberOfImages:1,mode:"upscale"};i.config&&(s=Object.assign(Object.assign({},s),i.config));const a={model:i.model,image:i.image,upscaleFactor:i.upscaleFactor,config:s};return await this.upscaleImageInternal(a)},this.generateVideos=async i=>{var s,a,l,c,h,g;if((i.prompt||i.image||i.video)&&i.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((s=i.video)===null||s===void 0)&&s.uri&&(!((a=i.video)===null||a===void 0)&&a.videoBytes)?i.video={uri:i.video.uri,mimeType:i.video.mimeType}:!((c=(l=i.source)===null||l===void 0?void 0:l.video)===null||c===void 0)&&c.uri&&(!((g=(h=i.source)===null||h===void 0?void 0:h.video)===null||g===void 0)&&g.videoBytes)&&(i.source.video={uri:i.source.video.uri,mimeType:i.source.video.mimeType})),await this.generateVideosInternal(i)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var i,s,a;const l=(i=e.config)===null||i===void 0?void 0:i.tools;if(!l)return e;const c=await Promise.all(l.map(async g=>Oo(g)?await g.tool():g)),h={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(h.config.tools=c,e.config&&e.config.tools&&mv(e.config.tools)){const g=(a=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&a!==void 0?a:{};let p=Object.assign({},g);Object.keys(p).length===0&&(p=this.apiClient.getDefaultHeaders()),gv(p),h.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:p})}return h}async initAfcToolsMap(e){var i,s,a;const l=new Map;for(const c of(s=(i=e.config)===null||i===void 0?void 0:i.tools)!==null&&s!==void 0?s:[])if(Oo(c)){const h=c,g=await h.tool();for(const p of(a=g.functionDeclarations)!==null&&a!==void 0?a:[]){if(!p.name)throw new Error("Function declaration name is required.");if(l.has(p.name))throw new Error(`Duplicate tool declaration name: ${p.name}`);l.set(p.name,h)}}return l}async processAfcStream(e){var i,s,a;const l=(a=(s=(i=e.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&a!==void 0?a:vy;let c=!1,h=0;const g=await this.initAfcToolsMap(e);return(function(p,v,T){return nn(this,arguments,function*(){for(var _,E,w,b,R,D;h<l;){c&&(h++,c=!1);const X=yield ue(p.processParamsMaybeAddMcpUsage(T)),P=yield ue(p.generateContentStreamInternal(X)),J=[],Y=[];try{for(var q=!0,U=(E=void 0,on(P)),V;V=yield ue(U.next()),_=V.done,!_;q=!0){b=V.value,q=!1;const K=b;if(yield yield ue(K),K.candidates&&(!((R=K.candidates[0])===null||R===void 0)&&R.content)){Y.push(K.candidates[0].content);for(const oe of(D=K.candidates[0].content.parts)!==null&&D!==void 0?D:[])if(h<l&&oe.functionCall){if(!oe.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(oe.functionCall.name)){const pe=yield ue(v.get(oe.functionCall.name).callTool([oe.functionCall]));J.push(...pe)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${oe.functionCall.name}`)}}}}catch(K){E={error:K}}finally{try{!q&&!_&&(w=U.return)&&(yield ue(w.call(U)))}finally{if(E)throw E.error}}if(J.length>0){c=!0;const K=new Ls;K.candidates=[{content:{role:"user",parts:J}}],yield yield ue(K);const oe=[];oe.push(...Y),oe.push({role:"user",parts:J});const pe=Kt(T.contents).concat(oe);T.contents=pe}else break}})})(this,g,e)}async generateContentInternal(e){var i,s,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=py(this.apiClient,e);return h=W("{model}:generateContent",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const _=T;return _.sdkHttpResponse={headers:v.headers},_})),c.then(v=>{const T=gy(v),_=new Ls;return Object.assign(_,T),_})}else{const p=hy(this.apiClient,e);return h=W("{model}:generateContent",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const _=T;return _.sdkHttpResponse={headers:v.headers},_})),c.then(v=>{const T=my(v),_=new Ls;return Object.assign(_,T),_})}}async generateContentStreamInternal(e){var i,s,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=py(this.apiClient,e);return h=W("{model}:streamGenerateContent?alt=sse",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.requestStream({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),c.then(function(T){return nn(this,arguments,function*(){var _,E,w,b;try{for(var R=!0,D=on(T),q;q=yield ue(D.next()),_=q.done,!_;R=!0){b=q.value,R=!1;const U=b,V=gy(yield ue(U.json()),e);V.sdkHttpResponse={headers:U.headers};const X=new Ls;Object.assign(X,V),yield yield ue(X)}}catch(U){E={error:U}}finally{try{!R&&!_&&(w=D.return)&&(yield ue(w.call(D)))}finally{if(E)throw E.error}}})})}else{const p=hy(this.apiClient,e);return h=W("{model}:streamGenerateContent?alt=sse",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.requestStream({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),c.then(function(T){return nn(this,arguments,function*(){var _,E,w,b;try{for(var R=!0,D=on(T),q;q=yield ue(D.next()),_=q.done,!_;R=!0){b=q.value,R=!1;const U=b,V=my(yield ue(U.json()),e);V.sdkHttpResponse={headers:U.headers};const X=new Ls;Object.assign(X,V),yield yield ue(X)}}catch(U){E={error:U}}finally{try{!R&&!_&&(w=D.return)&&(yield ue(w.call(D)))}finally{if(E)throw E.error}}})})}}async embedContent(e){var i,s,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=kb(this.apiClient,e);return h=W("{model}:predict",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const _=T;return _.sdkHttpResponse={headers:v.headers},_})),c.then(v=>{const T=Lb(v),_=new Qg;return Object.assign(_,T),_})}else{const p=xb(this.apiClient,e);return h=W("{model}:batchEmbedContents",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const _=T;return _.sdkHttpResponse={headers:v.headers},_})),c.then(v=>{const T=Ob(v),_=new Qg;return Object.assign(_,T),_})}}async generateImagesInternal(e){var i,s,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=Yb(this.apiClient,e);return h=W("{model}:predict",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const _=T;return _.sdkHttpResponse={headers:v.headers},_})),c.then(v=>{const T=Xb(v),_=new Wg;return Object.assign(_,T),_})}else{const p=Jb(this.apiClient,e);return h=W("{model}:predict",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const _=T;return _.sdkHttpResponse={headers:v.headers},_})),c.then(v=>{const T=Kb(v),_=new Wg;return Object.assign(_,T),_})}}async editImageInternal(e){var i,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const h=Ib(this.apiClient,e);return l=W("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const p=Mb(g),v=new kA;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var i,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const h=YR(this.apiClient,e);return l=W("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const p=KR(g),v=new OA;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var i,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const h=NR(this.apiClient,e);return l=W("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),a.then(g=>{const p=IR(g),v=new LA;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var i,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const h=OR(this.apiClient,e);return l=W("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),a.then(g=>{const p=LR(g),v=new PA;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var i,s,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=dR(this.apiClient,e);return h=W("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>Jc(v))}else{const p=fR(this.apiClient,e);return h=W("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>$c(v))}}async listInternal(e){var i,s,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=SR(this.apiClient,e);return h=W("{models_url}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const _=T;return _.sdkHttpResponse={headers:v.headers},_})),c.then(v=>{const T=AR(v),_=new Zg;return Object.assign(_,T),_})}else{const p=TR(this.apiClient,e);return h=W("{models_url}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const _=T;return _.sdkHttpResponse={headers:v.headers},_})),c.then(v=>{const T=ER(v),_=new Zg;return Object.assign(_,T),_})}}async update(e){var i,s,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=$R(this.apiClient,e);return h=W("{model}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>Jc(v))}else{const p=FR(this.apiClient,e);return h=W("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>$c(v))}}async delete(e){var i,s,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=Cb(this.apiClient,e);return h=W("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const _=T;return _.sdkHttpResponse={headers:v.headers},_})),c.then(v=>{const T=Rb(v),_=new jg;return Object.assign(_,T),_})}else{const p=wb(this.apiClient,e);return h=W("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const _=T;return _.sdkHttpResponse={headers:v.headers},_})),c.then(v=>{const T=bb(v),_=new jg;return Object.assign(_,T),_})}}async countTokens(e){var i,s,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=Sb(this.apiClient,e);return h=W("{model}:countTokens",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const _=T;return _.sdkHttpResponse={headers:v.headers},_})),c.then(v=>{const T=Ab(v),_=new ey;return Object.assign(_,T),_})}else{const p=Tb(this.apiClient,e);return h=W("{model}:countTokens",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const _=T;return _.sdkHttpResponse={headers:v.headers},_})),c.then(v=>{const T=Eb(v),_=new ey;return Object.assign(_,T),_})}}async computeTokens(e){var i,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const h=hb(this.apiClient,e);return l=W("{model}:computeTokens",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>{const p=pb(g),v=new qA;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var i,s,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=tR(this.apiClient,e);return h=W("{model}:predictLongRunning",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>{const T=jb(v),_=new ka;return Object.assign(_,T),_})}else{const p=eR(this.apiClient,e);return h=W("{model}:predictLongRunning",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>{const T=Zb(v),_=new ka;return Object.assign(_,T),_})}}}class zN extends Dn{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const i=e.operation,s=e.config;if(i.name===void 0||i.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=i.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:i.name,resourceName:a,config:{httpOptions:l}});return i._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:i.name,config:s});return i._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async get(e){const i=e.operation,s=e.config;if(i.name===void 0||i.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const a=i.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:i.name,resourceName:a,config:{httpOptions:l}});return i._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const a=await this.getVideosOperationInternal({operationName:i.name,config:s});return i._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async getVideosOperationInternal(e){var i,s,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=NA(e);return h=W("{operationName}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c}else{const p=RA(e);return h=W("{operationName}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c}}async fetchPredictVideosOperationInternal(e){var i,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const h=TA(e);return l=W("{resourceName}:fetchPredictOperation",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),a}else throw new Error("This method is only supported by the Vertex AI.")}}function FN(t){const e={},i=f(t,["data"]);if(i!=null&&d(e,["data"],i),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=f(t,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function $N(t){const e={},i=f(t,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>eI(l))),d(e,["parts"],a)}const s=f(t,["role"]);return s!=null&&d(e,["role"],s),e}function JN(t,e,i){const s={},a=f(e,["expireTime"]);i!==void 0&&a!=null&&d(i,["expireTime"],a);const l=f(e,["newSessionExpireTime"]);i!==void 0&&l!=null&&d(i,["newSessionExpireTime"],l);const c=f(e,["uses"]);i!==void 0&&c!=null&&d(i,["uses"],c);const h=f(e,["liveConnectConstraints"]);i!==void 0&&h!=null&&d(i,["bidiGenerateContentSetup"],jN(t,h));const g=f(e,["lockAdditionalFields"]);return i!==void 0&&g!=null&&d(i,["fieldMask"],g),s}function YN(t,e){const i={},s=f(e,["config"]);return s!=null&&d(i,["config"],JN(t,s,i)),i}function KN(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(t,["fileUri"]);i!=null&&d(e,["fileUri"],i);const s=f(t,["mimeType"]);return s!=null&&d(e,["mimeType"],s),e}function XN(t){const e={},i=f(t,["id"]);i!=null&&d(e,["id"],i);const s=f(t,["args"]);s!=null&&d(e,["args"],s);const a=f(t,["name"]);if(a!=null&&d(e,["name"],a),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function QN(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=f(t,["enableWidget"]);return i!=null&&d(e,["enableWidget"],i),e}function WN(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=f(t,["timeRangeFilter"]);return i!=null&&d(e,["timeRangeFilter"],i),e}function ZN(t,e){const i={},s=f(t,["generationConfig"]);e!==void 0&&s!=null&&d(e,["setup","generationConfig"],s);const a=f(t,["responseModalities"]);e!==void 0&&a!=null&&d(e,["setup","generationConfig","responseModalities"],a);const l=f(t,["temperature"]);e!==void 0&&l!=null&&d(e,["setup","generationConfig","temperature"],l);const c=f(t,["topP"]);e!==void 0&&c!=null&&d(e,["setup","generationConfig","topP"],c);const h=f(t,["topK"]);e!==void 0&&h!=null&&d(e,["setup","generationConfig","topK"],h);const g=f(t,["maxOutputTokens"]);e!==void 0&&g!=null&&d(e,["setup","generationConfig","maxOutputTokens"],g);const p=f(t,["mediaResolution"]);e!==void 0&&p!=null&&d(e,["setup","generationConfig","mediaResolution"],p);const v=f(t,["seed"]);e!==void 0&&v!=null&&d(e,["setup","generationConfig","seed"],v);const T=f(t,["speechConfig"]);e!==void 0&&T!=null&&d(e,["setup","generationConfig","speechConfig"],cf(T));const _=f(t,["thinkingConfig"]);e!==void 0&&_!=null&&d(e,["setup","generationConfig","thinkingConfig"],_);const E=f(t,["enableAffectiveDialog"]);e!==void 0&&E!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],E);const w=f(t,["systemInstruction"]);e!==void 0&&w!=null&&d(e,["setup","systemInstruction"],$N(ht(w)));const b=f(t,["tools"]);if(e!==void 0&&b!=null){let P=qo(b);Array.isArray(P)&&(P=P.map(J=>nI(Po(J)))),d(e,["setup","tools"],P)}const R=f(t,["sessionResumption"]);e!==void 0&&R!=null&&d(e,["setup","sessionResumption"],tI(R));const D=f(t,["inputAudioTranscription"]);e!==void 0&&D!=null&&d(e,["setup","inputAudioTranscription"],D);const q=f(t,["outputAudioTranscription"]);e!==void 0&&q!=null&&d(e,["setup","outputAudioTranscription"],q);const U=f(t,["realtimeInputConfig"]);e!==void 0&&U!=null&&d(e,["setup","realtimeInputConfig"],U);const V=f(t,["contextWindowCompression"]);e!==void 0&&V!=null&&d(e,["setup","contextWindowCompression"],V);const X=f(t,["proactivity"]);if(e!==void 0&&X!=null&&d(e,["setup","proactivity"],X),f(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return i}function jN(t,e){const i={},s=f(e,["model"]);s!=null&&d(i,["setup","model"],be(t,s));const a=f(e,["config"]);return a!=null&&d(i,["config"],ZN(a,i)),i}function eI(t){const e={},i=f(t,["mediaResolution"]);i!=null&&d(e,["mediaResolution"],i);const s=f(t,["codeExecutionResult"]);s!=null&&d(e,["codeExecutionResult"],s);const a=f(t,["executableCode"]);a!=null&&d(e,["executableCode"],a);const l=f(t,["fileData"]);l!=null&&d(e,["fileData"],KN(l));const c=f(t,["functionCall"]);c!=null&&d(e,["functionCall"],XN(c));const h=f(t,["functionResponse"]);h!=null&&d(e,["functionResponse"],h);const g=f(t,["inlineData"]);g!=null&&d(e,["inlineData"],FN(g));const p=f(t,["text"]);p!=null&&d(e,["text"],p);const v=f(t,["thought"]);v!=null&&d(e,["thought"],v);const T=f(t,["thoughtSignature"]);T!=null&&d(e,["thoughtSignature"],T);const _=f(t,["videoMetadata"]);return _!=null&&d(e,["videoMetadata"],_),e}function tI(t){const e={},i=f(t,["handle"]);if(i!=null&&d(e,["handle"],i),f(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function nI(t){const e={};if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(t,["computerUse"]);i!=null&&d(e,["computerUse"],i);const s=f(t,["fileSearch"]);s!=null&&d(e,["fileSearch"],s);const a=f(t,["codeExecution"]);if(a!=null&&d(e,["codeExecution"],a),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(t,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(T=>T)),d(e,["functionDeclarations"],v)}const c=f(t,["googleMaps"]);c!=null&&d(e,["googleMaps"],QN(c));const h=f(t,["googleSearch"]);h!=null&&d(e,["googleSearch"],WN(h));const g=f(t,["googleSearchRetrieval"]);g!=null&&d(e,["googleSearchRetrieval"],g);const p=f(t,["urlContext"]);return p!=null&&d(e,["urlContext"],p),e}function iI(t){const e=[];for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i)){const s=t[i];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const a=Object.keys(s).map(l=>`${i}.${l}`);e.push(...a)}else e.push(i)}return e.join(",")}function oI(t,e){let i=null;const s=t.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const l=s.setup;typeof l=="object"&&l!==null?(t.bidiGenerateContentSetup=l,i=l):delete t.bidiGenerateContentSetup}else s!==void 0&&delete t.bidiGenerateContentSetup;const a=t.fieldMask;if(i){const l=iI(i);if(Array.isArray(e?.lockAdditionalFields)&&e?.lockAdditionalFields.length===0)l?t.fieldMask=l:delete t.fieldMask;else if(e?.lockAdditionalFields&&e.lockAdditionalFields.length>0&&a!==null&&Array.isArray(a)&&a.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let h=[];a.length>0&&(h=a.map(p=>c.includes(p)?`generationConfig.${p}`:p));const g=[];l&&g.push(l),h.length>0&&g.push(...h),g.length>0?t.fieldMask=g.join(","):delete t.fieldMask}else delete t.fieldMask}else a!==null&&Array.isArray(a)&&a.length>0?t.fieldMask=a.join(","):delete t.fieldMask;return t}class sI extends Dn{constructor(e){super(),this.apiClient=e}async create(e){var i,s;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const h=YN(this.apiClient,e);l=W("auth_tokens",h._url),c=h._query,delete h.config,delete h._url,delete h._query;const g=oI(h,e.config);return a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),a.then(p=>p)}}}function rI(t,e){const i={},s=f(t,["force"]);return e!==void 0&&s!=null&&d(e,["_query","force"],s),i}function aI(t){const e={},i=f(t,["name"]);i!=null&&d(e,["_url","name"],i);const s=f(t,["config"]);return s!=null&&rI(s,e),e}function lI(t){const e={},i=f(t,["name"]);return i!=null&&d(e,["_url","name"],i),e}function uI(t,e){const i={},s=f(t,["pageSize"]);e!==void 0&&s!=null&&d(e,["_query","pageSize"],s);const a=f(t,["pageToken"]);return e!==void 0&&a!=null&&d(e,["_query","pageToken"],a),i}function cI(t){const e={},i=f(t,["parent"]);i!=null&&d(e,["_url","parent"],i);const s=f(t,["config"]);return s!=null&&uI(s,e),e}function fI(t){const e={},i=f(t,["sdkHttpResponse"]);i!=null&&d(e,["sdkHttpResponse"],i);const s=f(t,["nextPageToken"]);s!=null&&d(e,["nextPageToken"],s);const a=f(t,["documents"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>c)),d(e,["documents"],l)}return e}class dI extends Dn{constructor(e){super(),this.apiClient=e,this.list=async i=>new ki(In.PAGED_ITEM_DOCUMENTS,s=>this.listInternal({parent:i.parent,config:s.config}),await this.listInternal(i),i)}async get(e){var i,s;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=lI(e);return l=W("{name}",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),a.then(g=>g)}}async delete(e){var i,s;let a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=aI(e);a=W("{name}",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var i,s;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=cI(e);return l=W("{parent}/documents",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),a.then(g=>{const p=fI(g),v=new GA;return Object.assign(v,p),v})}}}class hI extends Dn{constructor(e,i=new dI(e)){super(),this.apiClient=e,this.documents=i,this.list=async(s={})=>new ki(In.PAGED_ITEM_FILE_SEARCH_STORES,a=>this.listInternal(a),await this.listInternal(s),s)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var i,s;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=tN(e);return l=W("fileSearchStores",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),a.then(g=>g)}}async get(e){var i,s;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=oN(e);return l=W("{name}",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),a.then(g=>g)}}async delete(e){var i,s;let a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=iN(e);a=W("{name}",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var i,s;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=cN(e);return l=W("fileSearchStores",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),a.then(g=>{const p=fN(g),v=new HA;return Object.assign(v,p),v})}}async uploadToFileSearchStoreInternal(e){var i,s;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=dN(e);return l=W("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),a.then(g=>{const p=hN(g),v=new BA;return Object.assign(v,p),v})}}async importFile(e){var i,s;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=aN(e);return l=W("{file_search_store_name}:importFile",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),a.then(g=>{const p=rN(g),v=new sf;return Object.assign(v,p),v})}}}let yv=function(){const{crypto:t}=globalThis;if(t?.randomUUID)return yv=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),i=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,s=>(+s^i()&15>>+s/4).toString(16))};const pI=()=>yv();function Kc(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Xc=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class Xt extends Error{}class vt extends Xt{constructor(e,i,s,a){super(`${vt.makeMessage(e,i,s)}`),this.status=e,this.headers=a,this.error=i}static makeMessage(e,i,s){const a=i?.message?typeof i.message=="string"?i.message:JSON.stringify(i.message):i?JSON.stringify(i):s;return e&&a?`${e} ${a}`:e?`${e} status code (no body)`:a||"(no status code or body)"}static generate(e,i,s,a){if(!e||!a)return new Ja({message:s,cause:Xc(i)});const l=i;return e===400?new _v(e,l,s,a):e===401?new Tv(e,l,s,a):e===403?new Sv(e,l,s,a):e===404?new Ev(e,l,s,a):e===409?new Av(e,l,s,a):e===422?new wv(e,l,s,a):e===429?new Cv(e,l,s,a):e>=500?new bv(e,l,s,a):new vt(e,l,s,a)}}class Qc extends vt{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Ja extends vt{constructor({message:e,cause:i}){super(void 0,void 0,e||"Connection error.",void 0),i&&(this.cause=i)}}class vv extends Ja{constructor({message:e}={}){super({message:e??"Request timed out."})}}class _v extends vt{}class Tv extends vt{}class Sv extends vt{}class Ev extends vt{}class Av extends vt{}class wv extends vt{}class Cv extends vt{}class bv extends vt{}const mI=/^[a-z][a-z0-9+.-]*:/i,gI=t=>mI.test(t);let Wc=t=>(Wc=Array.isArray,Wc(t));const yI=Wc;let vI=yI;const Ey=vI;function _I(t){if(!t)return!0;for(const e in t)return!1;return!0}function TI(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const SI=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Xt(`${t} must be an integer`);if(e<0)throw new Xt(`${t} must be a positive integer`);return e},EI=t=>{try{return JSON.parse(t)}catch{return}};const AI=t=>new Promise(e=>setTimeout(e,t));const Io="0.0.1";function wI(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const CI=()=>{var t,e,i,s,a;const l=wI();if(l==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Io,"X-Stainless-OS":wy(Deno.build.os),"X-Stainless-Arch":Ay(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Io,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(l==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Io,"X-Stainless-OS":wy((i=globalThis.process.platform)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Arch":Ay((s=globalThis.process.arch)!==null&&s!==void 0?s:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(a=globalThis.process.version)!==null&&a!==void 0?a:"unknown"};const c=bI();return c?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Io,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${c.browser}`,"X-Stainless-Runtime-Version":c.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Io,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function bI(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:i}of t){const s=i.exec(navigator.userAgent);if(s){const a=s[1]||0,l=s[2]||0,c=s[3]||0;return{browser:e,version:`${a}.${l}.${c}`}}}return null}const Ay=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",wy=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Aa;const RI=()=>Aa??(Aa=CI());function NI(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Rv(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function II(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return Rv({start(){},async pull(i){const{done:s,value:a}=await e.next();s?i.close():i.enqueue(a)},async cancel(){var i;await((i=e.return)===null||i===void 0?void 0:i.call(e))}})}function Nv(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const i=await e.read();return i?.done&&e.releaseLock(),i}catch(i){throw e.releaseLock(),i}},async return(){const i=e.cancel();return e.releaseLock(),await i,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function MI(t){var e,i;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((i=(e=t[Symbol.asyncIterator]()).return)===null||i===void 0?void 0:i.call(e));return}const s=t.getReader(),a=s.cancel();s.releaseLock(),await a}const DI=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});const Iv=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,i=typeof((t=e?.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(i?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function bc(t,e,i){return Iv(),new File(t,e??"unknown_file",i)}function UI(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const xI=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";const Mv=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",kI=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&Mv(t),OI=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function LI(t,e,i){if(Iv(),t=await t,kI(t))return t instanceof File?t:bc([await t.arrayBuffer()],t.name);if(OI(t)){const a=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),bc(await Zc(a),e,i)}const s=await Zc(t);if(e||(e=UI(t)),!i?.type){const a=s.find(l=>typeof l=="object"&&"type"in l&&l.type);typeof a=="string"&&(i=Object.assign(Object.assign({},i),{type:a}))}return bc(s,e,i)}async function Zc(t){var e,i,s,a,l;let c=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)c.push(t);else if(Mv(t))c.push(t instanceof Blob?t:await t.arrayBuffer());else if(xI(t))try{for(var h=!0,g=on(t),p;p=await g.next(),e=p.done,!e;h=!0){a=p.value,h=!1;const v=a;c.push(...await Zc(v))}}catch(v){i={error:v}}finally{try{!h&&!e&&(s=g.return)&&await s.call(g)}finally{if(i)throw i.error}}else{const v=(l=t?.constructor)===null||l===void 0?void 0:l.name;throw new Error(`Unexpected data type: ${typeof t}${v?`; constructor: ${v}`:""}${PI(t)}`)}return c}function PI(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(i=>`"${i}"`).join(", ")}]`}class Dv{constructor(e){this._client=e}}Dv._key=[];function Uv(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Cy=Object.freeze(Object.create(null)),qI=(t=Uv)=>(function(i,...s){if(i.length===1)return i[0];let a=!1;const l=[],c=i.reduce((v,T,_)=>{var E,w,b;/[?#]/.test(T)&&(a=!0);const R=s[_];let D=(a?encodeURIComponent:t)(""+R);return _!==s.length&&(R==null||typeof R=="object"&&R.toString===((b=Object.getPrototypeOf((w=Object.getPrototypeOf((E=R.hasOwnProperty)!==null&&E!==void 0?E:Cy))!==null&&w!==void 0?w:Cy))===null||b===void 0?void 0:b.toString))&&(D=R+"",l.push({start:v.length+T.length,length:D.length,error:`Value of type ${Object.prototype.toString.call(R).slice(8,-1)} is not a valid path parameter`})),v+T+(_===s.length?"":D)},""),h=c.split(/[?#]/,1)[0],g=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let p;for(;(p=g.exec(h))!==null;)l.push({start:p.index,length:p[0].length,error:`Value "${p[0]}" can't be safely passed as a path parameter`});if(l.sort((v,T)=>v.start-T.start),l.length>0){let v=0;const T=l.reduce((_,E)=>{const w=" ".repeat(E.start-v),b="^".repeat(E.length);return v=E.start+E.length,_+w+b},"");throw new Xt(`Path parameters result in path with invalid segments:
${l.map(_=>_.error).join(`
`)}
${c}
${T}`)}return c}),wa=qI(Uv);class xv extends Dv{create(e,i){var s;const{api_version:a=this._client.apiVersion}=e,l=La(e,["api_version"]);if("model"in l&&"agent_config"in l)throw new Xt("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in l&&"generation_config"in l)throw new Xt("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(wa`/${a}/interactions`,Object.assign(Object.assign({body:l},i),{stream:(s=e.stream)!==null&&s!==void 0?s:!1}))}delete(e,i={},s){const{api_version:a=this._client.apiVersion}=i??{};return this._client.delete(wa`/${a}/interactions/${e}`,s)}cancel(e,i={},s){const{api_version:a=this._client.apiVersion}=i??{};return this._client.post(wa`/${a}/interactions/${e}/cancel`,s)}get(e,i={},s){var a;const l=i??{},{api_version:c=this._client.apiVersion}=l,h=La(l,["api_version"]);return this._client.get(wa`/${c}/interactions/${e}`,Object.assign(Object.assign({query:h},s),{stream:(a=i?.stream)!==null&&a!==void 0?a:!1}))}}xv._key=Object.freeze(["interactions"]);class kv extends xv{}function GI(t){let e=0;for(const a of t)e+=a.length;const i=new Uint8Array(e);let s=0;for(const a of t)i.set(a,s),s+=a.length;return i}let Ca;function df(t){let e;return(Ca??(e=new globalThis.TextEncoder,Ca=e.encode.bind(e)))(t)}let ba;function by(t){let e;return(ba??(e=new globalThis.TextDecoder,ba=e.decode.bind(e)))(t)}class Ya{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const i=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?df(e):e;this.buffer=GI([this.buffer,i]);const s=[];let a;for(;(a=HI(this.buffer,this.carriageReturnIndex))!=null;){if(a.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=a.index;continue}if(this.carriageReturnIndex!=null&&(a.index!==this.carriageReturnIndex+1||a.carriage)){s.push(by(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const l=this.carriageReturnIndex!==null?a.preceding-1:a.preceding,c=by(this.buffer.subarray(0,l));s.push(c),this.buffer=this.buffer.subarray(a.index),this.carriageReturnIndex=null}return s}flush(){return this.buffer.length?this.decode(`
`):[]}}Ya.NEWLINE_CHARS=new Set([`
`,"\r"]);Ya.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function HI(t,e){for(let a=e??0;a<t.length;a++){if(t[a]===10)return{preceding:a,index:a+1,carriage:!1};if(t[a]===13)return{preceding:a,index:a+1,carriage:!0}}return null}function BI(t){for(let s=0;s<t.length-1;s++){if(t[s]===10&&t[s+1]===10||t[s]===13&&t[s+1]===13)return s+2;if(t[s]===13&&t[s+1]===10&&s+3<t.length&&t[s+2]===13&&t[s+3]===10)return s+4}return-1}const Pa={off:0,error:200,warn:300,info:400,debug:500},Ry=(t,e,i)=>{if(t){if(TI(Pa,t))return t;gt(i).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Pa))}`)}};function Gs(){}function Ra(t,e,i){return!e||Pa[t]>Pa[i]?Gs:e[t].bind(e)}const VI={error:Gs,warn:Gs,info:Gs,debug:Gs};let Ny=new WeakMap;function gt(t){var e;const i=t.logger,s=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!i)return VI;const a=Ny.get(i);if(a&&a[0]===s)return a[1];const l={error:Ra("error",i,s),warn:Ra("warn",i,s),info:Ra("info",i,s),debug:Ra("debug",i,s)};return Ny.set(i,[s,l]),l}const Mi=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,i])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":i]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);class Uo{constructor(e,i,s){this.iterator=e,this.controller=i,this.client=s}static fromSSEResponse(e,i,s){let a=!1;const l=s?gt(s):console;function c(){return nn(this,arguments,function*(){var g,p,v,T;if(a)throw new Xt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let _=!1;try{try{for(var E=!0,w=on(zI(e,i)),b;b=yield ue(w.next()),g=b.done,!g;E=!0){T=b.value,E=!1;const R=T;if(!_)if(R.data.startsWith("[DONE]")){_=!0;continue}else try{yield yield ue(JSON.parse(R.data))}catch(D){throw l.error("Could not parse message into JSON:",R.data),l.error("From chunk:",R.raw),D}}}catch(R){p={error:R}}finally{try{!E&&!g&&(v=w.return)&&(yield ue(v.call(w)))}finally{if(p)throw p.error}}_=!0}catch(R){if(Kc(R))return yield ue(void 0);throw R}finally{_||i.abort()}})}return new Uo(c,i,s)}static fromReadableStream(e,i,s){let a=!1;function l(){return nn(this,arguments,function*(){var g,p,v,T;const _=new Ya,E=Nv(e);try{for(var w=!0,b=on(E),R;R=yield ue(b.next()),g=R.done,!g;w=!0){T=R.value,w=!1;const D=T;for(const q of _.decode(D))yield yield ue(q)}}catch(D){p={error:D}}finally{try{!w&&!g&&(v=b.return)&&(yield ue(v.call(b)))}finally{if(p)throw p.error}}for(const D of _.flush())yield yield ue(D)})}function c(){return nn(this,arguments,function*(){var g,p,v,T;if(a)throw new Xt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let _=!1;try{try{for(var E=!0,w=on(l()),b;b=yield ue(w.next()),g=b.done,!g;E=!0){T=b.value,E=!1;const R=T;_||R&&(yield yield ue(JSON.parse(R)))}}catch(R){p={error:R}}finally{try{!E&&!g&&(v=w.return)&&(yield ue(v.call(w)))}finally{if(p)throw p.error}}_=!0}catch(R){if(Kc(R))return yield ue(void 0);throw R}finally{_||i.abort()}})}return new Uo(c,i,s)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],i=[],s=this.iterator(),a=l=>({next:()=>{if(l.length===0){const c=s.next();e.push(c),i.push(c)}return l.shift()}});return[new Uo(()=>a(e),this.controller,this.client),new Uo(()=>a(i),this.controller,this.client)]}toReadableStream(){const e=this;let i;return Rv({async start(){i=e[Symbol.asyncIterator]()},async pull(s){try{const{value:a,done:l}=await i.next();if(l)return s.close();const c=df(JSON.stringify(a)+`
`);s.enqueue(c)}catch(a){s.error(a)}},async cancel(){var s;await((s=i.return)===null||s===void 0?void 0:s.call(i))}})}}function zI(t,e){return nn(this,arguments,function*(){var s,a,l,c;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Xt("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Xt("Attempted to iterate over a response with no body");const h=new $I,g=new Ya,p=Nv(t.body);try{for(var v=!0,T=on(FI(p)),_;_=yield ue(T.next()),s=_.done,!s;v=!0){c=_.value,v=!1;const E=c;for(const w of g.decode(E)){const b=h.decode(w);b&&(yield yield ue(b))}}}catch(E){a={error:E}}finally{try{!v&&!s&&(l=T.return)&&(yield ue(l.call(T)))}finally{if(a)throw a.error}}for(const E of g.flush()){const w=h.decode(E);w&&(yield yield ue(w))}})}function FI(t){return nn(this,arguments,function*(){var i,s,a,l;let c=new Uint8Array;try{for(var h=!0,g=on(t),p;p=yield ue(g.next()),i=p.done,!i;h=!0){l=p.value,h=!1;const v=l;if(v==null)continue;const T=v instanceof ArrayBuffer?new Uint8Array(v):typeof v=="string"?df(v):v;let _=new Uint8Array(c.length+T.length);_.set(c),_.set(T,c.length),c=_;let E;for(;(E=BI(c))!==-1;)yield yield ue(c.slice(0,E)),c=c.slice(E)}}catch(v){s={error:v}}finally{try{!h&&!i&&(a=g.return)&&(yield ue(a.call(g)))}finally{if(s)throw s.error}}c.length>0&&(yield yield ue(c))})}class $I{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const l={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],l}if(this.chunks.push(e),e.startsWith(":"))return null;let[i,s,a]=JI(e,":");return a.startsWith(" ")&&(a=a.substring(1)),i==="event"?this.event=a:i==="data"&&this.data.push(a),null}}function JI(t,e){const i=t.indexOf(e);return i!==-1?[t.substring(0,i),e,t.substring(i+e.length)]:[t,"",""]}async function YI(t,e){const{response:i,requestLogID:s,retryOfRequestLogID:a,startTime:l}=e,c=await(async()=>{var h;if(e.options.stream)return gt(t).debug("response",i.status,i.url,i.headers,i.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(i,e.controller,t):Uo.fromSSEResponse(i,e.controller,t);if(i.status===204)return null;if(e.options.__binaryResponse)return i;const g=i.headers.get("content-type"),p=(h=g?.split(";")[0])===null||h===void 0?void 0:h.trim();return p?.includes("application/json")||p?.endsWith("+json")?i.headers.get("content-length")==="0"?void 0:await i.json():await i.text()})();return gt(t).debug(`[${s}] response parsed`,Mi({retryOfRequestLogID:a,url:i.url,status:i.status,body:c,durationMs:Date.now()-l})),c}class hf extends Promise{constructor(e,i,s=YI){super(a=>{a(null)}),this.responsePromise=i,this.parseResponse=s,this.client=e}_thenUnwrap(e){return new hf(this.client,this.responsePromise,async(i,s)=>e(await this.parseResponse(i,s),s))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,i]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:i}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,i){return this.parse().then(e,i)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}const Ov=Symbol("brand.privateNullableHeaders");function*KI(t){if(!t)return;if(Ov in t){const{values:s,nulls:a}=t;yield*s.entries();for(const l of a)yield[l,null];return}let e=!1,i;t instanceof Headers?i=t.entries():Ey(t)?i=t:(e=!0,i=Object.entries(t??{}));for(let s of i){const a=s[0];if(typeof a!="string")throw new TypeError("expected header name to be a string");const l=Ey(s[1])?s[1]:[s[1]];let c=!1;for(const h of l)h!==void 0&&(e&&!c&&(c=!0,yield[a,null]),yield[a,h])}}const Ps=t=>{const e=new Headers,i=new Set;for(const s of t){const a=new Set;for(const[l,c]of KI(s)){const h=l.toLowerCase();a.has(h)||(e.delete(l),a.add(h)),c===null?(e.delete(l),i.add(h)):(e.append(l,c),i.delete(h))}}return{[Ov]:!0,values:e,nulls:i}};const Rc=t=>{var e,i,s,a,l,c;if(typeof globalThis.process<"u")return(s=(i=(e=pA)===null||e===void 0?void 0:e[t])===null||i===void 0?void 0:i.trim())!==null&&s!==void 0?s:void 0;if(typeof globalThis.Deno<"u")return(c=(l=(a=globalThis.Deno.env)===null||a===void 0?void 0:a.get)===null||l===void 0?void 0:l.call(a,t))===null||c===void 0?void 0:c.trim()};var Lv;class Ka{constructor(e){var i,s,a,l,c,h,g,{baseURL:p=Rc("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:v=(i=Rc("GEMINI_API_KEY"))!==null&&i!==void 0?i:null,apiVersion:T="v1beta"}=e,_=La(e,["baseURL","apiKey","apiVersion"]);const E=Object.assign(Object.assign({apiKey:v,apiVersion:T},_),{baseURL:p||"https://generativelanguage.googleapis.com"});this.baseURL=E.baseURL,this.timeout=(s=E.timeout)!==null&&s!==void 0?s:Ka.DEFAULT_TIMEOUT,this.logger=(a=E.logger)!==null&&a!==void 0?a:console;const w="warn";this.logLevel=w,this.logLevel=(c=(l=Ry(E.logLevel,"ClientOptions.logLevel",this))!==null&&l!==void 0?l:Ry(Rc("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&c!==void 0?c:w,this.fetchOptions=E.fetchOptions,this.maxRetries=(h=E.maxRetries)!==null&&h!==void 0?h:2,this.fetch=(g=E.fetch)!==null&&g!==void 0?g:NI(),this.encoder=DI,this._options=E,this.apiKey=v,this.apiVersion=T,this.clientAdapter=E.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:i}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!i.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const i=Ps([e.headers]);if(!(i.values.has("authorization")||i.values.has("x-goog-api-key"))){if(this.apiKey)return Ps([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Ps([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([i,s])=>typeof s<"u").map(([i,s])=>{if(typeof s=="string"||typeof s=="number"||typeof s=="boolean")return`${encodeURIComponent(i)}=${encodeURIComponent(s)}`;if(s===null)return`${encodeURIComponent(i)}=`;throw new Xt(`Cannot stringify type ${typeof s}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Io}`}defaultIdempotencyKey(){return`stainless-node-retry-${pI()}`}makeStatusError(e,i,s,a){return vt.generate(e,i,s,a)}buildURL(e,i,s){const a=!this.baseURLOverridden()&&s||this.baseURL,l=gI(e)?new URL(e):new URL(a+(a.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),c=this.defaultQuery();return _I(c)||(i=Object.assign(Object.assign({},c),i)),typeof i=="object"&&i&&!Array.isArray(i)&&(l.search=this.stringifyQuery(i)),l.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const i=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${i}`}}async prepareRequest(e,{url:i,options:s}){}get(e,i){return this.methodRequest("get",e,i)}post(e,i){return this.methodRequest("post",e,i)}patch(e,i){return this.methodRequest("patch",e,i)}put(e,i){return this.methodRequest("put",e,i)}delete(e,i){return this.methodRequest("delete",e,i)}methodRequest(e,i,s){return this.request(Promise.resolve(s).then(a=>Object.assign({method:e,path:i},a)))}request(e,i=null){return new hf(this,this.makeRequest(e,i,void 0))}async makeRequest(e,i,s){var a,l,c;const h=await e,g=(a=h.maxRetries)!==null&&a!==void 0?a:this.maxRetries;i==null&&(i=g),await this.prepareOptions(h);const{req:p,url:v,timeout:T}=await this.buildRequest(h,{retryCount:g-i});await this.prepareRequest(p,{url:v,options:h});const _="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),E=s===void 0?"":`, retryOf: ${s}`,w=Date.now();if(gt(this).debug(`[${_}] sending request`,Mi({retryOfRequestLogID:s,method:h.method,url:v,options:h,headers:p.headers})),!((l=h.signal)===null||l===void 0)&&l.aborted)throw new Qc;const b=new AbortController,R=await this.fetchWithTimeout(v,p,T,b).catch(Xc),D=Date.now();if(R instanceof globalThis.Error){const U=`retrying, ${i} attempts remaining`;if(!((c=h.signal)===null||c===void 0)&&c.aborted)throw new Qc;const V=Kc(R)||/timed? ?out/i.test(String(R)+("cause"in R?String(R.cause):""));if(i)return gt(this).info(`[${_}] connection ${V?"timed out":"failed"} - ${U}`),gt(this).debug(`[${_}] connection ${V?"timed out":"failed"} (${U})`,Mi({retryOfRequestLogID:s,url:v,durationMs:D-w,message:R.message})),this.retryRequest(h,i,s??_);throw gt(this).info(`[${_}] connection ${V?"timed out":"failed"} - error; no more retries left`),gt(this).debug(`[${_}] connection ${V?"timed out":"failed"} (error; no more retries left)`,Mi({retryOfRequestLogID:s,url:v,durationMs:D-w,message:R.message})),V?new vv:new Ja({cause:R})}const q=`[${_}${E}] ${p.method} ${v} ${R.ok?"succeeded":"failed"} with status ${R.status} in ${D-w}ms`;if(!R.ok){const U=await this.shouldRetry(R);if(i&&U){const K=`retrying, ${i} attempts remaining`;return await MI(R.body),gt(this).info(`${q} - ${K}`),gt(this).debug(`[${_}] response error (${K})`,Mi({retryOfRequestLogID:s,url:R.url,status:R.status,headers:R.headers,durationMs:D-w})),this.retryRequest(h,i,s??_,R.headers)}const V=U?"error; no more retries left":"error; not retryable";gt(this).info(`${q} - ${V}`);const X=await R.text().catch(K=>Xc(K).message),P=EI(X),J=P?void 0:X;throw gt(this).debug(`[${_}] response error (${V})`,Mi({retryOfRequestLogID:s,url:R.url,status:R.status,headers:R.headers,message:J,durationMs:Date.now()-w})),this.makeStatusError(R.status,P,J,R.headers)}return gt(this).info(q),gt(this).debug(`[${_}] response start`,Mi({retryOfRequestLogID:s,url:R.url,status:R.status,headers:R.headers,durationMs:D-w})),{response:R,options:h,controller:b,requestLogID:_,retryOfRequestLogID:s,startTime:w}}async fetchWithTimeout(e,i,s,a){const l=i||{},{signal:c,method:h}=l,g=La(l,["signal","method"]),p=this._makeAbort(a);c&&c.addEventListener("abort",p,{once:!0});const v=setTimeout(p,s),T=globalThis.ReadableStream&&g.body instanceof globalThis.ReadableStream||typeof g.body=="object"&&g.body!==null&&Symbol.asyncIterator in g.body,_=Object.assign(Object.assign(Object.assign({signal:a.signal},T?{duplex:"half"}:{}),{method:"GET"}),g);h&&(_.method=h.toUpperCase());try{return await this.fetch.call(void 0,e,_)}finally{clearTimeout(v)}}async shouldRetry(e){const i=e.headers.get("x-should-retry");return i==="true"?!0:i==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,i,s,a){var l;let c;const h=a?.get("retry-after-ms");if(h){const p=parseFloat(h);Number.isNaN(p)||(c=p)}const g=a?.get("retry-after");if(g&&!c){const p=parseFloat(g);Number.isNaN(p)?c=Date.parse(g)-Date.now():c=p*1e3}if(!(c&&0<=c&&c<60*1e3)){const p=(l=e.maxRetries)!==null&&l!==void 0?l:this.maxRetries;c=this.calculateDefaultRetryTimeoutMillis(i,p)}return await AI(c),this.makeRequest(e,i-1,s)}calculateDefaultRetryTimeoutMillis(e,i){const l=i-e,c=Math.min(.5*Math.pow(2,l),8),h=1-Math.random()*.25;return c*h*1e3}async buildRequest(e,{retryCount:i=0}={}){var s,a,l;const c=Object.assign({},e),{method:h,path:g,query:p,defaultBaseURL:v}=c,T=this.buildURL(g,p,v);"timeout"in c&&SI("timeout",c.timeout),c.timeout=(s=c.timeout)!==null&&s!==void 0?s:this.timeout;const{bodyHeaders:_,body:E}=this.buildBody({options:c}),w=await this.buildHeaders({options:e,method:h,bodyHeaders:_,retryCount:i});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:h,headers:w},c.signal&&{signal:c.signal}),globalThis.ReadableStream&&E instanceof globalThis.ReadableStream&&{duplex:"half"}),E&&{body:E}),(a=this.fetchOptions)!==null&&a!==void 0?a:{}),(l=c.fetchOptions)!==null&&l!==void 0?l:{}),url:T,timeout:c.timeout}}async buildHeaders({options:e,method:i,bodyHeaders:s,retryCount:a}){let l={};this.idempotencyHeader&&i!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),l[this.idempotencyHeader]=e.idempotencyKey);const c=await this.authHeaders(e);let h=Ps([l,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(a)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),RI()),this._options.defaultHeaders,s,e.headers,c]);return this.validateHeaders(h),h.values}_makeAbort(e){return()=>e.abort()}buildBody({options:{body:e,headers:i}}){if(!e)return{bodyHeaders:void 0,body:void 0};const s=Ps([i]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&s.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:II(e)}:this.encoder({body:e,headers:s})}}Ka.DEFAULT_TIMEOUT=6e4;class ot extends Ka{constructor(){super(...arguments),this.interactions=new kv(this)}}Lv=ot;ot.GeminiNextGenAPIClient=Lv;ot.GeminiNextGenAPIClientError=Xt;ot.APIError=vt;ot.APIConnectionError=Ja;ot.APIConnectionTimeoutError=vv;ot.APIUserAbortError=Qc;ot.NotFoundError=Ev;ot.ConflictError=Av;ot.RateLimitError=Cv;ot.BadRequestError=_v;ot.AuthenticationError=Tv;ot.InternalServerError=bv;ot.PermissionDeniedError=Sv;ot.UnprocessableEntityError=wv;ot.toFile=LI;ot.Interactions=kv;function XI(t,e){const i={},s=f(t,["name"]);return s!=null&&d(i,["_url","name"],s),i}function QI(t,e){const i={},s=f(t,["name"]);return s!=null&&d(i,["_url","name"],s),i}function WI(t,e){const i={},s=f(t,["sdkHttpResponse"]);return s!=null&&d(i,["sdkHttpResponse"],s),i}function ZI(t,e){const i={},s=f(t,["sdkHttpResponse"]);return s!=null&&d(i,["sdkHttpResponse"],s),i}function jI(t,e,i){const s={};if(f(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const a=f(t,["tunedModelDisplayName"]);if(e!==void 0&&a!=null&&d(e,["displayName"],a),f(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=f(t,["epochCount"]);e!==void 0&&l!=null&&d(e,["tuningTask","hyperparameters","epochCount"],l);const c=f(t,["learningRateMultiplier"]);if(c!=null&&d(s,["tuningTask","hyperparameters","learningRateMultiplier"],c),f(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");if(f(t,["tuningMode"])!==void 0)throw new Error("tuningMode parameter is not supported in Gemini API.");if(f(t,["customBaseModel"])!==void 0)throw new Error("customBaseModel parameter is not supported in Gemini API.");const h=f(t,["batchSize"]);e!==void 0&&h!=null&&d(e,["tuningTask","hyperparameters","batchSize"],h);const g=f(t,["learningRate"]);if(e!==void 0&&g!=null&&d(e,["tuningTask","hyperparameters","learningRate"],g),f(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");if(f(t,["baseTeacherModel"])!==void 0)throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(f(t,["tunedTeacherModelSource"])!==void 0)throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(f(t,["sftLossWeightMultiplier"])!==void 0)throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(f(t,["outputUri"])!==void 0)throw new Error("outputUri parameter is not supported in Gemini API.");if(f(t,["encryptionSpec"])!==void 0)throw new Error("encryptionSpec parameter is not supported in Gemini API.");return s}function eM(t,e,i){const s={};let a=f(i,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const P=f(t,["validationDataset"]);e!==void 0&&P!=null&&d(e,["supervisedTuningSpec"],Nc(P))}else if(a==="PREFERENCE_TUNING"){const P=f(t,["validationDataset"]);e!==void 0&&P!=null&&d(e,["preferenceOptimizationSpec"],Nc(P))}else if(a==="DISTILLATION"){const P=f(t,["validationDataset"]);e!==void 0&&P!=null&&d(e,["distillationSpec"],Nc(P))}const l=f(t,["tunedModelDisplayName"]);e!==void 0&&l!=null&&d(e,["tunedModelDisplayName"],l);const c=f(t,["description"]);e!==void 0&&c!=null&&d(e,["description"],c);let h=f(i,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const P=f(t,["epochCount"]);e!==void 0&&P!=null&&d(e,["supervisedTuningSpec","hyperParameters","epochCount"],P)}else if(h==="PREFERENCE_TUNING"){const P=f(t,["epochCount"]);e!==void 0&&P!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],P)}else if(h==="DISTILLATION"){const P=f(t,["epochCount"]);e!==void 0&&P!=null&&d(e,["distillationSpec","hyperParameters","epochCount"],P)}let g=f(i,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const P=f(t,["learningRateMultiplier"]);e!==void 0&&P!=null&&d(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],P)}else if(g==="PREFERENCE_TUNING"){const P=f(t,["learningRateMultiplier"]);e!==void 0&&P!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],P)}else if(g==="DISTILLATION"){const P=f(t,["learningRateMultiplier"]);e!==void 0&&P!=null&&d(e,["distillationSpec","hyperParameters","learningRateMultiplier"],P)}let p=f(i,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const P=f(t,["exportLastCheckpointOnly"]);e!==void 0&&P!=null&&d(e,["supervisedTuningSpec","exportLastCheckpointOnly"],P)}else if(p==="PREFERENCE_TUNING"){const P=f(t,["exportLastCheckpointOnly"]);e!==void 0&&P!=null&&d(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],P)}else if(p==="DISTILLATION"){const P=f(t,["exportLastCheckpointOnly"]);e!==void 0&&P!=null&&d(e,["distillationSpec","exportLastCheckpointOnly"],P)}let v=f(i,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const P=f(t,["adapterSize"]);e!==void 0&&P!=null&&d(e,["supervisedTuningSpec","hyperParameters","adapterSize"],P)}else if(v==="PREFERENCE_TUNING"){const P=f(t,["adapterSize"]);e!==void 0&&P!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],P)}else if(v==="DISTILLATION"){const P=f(t,["adapterSize"]);e!==void 0&&P!=null&&d(e,["distillationSpec","hyperParameters","adapterSize"],P)}let T=f(i,["config","method"]);if(T===void 0&&(T="SUPERVISED_FINE_TUNING"),T==="SUPERVISED_FINE_TUNING"){const P=f(t,["tuningMode"]);e!==void 0&&P!=null&&d(e,["supervisedTuningSpec","tuningMode"],P)}const _=f(t,["customBaseModel"]);e!==void 0&&_!=null&&d(e,["customBaseModel"],_);let E=f(i,["config","method"]);if(E===void 0&&(E="SUPERVISED_FINE_TUNING"),E==="SUPERVISED_FINE_TUNING"){const P=f(t,["batchSize"]);e!==void 0&&P!=null&&d(e,["supervisedTuningSpec","hyperParameters","batchSize"],P)}let w=f(i,["config","method"]);if(w===void 0&&(w="SUPERVISED_FINE_TUNING"),w==="SUPERVISED_FINE_TUNING"){const P=f(t,["learningRate"]);e!==void 0&&P!=null&&d(e,["supervisedTuningSpec","hyperParameters","learningRate"],P)}const b=f(t,["labels"]);e!==void 0&&b!=null&&d(e,["labels"],b);const R=f(t,["beta"]);e!==void 0&&R!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","beta"],R);const D=f(t,["baseTeacherModel"]);e!==void 0&&D!=null&&d(e,["distillationSpec","baseTeacherModel"],D);const q=f(t,["tunedTeacherModelSource"]);e!==void 0&&q!=null&&d(e,["distillationSpec","tunedTeacherModelSource"],q);const U=f(t,["sftLossWeightMultiplier"]);e!==void 0&&U!=null&&d(e,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],U);const V=f(t,["outputUri"]);e!==void 0&&V!=null&&d(e,["outputUri"],V);const X=f(t,["encryptionSpec"]);return e!==void 0&&X!=null&&d(e,["encryptionSpec"],X),s}function tM(t,e){const i={},s=f(t,["baseModel"]);s!=null&&d(i,["baseModel"],s);const a=f(t,["preTunedModel"]);a!=null&&d(i,["preTunedModel"],a);const l=f(t,["trainingDataset"]);l!=null&&dM(l);const c=f(t,["config"]);return c!=null&&jI(c,i),i}function nM(t,e){const i={},s=f(t,["baseModel"]);s!=null&&d(i,["baseModel"],s);const a=f(t,["preTunedModel"]);a!=null&&d(i,["preTunedModel"],a);const l=f(t,["trainingDataset"]);l!=null&&hM(l,i,e);const c=f(t,["config"]);return c!=null&&eM(c,i,e),i}function iM(t,e){const i={},s=f(t,["name"]);return s!=null&&d(i,["_url","name"],s),i}function oM(t,e){const i={},s=f(t,["name"]);return s!=null&&d(i,["_url","name"],s),i}function sM(t,e,i){const s={},a=f(t,["pageSize"]);e!==void 0&&a!=null&&d(e,["_query","pageSize"],a);const l=f(t,["pageToken"]);e!==void 0&&l!=null&&d(e,["_query","pageToken"],l);const c=f(t,["filter"]);return e!==void 0&&c!=null&&d(e,["_query","filter"],c),s}function rM(t,e,i){const s={},a=f(t,["pageSize"]);e!==void 0&&a!=null&&d(e,["_query","pageSize"],a);const l=f(t,["pageToken"]);e!==void 0&&l!=null&&d(e,["_query","pageToken"],l);const c=f(t,["filter"]);return e!==void 0&&c!=null&&d(e,["_query","filter"],c),s}function aM(t,e){const i={},s=f(t,["config"]);return s!=null&&sM(s,i),i}function lM(t,e){const i={},s=f(t,["config"]);return s!=null&&rM(s,i),i}function uM(t,e){const i={},s=f(t,["sdkHttpResponse"]);s!=null&&d(i,["sdkHttpResponse"],s);const a=f(t,["nextPageToken"]);a!=null&&d(i,["nextPageToken"],a);const l=f(t,["tunedModels"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(h=>Pv(h))),d(i,["tuningJobs"],c)}return i}function cM(t,e){const i={},s=f(t,["sdkHttpResponse"]);s!=null&&d(i,["sdkHttpResponse"],s);const a=f(t,["nextPageToken"]);a!=null&&d(i,["nextPageToken"],a);const l=f(t,["tuningJobs"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(h=>jc(h))),d(i,["tuningJobs"],c)}return i}function fM(t,e){const i={},s=f(t,["name"]);s!=null&&d(i,["model"],s);const a=f(t,["name"]);return a!=null&&d(i,["endpoint"],a),i}function dM(t,e){const i={};if(f(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const s=f(t,["examples"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),d(i,["examples","examples"],a)}return i}function hM(t,e,i){const s={};let a=f(i,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const c=f(t,["gcsUri"]);e!==void 0&&c!=null&&d(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(a==="PREFERENCE_TUNING"){const c=f(t,["gcsUri"]);e!==void 0&&c!=null&&d(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}else if(a==="DISTILLATION"){const c=f(t,["gcsUri"]);e!==void 0&&c!=null&&d(e,["distillationSpec","promptDatasetUri"],c)}let l=f(i,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const c=f(t,["vertexDatasetResource"]);e!==void 0&&c!=null&&d(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(l==="PREFERENCE_TUNING"){const c=f(t,["vertexDatasetResource"]);e!==void 0&&c!=null&&d(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}else if(l==="DISTILLATION"){const c=f(t,["vertexDatasetResource"]);e!==void 0&&c!=null&&d(e,["distillationSpec","promptDatasetUri"],c)}if(f(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return s}function Pv(t,e){const i={},s=f(t,["sdkHttpResponse"]);s!=null&&d(i,["sdkHttpResponse"],s);const a=f(t,["name"]);a!=null&&d(i,["name"],a);const l=f(t,["state"]);l!=null&&d(i,["state"],jy(l));const c=f(t,["createTime"]);c!=null&&d(i,["createTime"],c);const h=f(t,["tuningTask","startTime"]);h!=null&&d(i,["startTime"],h);const g=f(t,["tuningTask","completeTime"]);g!=null&&d(i,["endTime"],g);const p=f(t,["updateTime"]);p!=null&&d(i,["updateTime"],p);const v=f(t,["description"]);v!=null&&d(i,["description"],v);const T=f(t,["baseModel"]);T!=null&&d(i,["baseModel"],T);const _=f(t,["_self"]);return _!=null&&d(i,["tunedModel"],fM(_)),i}function jc(t,e){const i={},s=f(t,["sdkHttpResponse"]);s!=null&&d(i,["sdkHttpResponse"],s);const a=f(t,["name"]);a!=null&&d(i,["name"],a);const l=f(t,["state"]);l!=null&&d(i,["state"],jy(l));const c=f(t,["createTime"]);c!=null&&d(i,["createTime"],c);const h=f(t,["startTime"]);h!=null&&d(i,["startTime"],h);const g=f(t,["endTime"]);g!=null&&d(i,["endTime"],g);const p=f(t,["updateTime"]);p!=null&&d(i,["updateTime"],p);const v=f(t,["error"]);v!=null&&d(i,["error"],v);const T=f(t,["description"]);T!=null&&d(i,["description"],T);const _=f(t,["baseModel"]);_!=null&&d(i,["baseModel"],_);const E=f(t,["tunedModel"]);E!=null&&d(i,["tunedModel"],E);const w=f(t,["preTunedModel"]);w!=null&&d(i,["preTunedModel"],w);const b=f(t,["supervisedTuningSpec"]);b!=null&&d(i,["supervisedTuningSpec"],b);const R=f(t,["preferenceOptimizationSpec"]);R!=null&&d(i,["preferenceOptimizationSpec"],R);const D=f(t,["distillationSpec"]);D!=null&&d(i,["distillationSpec"],D);const q=f(t,["tuningDataStats"]);q!=null&&d(i,["tuningDataStats"],q);const U=f(t,["encryptionSpec"]);U!=null&&d(i,["encryptionSpec"],U);const V=f(t,["partnerModelTuningSpec"]);V!=null&&d(i,["partnerModelTuningSpec"],V);const X=f(t,["customBaseModel"]);X!=null&&d(i,["customBaseModel"],X);const P=f(t,["experiment"]);P!=null&&d(i,["experiment"],P);const J=f(t,["labels"]);J!=null&&d(i,["labels"],J);const Y=f(t,["outputUri"]);Y!=null&&d(i,["outputUri"],Y);const K=f(t,["pipelineJob"]);K!=null&&d(i,["pipelineJob"],K);const oe=f(t,["serviceAccount"]);oe!=null&&d(i,["serviceAccount"],oe);const pe=f(t,["tunedModelDisplayName"]);pe!=null&&d(i,["tunedModelDisplayName"],pe);const Te=f(t,["veoTuningSpec"]);return Te!=null&&d(i,["veoTuningSpec"],Te),i}function pM(t,e){const i={},s=f(t,["sdkHttpResponse"]);s!=null&&d(i,["sdkHttpResponse"],s);const a=f(t,["name"]);a!=null&&d(i,["name"],a);const l=f(t,["metadata"]);l!=null&&d(i,["metadata"],l);const c=f(t,["done"]);c!=null&&d(i,["done"],c);const h=f(t,["error"]);return h!=null&&d(i,["error"],h),i}function Nc(t,e){const i={},s=f(t,["gcsUri"]);s!=null&&d(i,["validationDatasetUri"],s);const a=f(t,["vertexDatasetResource"]);return a!=null&&d(i,["validationDatasetUri"],a),i}class mM extends Dn{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new ki(In.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(i),i),this.get=async i=>await this.getInternal(i),this.tune=async i=>{var s;if(this.apiClient.isVertexAI())if(i.baseModel.startsWith("projects/")){const a={tunedModelName:i.baseModel};!((s=i.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(a.checkpointId=i.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},i),{preTunedModel:a});return l.baseModel=void 0,await this.tuneInternal(l)}else{const a=Object.assign({},i);return await this.tuneInternal(a)}else{const a=Object.assign({},i),l=await this.tuneMldevInternal(a);let c="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?c=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(c=l.name.split("/operations/")[0]),{name:c,state:Hc.JOB_STATE_QUEUED}}}}async getInternal(e){var i,s,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=oM(e);return h=W("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const _=T;return _.sdkHttpResponse={headers:v.headers},_})),c.then(v=>jc(v))}else{const p=iM(e);return h=W("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const _=T;return _.sdkHttpResponse={headers:v.headers},_})),c.then(v=>Pv(v))}}async listInternal(e){var i,s,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=lM(e);return h=W("tuningJobs",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const _=T;return _.sdkHttpResponse={headers:v.headers},_})),c.then(v=>{const T=cM(v),_=new ty;return Object.assign(_,T),_})}else{const p=aM(e);return h=W("tunedModels",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const _=T;return _.sdkHttpResponse={headers:v.headers},_})),c.then(v=>{const T=uM(v),_=new ty;return Object.assign(_,T),_})}}async cancel(e){var i,s,a,l;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=QI(e);return h=W("{name}:cancel",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(T=>{const _=T;return _.sdkHttpResponse={headers:v.headers},_})),c.then(v=>{const T=ZI(v),_=new ny;return Object.assign(_,T),_})}else{const p=XI(e);return h=W("{name}:cancel",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(a=e.config)===null||a===void 0?void 0:a.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const _=T;return _.sdkHttpResponse={headers:v.headers},_})),c.then(v=>{const T=WI(v),_=new ny;return Object.assign(_,T),_})}}async tuneInternal(e){var i,s;let a,l="",c={};if(this.apiClient.isVertexAI()){const h=nM(e,e);return l=W("tuningJobs",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>jc(g))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var i,s;let a,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=tM(e);return l=W("tunedModels",h._url),c=h._query,delete h._url,delete h._query,a=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),a.then(g=>pM(g))}}}class gM{async download(e,i){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const yM=1024*1024*8,vM=3,_M=1e3,TM=2,qa="x-goog-upload-status";async function SM(t,e,i){var s;const a=await qv(t,e,i),l=await a?.json();if(((s=a?.headers)===null||s===void 0?void 0:s[qa])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function EM(t,e,i){var s;const a=await qv(t,e,i),l=await a?.json();if(((s=a?.headers)===null||s===void 0?void 0:s[qa])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const c=Yy(l),h=new rf;return Object.assign(h,c),h}async function qv(t,e,i){var s,a;let l=0,c=0,h=new Vc(new Response),g="upload";for(l=t.size;c<l;){const p=Math.min(yM,l-c),v=t.slice(c,c+p);c+p>=l&&(g+=", finalize");let T=0,_=_M;for(;T<vM&&(h=await i.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":String(c),"Content-Length":String(p)}}}),!(!((s=h?.headers)===null||s===void 0)&&s[qa]));)T++,await wM(_),_=_*TM;if(c+=p,((a=h?.headers)===null||a===void 0?void 0:a[qa])!=="active")break;if(l<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return h}async function AM(t){return{size:t.size,type:t.type}}function wM(t){return new Promise(e=>setTimeout(e,t))}class CM{async upload(e,i,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await SM(e,i,s)}async uploadToFileSearchStore(e,i,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await EM(e,i,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await AM(e)}}class bM{create(e,i,s){return new RM(e,i,s)}}class RM{constructor(e,i,s){this.url=e,this.headers=i,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}const Iy="x-goog-api-key";class NM{constructor(e){this.apiKey=e}async addAuthHeaders(e,i){if(e.get(Iy)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Iy,this.apiKey)}}}const IM="gl-node/";class MM{get interactions(){var e;if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const i=this.httpOptions;i?.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const s=new ot({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:i?.timeout,maxRetries:(e=i?.retryOptions)===null||e===void 0?void 0:e.attempts});return this._interactions=s.interactions,this._interactions}constructor(e){var i;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(i=e.vertexai)!==null&&i!==void 0?i:!1,this.apiKey=e.apiKey;const s=vA(e.httpOptions,e.vertexai,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const a=new NM(this.apiKey);this.apiClient=new AN({auth:a,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:IM+"web",uploader:new CM,downloader:new gM}),this.models=new VN(this.apiClient),this.live=new LN(this.apiClient,a,new bM),this.batches=new Kw(this.apiClient),this.chats=new IC(this.models,this.apiClient),this.caches=new bC(this.apiClient),this.files=new BC(this.apiClient),this.operations=new zN(this.apiClient),this.authTokens=new sI(this.apiClient),this.tunings=new mM(this.apiClient),this.fileSearchStores=new hI(this.apiClient)}}const DM=({setTutorialActive:t})=>{const[e,i]=Ne.useState(0),s=[{title:"Drag & Drop Bookmarks",content:"Simply drag a URL or a link from another tab (or your bookmark bar) and drop it directly onto any Task card to save it instantly.",image:""},{title:"Managing Tasks",content:"To delete a task, long-press (click and hold) on the task card for 0.5 seconds. To create a new one, use the 'Add a new task' button at the top.",image:""},{title:"Adding Bookmarks Manually",content:"Inside the 'Add Task' modal, you can manually input bookmark titles and URLs to keep your project resources organized from the start.",image:""}],a=()=>{e<s.length-1?i(e+1):t(!1)},l=()=>{e>0&&i(e-1)};return B.jsx("div",{className:"tutorial-overlay",children:B.jsxs("div",{className:"tutorial-card",children:[B.jsx("div",{className:"tutorial-progress",children:s.map((c,h)=>B.jsx("div",{className:`progress-dot ${h===e?"active":""}`},h))}),B.jsxs("div",{className:"tutorial-body",children:[B.jsx("div",{className:"tutorial-icon",children:s[e].image}),B.jsx("h2",{children:s[e].title}),B.jsx("p",{children:s[e].content})]}),B.jsxs("div",{className:"tutorial-footer",children:[B.jsx("button",{className:"primary-button",onClick:l,disabled:e===0,children:"Back"}),B.jsx("button",{className:"primary-button",onClick:a,children:e===s.length-1?"Got it!":"Next"})]})]})})},UM="AIzaSyAXdmd7POuSybgRYskbnaR50zgU25rBuhs",xM=new MM({apiKey:UM});async function kM(t,e,i,s,a){if(!(!t?.length||!e?.length)){i(!0);try{const l=await xM.models.generateContent({model:"gemini-2.5-flash",systemInstruction:{role:"system",parts:[{text:`OUTPUT ONLY RAW JSON. NO MARKDOWN. NO BACKTICKS.
            
            
You are a JSON Data Processing Engine BASED ON CONTEXT MAPPING.

TASK:
  MAP PROJECT NAMES  against URLS based on the context match of title and descriptions of projects and url objects. RETURN ONLY the mapped object and NO PREAMBLE NO MARKDOWN.

RULES:
  1. REUSE OF LINKS: You may reuse a link if it is relevant to multiple projects.
  2. CONTEXTUAL RELEVANCE: strictly analyze the intent.(MAIN TASK)
   - compare URL metadata with PROJECT NAME AND PROJ DESCRIPTION...
   - If a project is "Listen to Music", THEN music videos ARE relevant.
   - If a project is "Learn React", THEN music videos are NOT relevant.
  3. STRICT FORMAT: Return ONLY the raw JSON object. No Markdown. No Preamble.
  4. If unrelevant ONLY THEN Reject URL for CURRENT PROJECT
  4.STRICTLY RETURN ONLY OBJECT NOTHING ELSE`}]},generationConfig:{responseMimeType:"application/json",temperature:.3,responseSchema:{type:"ARRAY",items:{type:"OBJECT",properties:{projectId:{type:"STRING"},relevantUrls:{type:"ARRAY",items:{type:"STRING"}}},required:["projectId","relevantUrls"]}}},contents:[{role:"user",parts:[{text:`.Return ONLY the mapped OBJECT as follows. {project_id:[urls.url]}.ALWAYS Check Relevance for ALL PROJECTS AND LINKS
              PROJECTS: ${JSON.stringify(t)}
              CONTENT: ${JSON.stringify(e)}`}]}]});let c="";if(l.response&&typeof l.response.text=="function")c=l.response.text();else if(l.candidates&&l.candidates.length>0)c=l.candidates[0].content?.parts?.[0]?.text||"";else throw new Error("Empty Response");const h=c.replace(/```json/g,"").replace(/```/g,"").trim(),g=JSON.parse(h);await s(g,a),console.log(g)}catch(l){console.error("Gemini Error:",l)}finally{i(!1)}}}async function OM(t,e){const i=Object.entries(t);console.log(i);for(const s of i){const a=s[0],l=e(s[1]);console.log("Saving Mapped Object:",l);const{error:c}=await yt.from("Projects").update({links:l}).eq("proj_id",a);c&&console.error("Supabase Error:",c.message)}}function LM(){const[t,e]=Ne.useState(!0),[i,s]=Ne.useState(null),[a,l]=Ne.useState([]),[c,h]=Ne.useState([]),[g,p]=Ne.useState(!1);function v(T){const _={};for(let E of T)a.find(w=>{w.url===E&&(_[w.title]=E)});return _}return Ne.useEffect(()=>{(async()=>{const{data:{session:E}}=await yt.auth.getSession();s(E?.user??null),e(!1)})();const{data:{subscription:_}}=yt.auth.onAuthStateChange((E,w)=>{s(w?.user??null),e(!1)});return()=>_.unsubscribe()},[]),t?B.jsxs("div",{className:"loading-spinner",children:["Loading your workspace...",B.jsx("div",{className:"prog-bar"})]}):g?B.jsx(DM,{setTutorialActive:p}):i?B.jsxs(B.Fragment,{children:[B.jsxs("div",{className:"navBar",children:[B.jsxs("div",{children:[B.jsxs("h1",{children:["Knowledge ",B.jsx("span",{className:"title-accent",children:"auditor"})]}),B.jsxs("h3",{children:["Welcome, ",i.user_metadata?.full_name||"User"]})]}),B.jsx("button",{className:"primary-button",onClick:()=>p(!0),children:"Tutorial"}),B.jsx("button",{className:"primary-button",onClick:()=>yt.auth.signOut(),children:"Sign Out"})]}),B.jsxs("div",{className:"app-root",children:[B.jsx(oA,{setProjs:h}),B.jsx(eA,{setBookmarkLinks:l})]}),B.jsx("div",{className:"btnContainer",children:B.jsx("button",{id:"callGemini",className:"primary-button",onClick:()=>{kM(c,a,e,OM,v)},children:"Auto Categorize Bookmarks          "})})]}):B.jsx(sA,{setLoading:e,setCurrentUser:s})}yT.createRoot(document.getElementById("root")).render(B.jsx(LM,{}));
